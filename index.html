<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Productivity Suite</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        .app-container {
            display: flex;
            height: 100vh;
        }

        /* Sidebar Styles - Black & White Theme */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, rgba(0,0,0,0.95) 0%, rgba(20,20,20,0.95) 100%);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            position: fixed;
            height: 100vh;
            z-index: 1000;
            backdrop-filter: blur(20px);
            box-shadow: 5px 0 20px rgba(0, 0, 0, 0.5);
        }

        .sidebar.open {
            transform: translateX(0);
        }

        .sidebar-header {
            padding: 25px 20px;
            background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
            color: #000000;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header h2 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .sidebar-subtitle {
            font-size: 0.85rem;
            opacity: 0.8;
            font-weight: 500;
        }

        .sidebar-nav {
            padding: 15px 0;
            max-height: calc(100vh - 120px);
            overflow-y: auto;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            margin: 2px 0;
        }

        .nav-icon {
            width: 20px;
            margin-right: 12px;
            text-align: center;
        }

        .nav-item:hover {
            background: linear-gradient(90deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-left-color: #ffffff;
        }

        .nav-item.active {
            background: linear-gradient(90deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.08) 100%);
            border-left-color: #ffffff;
            color: #ffffff;
        }

        .nav-icon {
            font-size: 1.1rem;
            margin-right: 12px;
            width: 20px;
        }

        /* Toggle Button */
        .sidebar-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
            color: #000000;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .sidebar-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(255, 255, 255, 0.3);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 0;
            transition: margin-left 0.3s ease;
            min-height: 100vh;
        }

        .main-content.shifted {
            margin-left: 280px;
        }

        .content-area {
            display: none;
            padding: 80px 20px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .content-area.active {
            display: block;
        }

        .page-header {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            backdrop-filter: blur(20px);
        }

        .page-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #ffffff 0%, #cccccc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        /* Task List Styles */


        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
        }

        .task-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #000000 0%, #333333 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }


        .category-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab.active {
            background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
            color: #000000;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
        }

        .add-task-form {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .task-input, .form-input, .form-textarea, .chat-input {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            backdrop-filter: blur(10px);
        }

        .task-input:focus, .form-input:focus, .form-textarea:focus, .chat-input:focus {
            border-color: #ffffff;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.15);
        }

        .task-input::placeholder, .form-input::placeholder, .form-textarea::placeholder, .chat-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .category-select {
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            outline: none;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            cursor: pointer;
        }

        .add-btn, .primary-btn, .send-btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
            color: #000000;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .add-btn:hover, .primary-btn:hover, .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2);
        }

        .tasks-container {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .task-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            border-left: 4px solid #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.1);
            flex-direction: column;
        }

        .task-main {
            display: flex;
            align-items: center;
            gap: 15px;
            width: 100%;
        }

        .task-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
            background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.08) 100%);
        }

        .task-item.completed {
            opacity: 0.7;
            border-left-color: #cccccc;
        }

        .task-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.1);
        }

        .task-checkbox.checked {
            background: #ffffff;
            border-color: #ffffff;
            color: #000000;
        }

        .task-text {
            flex: 1;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            color: #ffffff;
        }

        .task-text.completed {
            text-decoration: line-through;
            color: rgba(255, 255, 255, 0.5);
        }

        .task-category {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .task-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .action-btn {
            width: 35px;
            height: 35px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .edit-btn {
            background: rgba(255, 255, 255, 0.15);
        }

        .delete-btn {
            background: rgba(255, 255, 255, 0.15);
        }

        .add-subtask-btn {
            background: rgba(255, 255, 255, 0.15);
        }

        .action-btn:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.2);
        }

        /* Sub-tasks */
        .subtasks {
            margin-top: 15px;
            padding-left: 20px;
            width: 100%;
        }

        .subtask-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .subtask-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.1);
        }

        .subtask-checkbox.checked {
            background: #ffffff;
            border-color: #ffffff;
            color: #000000;
        }

        .subtask-text {
            flex: 1;
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .subtask-text.completed {
            text-decoration: line-through;
            color: rgba(255, 255, 255, 0.5);
        }

        .add-subtask-form {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            align-items: center;
        }

        .subtask-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            font-size: 0.9rem;
        }

        .subtask-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .subtask-add-btn {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.15);
            color: #ffffff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .subtask-add-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.6);
        }

        .filter-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .filter-btn.active {
            background: #ffffff;
            color: #000000;
            border-color: #ffffff;
        }

        .clear-completed {
            background: rgba(255, 255, 255, 0.15);
            color: #ffffff;
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            margin-left: auto;
            transition: all 0.3s ease;
        }

        .clear-completed:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Content Cards */
        .content-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(20px);
        }

        .content-card h2 {
            color: #ffffff;
            margin-bottom: 20px;
            font-size: 1.5rem;
            font-weight: 600;
        }

        /* Project Pages Styles */
        .project-overview {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
            align-items: start;
        }

        @media (max-width: 768px) {
            .project-overview {
                grid-template-columns: 1fr;
                gap: 30px;
            }
        }

        .project-info h3 {
            color: #ffffff;
            margin-bottom: 15px;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .project-info p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .project-features {
            margin-bottom: 30px;
        }

        .project-features h4 {
            color: #ffffff;
            margin-bottom: 15px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .project-features ul {
            list-style: none;
            padding: 0;
        }

        .project-features li {
            color: rgba(255, 255, 255, 0.8);
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .project-features li:last-child {
            border-bottom: none;
        }

        .project-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .action-btn {
            display: inline-flex;
            align-items: center;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .action-btn.primary {
            background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
            color: #000000;
            border-color: rgba(255, 255, 255, 0.2);
        }

        .action-btn.primary:hover {
            background: linear-gradient(135deg, #f0f0f0 0%, #d0d0d0 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.2);
        }

        .action-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border-color: rgba(255, 255, 255, 0.2);
        }

        .action-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .project-preview {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
        }

        .preview-placeholder {
            background: rgba(255, 255, 255, 0.05);
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            width: 100%;
            height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .preview-icon {
            font-size: 3rem;
            margin-bottom: 10px;
            opacity: 0.7;
        }

        .preview-placeholder p {
            color: rgba(255, 255, 255, 0.6);
            margin: 0;
            font-size: 0.9rem;
        }

        /* Gallery Styles */
        .gallery-controls-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            gap: 20px;
            flex-wrap: wrap;
        }

        .gallery-left-controls, .gallery-right-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .gallery-search-input {
            padding: 10px 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            font-size: 0.9rem;
            width: 250px;
            transition: all 0.3s ease;
        }

        .gallery-search-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.15);
        }

        .gallery-search-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .gallery-filter-select {
            padding: 8px 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .gallery-filter-select:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.5);
        }

        .gallery-view-controls, .gallery-size-controls {
            display: flex;
            gap: 5px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 3px;
            background: rgba(255, 255, 255, 0.05);
        }

        .gallery-view-btn, .gallery-size-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 20px;
            background: transparent;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            min-width: 35px;
        }

        .gallery-view-btn:hover, .gallery-size-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        .gallery-view-btn.active, .gallery-size-btn.active {
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
        }

        .gallery-stats {
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        .gallery-loading {
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.6);
        }

        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Gallery Container Layouts */
        .gallery-container {
            margin-bottom: 30px;
        }

        /* Grid View */
        .gallery-container.grid-view {
            display: grid;
            gap: 15px;
        }

        .gallery-container.grid-view.small {
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        }

        .gallery-container.grid-view.medium {
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        }

        .gallery-container.grid-view.large {
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        }

        /* List View */
        .gallery-container.list-view {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Masonry View */
        .gallery-container.masonry-view {
            column-count: 3;
            column-gap: 15px;
        }

        .gallery-container.masonry-view.small {
            column-count: 5;
        }

        .gallery-container.masonry-view.large {
            column-count: 2;
        }

        @media (max-width: 768px) {
            .gallery-container.masonry-view {
                column-count: 2;
            }
            .gallery-container.masonry-view.small {
                column-count: 3;
            }
        }

        /* Gallery Items */
        .gallery-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .gallery-item.masonry {
            break-inside: avoid;
            margin-bottom: 15px;
        }

        .gallery-item.list {
            display: flex;
            align-items: center;
            padding: 15px;
        }

        .gallery-item img {
            width: 100%;
            height: auto;
            display: block;
            transition: all 0.3s ease;
        }

        .gallery-item.grid img {
            aspect-ratio: 1;
            object-fit: cover;
        }

        .gallery-item.list img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 10px;
            margin-right: 15px;
        }

        .gallery-item-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            color: #ffffff;
            padding: 20px 15px 15px;
            transform: translateY(100%);
            transition: all 0.3s ease;
        }

        .gallery-item:hover .gallery-item-info {
            transform: translateY(0);
        }

        .gallery-item.list .gallery-item-info {
            position: static;
            background: none;
            transform: none;
            padding: 0;
            flex: 1;
        }

        .gallery-item-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 5px;
            word-break: break-all;
        }

        .gallery-item.list .gallery-item-name {
            color: #ffffff;
            margin-bottom: 8px;
        }

        .gallery-item-details {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .gallery-item.list .gallery-item-details {
            color: rgba(255, 255, 255, 0.7);
        }

        /* Gallery Pagination */
        .gallery-pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 30px;
        }

        .gallery-page-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .gallery-page-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .gallery-page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .gallery-page-info {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        /* Image Modal */
        .image-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .modal-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .modal-close {
            position: absolute;
            top: -50px;
            right: 0;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: #ffffff;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10001;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .modal-navigation {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            display: flex;
            justify-content: space-between;
            pointer-events: none;
            z-index: 10001;
        }

        .modal-nav-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            color: #ffffff;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            pointer-events: all;
        }

        .modal-nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        #modalImage {
            max-width: 100%;
            max-height: 70vh;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .modal-info {
            margin-top: 20px;
            text-align: center;
            color: #ffffff;
            max-width: 100%;
        }

        .modal-filename {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 10px;
            word-break: break-all;
        }

        .modal-details {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Responsive Gallery Controls */
        @media (max-width: 768px) {
            .gallery-controls-bar {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }

            .gallery-left-controls, .gallery-right-controls {
                justify-content: center;
                flex-wrap: wrap;
            }

            .gallery-search-input {
                width: 100%;
                min-width: 200px;
            }

            .gallery-container.grid-view.small {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }

            .gallery-container.grid-view.medium {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .gallery-container.grid-view.large {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .modal-nav-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .modal-close {
                top: -40px;
                width: 35px;
                height: 35px;
                font-size: 1.2rem;
            }
        }

        /* Accessibility */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Gallery Folder Selection Styles */
        .gallery-folder-prompt {
            text-align: center;
            padding: 60px 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 2px dashed rgba(255, 255, 255, 0.2);
        }

        .prompt-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.8;
        }

        .gallery-folder-prompt h3 {
            color: #ffffff;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .gallery-folder-prompt p {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .folder-path {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        .prompt-features {
            margin-top: 40px;
            text-align: left;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .prompt-features h4 {
            color: #ffffff;
            margin-bottom: 15px;
        }

        .prompt-features ul {
            list-style: none;
            padding: 0;
        }

        .prompt-features li {
            color: rgba(255, 255, 255, 0.8);
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .prompt-features li::before {
            content: "• ";
            color: rgba(255, 255, 255, 0.6);
            margin-right: 8px;
        }

        .code-block {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        details {
            margin-top: 15px;
        }

        summary {
            cursor: pointer;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            padding: 8px 0;
        }

        summary:hover {
            color: #ffffff;
        }

        .gallery-folder-input {
            display: flex;
            align-items: center;
        }

        .gallery-empty {
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.6);
        }

        .gallery-empty .placeholder-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.7;
        }

        .gallery-empty p {
            margin: 10px 0;
            font-size: 1.1rem;
        }

        /* Clock Styles */
        .clock-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .clock-widget {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
        }

        .digital-clock {
            font-size: 3rem;
            font-weight: 700;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .clock-label {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: rgba(255, 255, 255, 0.8);
        }

        .timer-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .clock-btn {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clock-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .clock-btn.active {
            background: #ffffff;
            color: #000000;
        }

        /* Recipe Styles */
        .recipe-grid, .quotes-grid, .contacts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .recipe-card, .quote-card, .contact-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            backdrop-filter: blur(20px);
        }

        .recipe-card:hover, .quote-card:hover, .contact-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        .recipe-title, .contact-name {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .recipe-meta, .contact-info {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 15px;
        }

        .ingredients, .instructions {
            margin-top: 15px;
        }

        .ingredients h4, .instructions h4 {
            color: #ffffff;
            margin-bottom: 10px;
        }

        .ingredients ul, .instructions ol {
            margin-left: 20px;
            line-height: 1.6;
        }

        .quote-text {
            font-size: 1.1rem;
            font-style: italic;
            line-height: 1.6;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .quote-author {
            text-align: right;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.8);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #ffffff;
            font-weight: 500;
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* Chat Styles */
        .chat-container {
            height: 600px;
            display: flex;
            flex-direction: column;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 80%;
            padding: 15px 20px;
            border-radius: 20px;
            line-height: 1.5;
        }

        .message.user {
            align-self: flex-end;
            background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
            color: #000000;
        }

        .message.assistant {
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chat-input-container {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            outline: none;
            resize: none;
            font-family: inherit;
        }

        /* Scrollbar styling */
        .tasks-container::-webkit-scrollbar,
        .chat-messages::-webkit-scrollbar,
        .sidebar-nav::-webkit-scrollbar {
            width: 8px;
        }

        .tasks-container::-webkit-scrollbar-track,
        .chat-messages::-webkit-scrollbar-track,
        .sidebar-nav::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .tasks-container::-webkit-scrollbar-thumb,
        .chat-messages::-webkit-scrollbar-thumb,
        .sidebar-nav::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        .tasks-container::-webkit-scrollbar-thumb:hover,
        .chat-messages::-webkit-scrollbar-thumb:hover,
        .sidebar-nav::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        /* Loading spinner */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #ffffff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Crypto Styles */
        .crypto-grid, .prompts-grid, .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .crypto-card, .prompt-card, .project-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            backdrop-filter: blur(20px);
        }

        .crypto-card:hover, .prompt-card:hover, .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        .crypto-name, .prompt-title, .project-name {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .crypto-symbol {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 10px;
        }

        .crypto-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 10px;
        }

        .crypto-change {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .crypto-change.positive {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
        }

        .crypto-change.negative {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
        }

        .prompt-text, .project-description {
            font-size: 0.95rem;
            line-height: 1.5;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 4;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .prompt-actions, .project-actions {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 15px;
        }

        .copy-btn {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .copy-btn:hover {
            background: rgba(76, 175, 80, 0.3);
        }

        .edit-btn {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
            border: 1px solid rgba(255, 193, 7, 0.3);
        }

        .edit-btn:hover {
            background: rgba(255, 193, 7, 0.3);
        }

        .project-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .project-status, .project-priority {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .project-status.planning {
            background: rgba(156, 39, 176, 0.2);
            color: #9c27b0;
        }

        .project-status.in-progress {
            background: rgba(33, 150, 243, 0.2);
            color: #2196f3;
        }

        .project-status.on-hold {
            background: rgba(255, 152, 0, 0.2);
            color: #ff9800;
        }

        .project-status.completed {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
        }

        .project-status.cancelled {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
        }

        .project-priority.low {
            background: rgba(158, 158, 158, 0.2);
            color: #9e9e9e;
        }

        .project-priority.medium {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }

        .project-priority.high {
            background: rgba(255, 152, 0, 0.2);
            color: #ff9800;
        }

        .project-priority.critical {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
        }

        .project-progress {
            margin: 15px 0;
        }

        .project-progress-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 5px;
        }

        .project-progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .project-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50 0%, #8bc34a 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .project-due-date {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 10px;
        }

        .project-due-date.overdue {
            color: #f44336;
        }

        .project-due-date.due-soon {
            color: #ff9800;
        }

        /* Toast notifications */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(76, 175, 80, 0.3);
            z-index: 1002;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.error {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            box-shadow: 0 4px 20px rgba(244, 67, 54, 0.3);
        }

        /* Text Selection Tooltip */
        .selection-tooltip {
            position: absolute;
            background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
            color: #000000;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            z-index: 10000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.2s ease;
        }

        .selection-tooltip:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
        }

        .selection-tooltip::before {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #ffffff;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
            color: #000000;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 500;
            z-index: 10001;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        /* Note Card Styles */
        .note-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            backdrop-filter: blur(20px);
            margin-bottom: 15px;
        }

        .note-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        .note-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .note-meta {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 12px;
        }

        .note-content {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.5;
            margin-bottom: 15px;
            word-wrap: break-word;
        }

        .note-actions {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        /* Chat Styles */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 600px;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 15px;
            word-wrap: break-word;
        }

        .message.user {
            align-self: flex-end;
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
        }

        .message.assistant {
            align-self: flex-start;
            background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.1) 100%);
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .message.loading-message {
            opacity: 0.7;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 0.3; }
        }

        .chat-input-container {
            display: flex;
            padding: 20px;
            gap: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chat-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 12px 20px;
            color: #ffffff;
            font-size: 14px;
            resize: none;
            min-height: 20px;
            max-height: 100px;
        }

        .chat-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.15);
        }

        .chat-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .send-btn {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
        }

        /* Word Processor Styles */
        .word-container {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 100px);
            background: #f8f9fa;
            border-radius: 10px;
            overflow: hidden;
        }

        .word-toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 10px;
            background: linear-gradient(135deg, #ffffff 0%, #f1f3f4 100%);
            border-bottom: 2px solid #e0e0e0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .toolbar-section {
            display: flex;
            gap: 5px;
            align-items: center;
            padding: 0 10px;
            border-right: 1px solid #d0d0d0;
        }

        .toolbar-section:last-child {
            border-right: none;
        }

        .toolbar-btn {
            background: #ffffff;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            font-weight: bold;
            color: #333;
            transition: all 0.2s ease;
            font-size: 14px;
        }

        .toolbar-btn:hover {
            background: #e8f4fd;
            border-color: #0078d4;
            color: #0078d4;
        }

        .toolbar-btn.active {
            background: #0078d4;
            color: white;
            border-color: #106ebe;
        }

        .toolbar-select {
            padding: 6px 10px;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            background: white;
            color: #333;
            font-size: 14px;
            cursor: pointer;
        }

        .toolbar-select:focus {
            outline: none;
            border-color: #0078d4;
            box-shadow: 0 0 0 2px rgba(0, 120, 212, 0.25);
        }

        .color-picker {
            width: 40px;
            height: 30px;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            cursor: pointer;
            background: none;
        }

        .word-status {
            display: flex;
            gap: 20px;
            padding: 8px 15px;
            background: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
            font-size: 12px;
            color: #666;
        }

        .word-editor-container {
            flex: 1;
            background: #ffffff;
            overflow: auto;
            padding: 20px;
        }

        .word-document {
            min-height: 100%;
            max-width: 8.5in;
            margin: 0 auto;
            padding: 1in;
            background: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 5px;
            font-family: Calibri, Arial, sans-serif;
            font-size: 11pt;
            line-height: 1.5;
            color: #333;
            outline: none;
        }

        .word-document p {
            margin: 0 0 10px 0;
        }

        .word-document:focus {
            box-shadow: 0 0 0 2px rgba(0, 120, 212, 0.25);
        }

        /* Image Generator Styles */
        .image-generator-container {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .generation-controls {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .control-row {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .control-group {
            flex: 1;
            min-width: 200px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #333;
        }

        .control-group textarea,
        .control-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .control-group textarea:focus,
        .control-group select:focus {
            outline: none;
            border-color: #007bff;
        }

        .control-group select option,
        select option {
            background: #2a2a2a;
            color: #000000;
            padding: 8px;
        }

        .generate-btn, .clear-btn, .download-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .generate-btn {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
        }

        .clear-btn {
            background: linear-gradient(135deg, #dc3545 0%, #bd2130 100%);
            color: white;
        }

        .download-btn {
            background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
            color: white;
        }

        .generate-btn:hover, .clear-btn:hover, .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .generation-status {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .no-images {
            grid-column: 1 / -1;
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .image-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .image-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .image-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .image-card-info {
            padding: 15px;
        }

        .image-download {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s ease;
        }

        .image-download:hover {
            background: #0056b3;
        }

        /* Calculator Styles */
        .calculator-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .calc-display {
            background: #1a1a1a;
            color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: right;
        }

        .calc-history {
            font-size: 14px;
            color: #888;
            min-height: 20px;
            margin-bottom: 10px;
        }

        .calc-current {
            font-size: 32px;
            font-weight: bold;
            word-break: break-all;
        }

        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .calc-row {
            display: contents;
        }

        .calc-btn {
            height: 60px;
            border: none;
            border-radius: 10px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .calc-btn:hover {
            transform: scale(1.05);
        }

        .calc-btn:active {
            transform: scale(0.95);
        }

        .num-btn {
            background: #f8f9fa;
            color: #333;
        }

        .op-btn {
            background: #007bff;
            color: white;
        }

        .func-btn {
            background: #6c757d;
            color: white;
        }

        .equals-btn {
            background: #28a745;
            color: white;
        }

        .special-btn {
            background: #17a2b8;
            color: white;
        }

        .calc-extras {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .calc-memory, .calc-saved {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .calc-memory h3, .calc-saved h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .memory-buttons {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .mem-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            background: #6c757d;
            color: white;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s ease;
        }

        .mem-btn:hover {
            background: #5a6268;
        }

        .memory-value {
            font-size: 14px;
            color: #666;
        }

        .saved-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .save-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .save-btn:first-child {
            background: #28a745;
            color: white;
        }

        .save-btn:last-child {
            background: #dc3545;
            color: white;
        }

        .save-btn:hover {
            transform: translateY(-1px);
        }

        .saved-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .saved-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .saved-item:hover {
            background: #e9ecef;
        }

        .no-saved {
            text-align: center;
            color: #666;
            font-style: italic;
        }

        /* Prompt Generator Styles */
        .prompt-generator-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .prompt-input-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .prompt-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
            backdrop-filter: blur(10px);
        }

        .prompt-card h3 {
            margin: 0 0 20px 0;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
        }

        .prompt-input {
            width: 100%;
            min-height: 120px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            padding: 15px;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
        }

        .prompt-input:focus {
            outline: none;
            border-color: #4fc3f7;
            box-shadow: 0 0 0 2px rgba(79, 195, 247, 0.3);
        }

        .prompt-settings {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        .setting-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .setting-group label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 13px;
            font-weight: 500;
        }

        .setting-group select {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: #fff;
            padding: 8px 12px;
            font-family: inherit;
        }

        .generation-controls {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .generate-prompt-btn {
            flex: 1;
            background: linear-gradient(135deg, #4fc3f7, #29b6f6);
            border: none;
            border-radius: 8px;
            color: white;
            padding: 12px 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .generate-prompt-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 195, 247, 0.4);
        }

        .clear-prompt-btn, .save-prompt-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            padding: 12px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clear-prompt-btn:hover, .save-prompt-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .prompt-output-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .output-card, .analysis-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
            backdrop-filter: blur(10px);
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .output-header h3 {
            margin: 0;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .output-actions {
            display: flex;
            gap: 8px;
        }

        .copy-btn, .regenerate-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: #fff;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .copy-btn:hover, .regenerate-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .enhanced-prompt-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            min-height: 100px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .placeholder-text {
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            font-style: italic;
        }

        .enhanced-prompt-text {
            color: #fff;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .analysis-content {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }

        .analysis-placeholder {
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            font-style: italic;
        }

        .saved-prompts-section {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        .saved-prompts-card, .templates-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
            backdrop-filter: blur(10px);
        }

        .saved-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .saved-header h3, .templates-card h3 {
            margin: 0;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .clear-saved-btn {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.3);
            border-radius: 6px;
            color: #f44336;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clear-saved-btn:hover {
            background: rgba(244, 67, 54, 0.3);
        }

        .no-saved-prompts {
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            font-style: italic;
            padding: 40px;
        }

        .saved-prompt-item {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .saved-prompt-item:hover {
            background: rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .saved-prompt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .saved-prompt-title {
            font-weight: 600;
            color: #fff;
        }

        .saved-prompt-date {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
        }

        .saved-prompt-preview {
            color: rgba(255, 255, 255, 0.7);
            font-size: 13px;
            line-height: 1.4;
            max-height: 60px;
            overflow: hidden;
        }

        .template-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .template-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 13px;
        }

        .template-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .prompt-loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 30px;
            border-radius: 12px;
            color: #fff;
            text-align: center;
            z-index: 10000;
            backdrop-filter: blur(10px);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #4fc3f7;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Habit Tracker Styles */
        .habit-tracker-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .habit-management-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .habit-card, .active-habits-card, .tracking-card, .stats-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
            backdrop-filter: blur(10px);
        }

        .habit-card h3, .active-habits-card h3, .tracking-card h3, .stats-card h3 {
            margin: 0 0 20px 0;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
        }

        .habit-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .habit-input, .habit-select, .habit-textarea {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            padding: 12px 15px;
            font-family: inherit;
            font-size: 14px;
        }

        .habit-input:focus, .habit-select:focus, .habit-textarea:focus {
            outline: none;
            border-color: #4fc3f7;
            box-shadow: 0 0 0 2px rgba(79, 195, 247, 0.3);
        }

        .habit-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .target-input-section {
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 100px; }
        }

        .habit-colors {
            display: flex;
            align-items: center;
            gap: 15px;
            color: rgba(255, 255, 255, 0.8);
        }

        .color-options {
            display: flex;
            gap: 8px;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .color-option:hover, .color-option.active {
            border-color: #fff;
            transform: scale(1.1);
        }

        .habit-controls {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .add-habit-btn {
            flex: 1;
            background: linear-gradient(135deg, #4fc3f7, #29b6f6);
            border: none;
            border-radius: 8px;
            color: white;
            padding: 12px 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .add-habit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 195, 247, 0.4);
        }

        .clear-habit-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            padding: 12px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clear-habit-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .habits-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .filter-select {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: #fff;
            padding: 8px 12px;
            font-family: inherit;
            font-size: 12px;
        }

        .habits-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .habit-item {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid var(--habit-color, #66bb6a);
            transition: all 0.3s ease;
        }

        .habit-item:hover {
            background: rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .habit-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .habit-name {
            font-weight: 600;
            color: #fff;
            font-size: 16px;
        }

        .habit-streak {
            background: var(--habit-color, #66bb6a);
            color: #000;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .habit-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
        }

        .habit-category-badge {
            background: rgba(255, 255, 255, 0.1);
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 11px;
        }

        .habit-actions {
            display: flex;
            gap: 5px;
        }

        .habit-action-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            color: #fff;
            padding: 4px 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 11px;
        }

        .habit-action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .no-habits {
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            font-style: italic;
            padding: 40px 20px;
        }

        .tracking-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .tracking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .month-navigation {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: #fff;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .calendar-container {
            margin-bottom: 20px;
        }

        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            margin-bottom: 5px;
        }

        .weekday {
            text-align: center;
            padding: 8px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.8);
            font-size: 12px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            min-height: 40px;
        }

        .calendar-day:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .calendar-day.today {
            background: rgba(79, 195, 247, 0.3);
            border-color: #4fc3f7;
        }

        .calendar-day.selected {
            background: rgba(79, 195, 247, 0.5);
            border-color: #4fc3f7;
        }

        .calendar-day.other-month {
            opacity: 0.3;
        }

        .day-number {
            font-size: 12px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 2px;
        }

        .day-habits-indicator {
            display: flex;
            flex-wrap: wrap;
            gap: 1px;
            justify-content: center;
        }

        .habit-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--habit-color, #66bb6a);
        }

        .habit-dot.completed {
            opacity: 1;
        }

        .habit-dot.incomplete {
            opacity: 0.3;
        }

        .selected-day-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .panel-header h4 {
            margin: 0;
            color: #fff;
            font-size: 16px;
        }

        .close-panel-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            color: #fff;
            padding: 5px 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .day-habit-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            border-left: 3px solid var(--habit-color, #66bb6a);
        }

        .day-habit-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .day-habit-name {
            color: #fff;
            font-weight: 500;
        }

        .day-habit-target {
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
        }

        .habit-complete-btn {
            background: var(--habit-color, #66bb6a);
            border: none;
            border-radius: 4px;
            color: #000;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .habit-complete-btn.completed {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
        }

        .habit-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: #4fc3f7;
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .achievements-section h4 {
            margin: 0 0 15px 0;
            color: #fff;
            font-size: 16px;
        }

        .achievement-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .achievement-icon {
            font-size: 20px;
        }

        .achievement-text {
            color: #fff;
            font-size: 13px;
        }

        .no-achievements {
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            font-style: italic;
            padding: 20px;
        }

        /* Habit Timer Modal */
        .habit-timer-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(10px);
        }

        .habit-timer-content {
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            min-width: 350px;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .habit-timer-header {
            margin-bottom: 30px;
        }

        .habit-timer-header h3 {
            color: #fff;
            margin: 0 0 10px 0;
            font-size: 24px;
        }

        .habit-timer-header p {
            color: rgba(255, 255, 255, 0.7);
            margin: 0;
            font-size: 14px;
        }

        .habit-timer-display {
            font-size: 48px;
            font-weight: bold;
            color: #4fc3f7;
            font-family: 'Courier New', monospace;
            margin: 30px 0;
            text-shadow: 0 0 20px rgba(79, 195, 247, 0.3);
        }

        .habit-timer-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .habit-timer-controls button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .habit-timer-controls .primary-btn {
            background: linear-gradient(135deg, #66bb6a, #4caf50);
            color: white;
        }

        .habit-timer-controls .primary-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 187, 106, 0.4);
        }

        .habit-timer-controls .secondary-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
        }

        .habit-timer-controls .secondary-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Stock Tracker Styles */
        .retro-stock-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            padding: 20px;
        }

        .stock-section h2 {
            color: #ffffff;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            font-size: 1.5rem;
        }

        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stock-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .item-name {
            color: #ffffff;
            font-weight: 600;
            font-size: 1rem;
        }

        .item-code {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .stock-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            flex: 1;
            min-width: 100px;
        }

        .control-label {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.85rem;
            font-weight: 600;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 2px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .control-buttons {
            display: flex;
            gap: 6px;
        }

        .stock-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
            width: 42px;
            height: 42px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            transition: all 0.2s ease;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            user-select: none;
        }

        .row-btn {
            background: rgba(33, 150, 243, 0.2);
            border-color: rgba(33, 150, 243, 0.4);
        }

        .row-btn:hover {
            background: rgba(33, 150, 243, 0.3);
            border-color: rgba(33, 150, 243, 0.5);
        }

        .unit-btn {
            background: rgba(156, 39, 176, 0.2);
            border-color: rgba(156, 39, 176, 0.4);
        }

        .unit-btn:hover {
            background: rgba(156, 39, 176, 0.3);
            border-color: rgba(156, 39, 176, 0.5);
        }

        .stock-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .stock-btn.increase {
            background: rgba(76, 175, 80, 0.2);
            border-color: rgba(76, 175, 80, 0.4);
        }

        .stock-btn.increase:hover {
            background: rgba(76, 175, 80, 0.3);
            border-color: rgba(76, 175, 80, 0.5);
        }

        .stock-btn.decrease {
            background: rgba(244, 67, 54, 0.2);
            border-color: rgba(244, 67, 54, 0.4);
        }

        .stock-btn.decrease:hover {
            background: rgba(244, 67, 54, 0.3);
            border-color: rgba(244, 67, 54, 0.5);
        }

        .stock-count {
            color: #ffffff;
            font-size: 28px;
            font-weight: bold;
            min-width: 80px;
            text-align: center;
            padding: 12px 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
            flex: 0 0 auto;
        }

        .stock-target {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
            font-weight: 500;
            margin-top: 8px;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .target-input {
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 6px 10px;
            color: #ffffff;
            width: 70px;
            text-align: center;
            font-size: 0.95rem;
            font-weight: 500;
        }

        .target-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
        }

        .stock-summary {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
        }

        .stock-summary h2 {
            color: #ffffff;
            margin-bottom: 20px;
            border: none;
            padding: 0;
        }

        .summary-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .summary-item {
            display: flex;
            align-items: center;
            gap: 15px;
            color: #ffffff;
            font-size: 1.1rem;
        }

        .summary-item span:last-child {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: bold;
            min-width: 50px;
            text-align: center;
        }

        .summary-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .action-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .stock-list-output {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }

        .stock-list-output h3 {
            color: #ffffff;
            margin-bottom: 15px;
            text-align: center;
        }

        .stock-list-content pre {
            color: #ffffff;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin: 0 0 15px 0;
            white-space: pre-wrap;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.5;
        }

        .copy-btn {
            background: rgba(33, 150, 243, 0.2);
            border: 1px solid rgba(33, 150, 243, 0.4);
            color: #ffffff;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .copy-btn:hover {
            background: rgba(33, 150, 243, 0.3);
            border-color: rgba(33, 150, 243, 0.5);
        }

        /* Gemini Image Generator Styles */
        .gemini-image-generator {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .generator-controls {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .control-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .control-section h3 {
            color: #ffffff;
            margin: 0;
            font-size: 1.2rem;
        }

        .prompt-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .prompt-input {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #ffffff;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .prompt-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
        }

        .prompt-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .suggestion-tag {
            background: rgba(33, 150, 243, 0.2);
            border: 1px solid rgba(33, 150, 243, 0.4);
            color: #ffffff;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
        }

        .suggestion-tag:hover {
            background: rgba(33, 150, 243, 0.3);
            border-color: rgba(33, 150, 243, 0.6);
            transform: translateY(-1px);
        }

        .control-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .control-group label {
            display: block;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
        }

        .style-select, .quality-select, .count-select {
            width: 100%;
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #ffffff;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .style-select:focus, .quality-select:focus, .count-select:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.15);
        }

        .advanced-controls {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
        }

        .advanced-controls h4 {
            color: #ffffff;
            margin: 0 0 15px 0;
            font-size: 1rem;
        }

        .generation-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        .primary-btn, .secondary-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .primary-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .primary-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .secondary-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
        }

        .secondary-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .generation-progress {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 25px;
            text-align: center;
        }

        .progress-info h4 {
            color: #ffffff;
            margin: 0 0 10px 0;
        }

        .progress-info p {
            color: rgba(255, 255, 255, 0.7);
            margin: 0 0 20px 0;
        }

        .progress-bar-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .progress-bar {
            flex: 1;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-percentage {
            color: #ffffff;
            font-weight: bold;
            min-width: 40px;
        }

        .results-section {
            margin-top: 30px;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .results-header h3 {
            color: #ffffff;
            margin: 0;
        }

        .results-actions {
            display: flex;
            gap: 10px;
        }

        .clear-btn, .download-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .clear-btn {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.4);
            color: #ffffff;
        }

        .clear-btn:hover {
            background: rgba(244, 67, 54, 0.3);
            border-color: rgba(244, 67, 54, 0.6);
        }

        .download-btn {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.4);
            color: #ffffff;
        }

        .download-btn:hover {
            background: rgba(76, 175, 80, 0.3);
            border-color: rgba(76, 175, 80, 0.6);
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .image-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .image-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .image-container {
            position: relative;
            aspect-ratio: 1;
            overflow: hidden;
        }

        .image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .image-container:hover img {
            transform: scale(1.05);
        }

        .image-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .image-item:hover .image-overlay {
            opacity: 1;
        }

        .image-action-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-action-btn:hover {
            background: #ffffff;
            transform: scale(1.1);
        }

        .image-info {
            padding: 15px;
        }

        .image-prompt {
            color: #ffffff;
            font-size: 13px;
            margin: 0 0 10px 0;
            line-height: 1.4;
        }

        .image-meta {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .meta-tag {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            text-transform: uppercase;
            font-weight: 500;
        }

        .no-images-placeholder {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.6);
        }

        .placeholder-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .enhanced-prompt-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .enhanced-prompt-section h4 {
            color: #ffffff;
            margin: 0 0 15px 0;
        }

        .enhanced-prompt-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.5;
        }

        .enhanced-prompt-display p {
            margin: 0 0 10px 0;
        }

        .enhanced-prompt-display p:last-child {
            margin: 0;
        }

        .prompt-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* All Images Gallery Styles */
        .all-images-gallery {
            margin-top: 40px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
        }

        .gallery-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .gallery-header h3 {
            color: #ffffff;
            margin: 0;
            font-size: 1.4rem;
        }

        .gallery-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .gallery-filter-select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #ffffff;
            padding: 8px 12px;
            font-size: 14px;
        }

        .gallery-filter-select:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.4);
        }

        .gallery-container {
            min-height: 200px;
        }

        .gallery-placeholder {
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.6);
        }

        .gallery-grid-view {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }

        .gallery-list-view {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .gallery-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
        }

        .gallery-item:hover {
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .gallery-item.grid-item {
            aspect-ratio: 1;
        }

        .gallery-item.list-item {
            display: flex;
            align-items: center;
            padding: 10px;
            gap: 15px;
        }

        .gallery-item.list-item img {
            width: 60px;
            height: 60px;
            border-radius: 8px;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-item-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            padding: 10px;
        }

        .gallery-item:hover .gallery-item-overlay {
            opacity: 1;
        }

        .gallery-item-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .gallery-action-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .gallery-action-btn:hover {
            background: #ffffff;
            transform: scale(1.1);
        }

        .gallery-item-prompt {
            color: #ffffff;
            font-size: 11px;
            text-align: center;
            max-width: 100px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: 8px;
        }

        .gallery-pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .page-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .page-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-info {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }

        /* Game Styles */
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
        }

        .game-wrapper {
            position: relative;
            background: linear-gradient(45deg, #000000 0%, #1a1a1a 50%, #000000 100%);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }

        .game-wrapper:fullscreen {
            border-radius: 0;
            padding: 0;
            border: none;
            background: #000000;
            box-shadow: none;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .game-wrapper:-webkit-full-screen {
            border-radius: 0;
            padding: 0;
            border: none;
            background: #000000;
            box-shadow: none;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .game-wrapper:-moz-full-screen {
            border-radius: 0;
            padding: 0;
            border: none;
            background: #000000;
            box-shadow: none;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #gameCanvas {
            display: block;
            border-radius: 10px;
            background: linear-gradient(135deg, #0a0a0a 0%, #1e1e1e 100%);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .game-wrapper:fullscreen #gameCanvas {
            border-radius: 0;
            border: none;
            background: #000000;
            width: 95vw !important;
            height: 95vh !important;
            max-width: 95vw;
            max-height: 95vh;
            cursor: none;
        }

        .game-wrapper:-webkit-full-screen #gameCanvas {
            border-radius: 0;
            border: none;
            background: #000000;
            width: 95vw !important;
            height: 95vh !important;
            cursor: none;
        }

        .game-wrapper:-moz-full-screen #gameCanvas {
            border-radius: 0;
            border: none;
            background: #000000;
            width: 95vw !important;
            height: 95vh !important;
            cursor: none;
        }

        .game-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
        }

        .game-wrapper:fullscreen .game-overlay {
            border-radius: 0;
            background: rgba(0, 0, 0, 0.95);
        }

        .game-wrapper:-webkit-full-screen .game-overlay {
            border-radius: 0;
            background: rgba(0, 0, 0, 0.95);
        }

        .game-wrapper:-moz-full-screen .game-overlay {
            border-radius: 0;
            background: rgba(0, 0, 0, 0.95);
        }

        .game-menu, .game-over-screen {
            text-align: center;
            color: #ffffff;
            padding: 30px 20px;
            max-width: 500px;
            width: 100%;
            box-sizing: border-box;
        }

        .game-menu h2, .game-over-screen h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #ffffff 0%, #cccccc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .controls-info {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 100%;
            box-sizing: border-box;
        }

        .controls-info h3 {
            margin-bottom: 15px;
            color: #ffffff;
        }

        .control-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-item {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .game-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            width: 100%;
            max-width: 400px;
            margin: 20px auto 0;
        }

        .game-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            width: 100%;
            max-width: 280px;
        }

        .game-btn.primary {
            background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
            color: #000000;
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.2);
        }

        .game-btn.primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 255, 255, 0.3);
        }

        .game-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .game-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .game-stats {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 800px;
        }

        .stat-group {
            display: flex;
            justify-content: space-around;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            display: block;
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .stat-value {
            display: block;
            font-size: 1.8rem;
            font-weight: bold;
            color: #ffffff;
        }

        .energy-bar {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .energy-label {
            font-size: 0.9rem;
            margin-bottom: 10px;
            color: #ffffff;
        }

        .energy-background {
            height: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            overflow: hidden;
        }

        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffaa00 0%, #ff4400 100%);
            border-radius: 6px;
            width: 100%;
            transition: width 0.2s ease;
        }

        .high-scores {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 800px;
        }

        .high-scores h3 {
            margin-bottom: 20px;
            text-align: center;
            color: #ffffff;
        }

        .scores-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .final-stats {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }

        .final-stats .stat {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 1.1rem;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
            }

            .main-content.shifted {
                margin-left: 0;
            }

            .content-area {
                padding: 70px 15px 20px;
            }

            .page-header h1 {
                font-size: 2rem;
            }

            .stats {
                gap: 20px;
            }
            
            .task-stats {
                gap: 20px;
            }

            .add-task-form {
                flex-direction: column;
            }

            .task-input {
                min-width: auto;
            }

            .clock-container,
            .recipe-grid,
            .quotes-grid,
            .contacts-grid,
            .crypto-grid,
            .prompts-grid,
            .projects-grid {
                grid-template-columns: 1fr;
            }

            .project-meta {
                flex-direction: column;
                align-items: flex-start;
            }
            .stock-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .stock-controls {
                flex-direction: column;
                gap: 15px;
                padding: 12px;
            }
            .control-group {
                min-width: auto;
                width: 100%;
                max-width: 200px;
                margin: 0 auto;
            }
            .stock-count {
                font-size: 24px;
                min-width: 70px;
                padding: 10px 16px;
            }
            .stock-btn {
                width: 38px;
                height: 38px;
            }
        }

        /* X-CLONE Styles */
        .x-clone-container {
            display: flex;
            height: 100%;
            min-height: calc(100vh - 40px);
            background-color: #000;
            color: #fff;
            overflow: hidden;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        /* X-CLONE Left Sidebar */
        .x-sidebar {
            width: 275px;
            background-color: #000;
            border-right: 1px solid #333;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .x-sidebar-header {
            padding: 0 24px 20px;
        }

        .x-logo {
            width: 28px;
            height: 28px;
            background-color: #fff;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #000;
            font-size: 18px;
        }

        .x-nav-menu {
            flex: 1;
            padding: 0 12px;
        }

        .x-nav-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            margin: 2px 0;
            border-radius: 24px;
            text-decoration: none;
            color: #fff;
            font-size: 20px;
            font-weight: 400;
            transition: background-color 0.2s;
            cursor: pointer;
        }

        .x-nav-item:hover {
            background-color: #1a1a1a;
        }

        .x-nav-item.active {
            background-color: #1d9bf0;
        }

        .x-nav-icon {
            width: 24px;
            height: 24px;
            margin-right: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .x-notification-badge {
            background-color: #1d9bf0;
            color: white;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 12px;
            margin-left: 8px;
            min-width: 18px;
            text-align: center;
        }

        .x-post-button {
            background-color: #1d9bf0;
            color: white;
            border: none;
            border-radius: 24px;
            padding: 14px 24px;
            font-size: 17px;
            font-weight: bold;
            cursor: pointer;
            margin: 20px 16px 16px;
            transition: background-color 0.2s;
        }

        .x-post-button:hover {
            background-color: #1a8cd8;
        }

        .x-user-profile {
            padding: 16px;
            display: flex;
            align-items: center;
            cursor: pointer;
            border-radius: 24px;
            margin: 0 12px;
            transition: background-color 0.2s;
        }

        .x-user-profile:hover {
            background-color: #1a1a1a;
        }

        .x-profile-image {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        }

        .x-user-info h4 {
            font-size: 15px;
            font-weight: 700;
            line-height: 1.2;
        }

        .x-user-info span {
            font-size: 15px;
            color: #71767b;
        }

        .x-more-button {
            margin-left: auto;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        /* X-CLONE Main Content */
        .x-main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow-y: auto;
        }

        .x-content-header {
            position: sticky;
            top: 0;
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid #333;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }

        .x-header-title {
            font-size: 24px;
            font-weight: bold;
        }

        /* X-CLONE Page Content Sections */
        .x-page-content {
            flex: 1;
            padding: 0;
            display: none;
            height: 100%;
            overflow-y: auto;
        }

        .x-page-content.active {
            display: flex;
            flex-direction: column;
        }

        /* X-CLONE Home Page Styles */
        .x-tweet-composer {
            background-color: #000;
            border-bottom: 1px solid #333;
            padding: 20px;
            flex-shrink: 0;
        }

        .x-composer-header {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .x-composer-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        }

        .x-composer-input {
            flex: 1;
        }

        .x-tweet-textarea {
            width: 100%;
            background: transparent;
            border: none;
            color: #fff;
            font-size: 20px;
            resize: none;
            outline: none;
            min-height: 120px;
            font-family: inherit;
        }

        .x-tweet-textarea::placeholder {
            color: #71767b;
        }

        .x-composer-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 16px;
            padding-left: 60px;
        }

        .x-composer-tools {
            display: flex;
            gap: 16px;
        }

        .x-tool-btn {
            background: none;
            border: none;
            color: #1d9bf0;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background-color 0.2s;
        }

        .x-tool-btn:hover {
            background-color: rgba(29, 155, 240, 0.1);
        }

        .x-tweet-btn {
            background-color: #1d9bf0;
            color: white;
            border: none;
            padding: 8px 24px;
            border-radius: 24px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .x-tweet-btn:hover {
            background-color: #1a8cd8;
        }

        /* X-CLONE Tweet Feed */
        .x-tweet-feed {
            max-width: 600px;
            flex: 1;
            padding: 0 20px 20px 20px;
        }

        .x-tweet {
            border-bottom: 1px solid #333;
            padding: 16px 20px;
            display: flex;
            gap: 12px;
            transition: background-color 0.2s;
        }

        .x-tweet:hover {
            background-color: rgba(255, 255, 255, 0.03);
        }

        .x-tweet-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        }

        .x-tweet-content {
            flex: 1;
        }

        .x-tweet-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .x-tweet-author {
            font-weight: bold;
            color: #fff;
        }

        .x-tweet-handle {
            color: #71767b;
        }

        .x-tweet-time {
            color: #71767b;
        }

        .x-tweet-text {
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .x-tweet-actions {
            display: flex;
            justify-content: space-between;
            max-width: 425px;
        }

        .x-action-btn {
            background: none;
            border: none;
            color: #71767b;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .x-action-btn:hover {
            background-color: rgba(29, 155, 240, 0.1);
            color: #1d9bf0;
        }

        /* X-CLONE Messages Page */
        .x-messages-container {
            display: flex;
            height: 100%;
            flex: 1;
        }

        .x-conversations-list {
            width: 350px;
            border-right: 1px solid #333;
            overflow-y: auto;
        }

        .x-conversation-item {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid #333;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .x-conversation-item:hover {
            background-color: rgba(255, 255, 255, 0.03);
        }

        .x-conversation-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            margin-right: 12px;
        }

        .x-conversation-info h4 {
            font-weight: bold;
            margin-bottom: 4px;
        }

        .x-conversation-preview {
            color: #71767b;
            font-size: 14px;
        }

        .x-chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .x-chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .x-message {
            margin-bottom: 16px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .x-message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        }

        .x-message-content {
            background-color: #1a1a1a;
            padding: 12px 16px;
            border-radius: 18px;
            max-width: 70%;
        }

        .x-message-input-container {
            padding: 20px;
            border-top: 1px solid #333;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .x-message-input {
            flex: 1;
            background-color: #1a1a1a;
            border: 1px solid #333;
            border-radius: 24px;
            padding: 12px 16px;
            color: #fff;
            outline: none;
        }

        .x-send-btn {
            background-color: #1d9bf0;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 24px;
            cursor: pointer;
        }

        /* X-CLONE Profile Page */
        .x-profile-header {
            position: relative;
            height: 200px;
            background: linear-gradient(45deg, #1d9bf0, #0066cc);
            margin-bottom: 80px;
        }

        .x-profile-info {
            position: absolute;
            bottom: -60px;
            left: 20px;
            display: flex;
            align-items: flex-end;
            gap: 16px;
        }

        .x-profile-image-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: 4px solid #000;
        }

        .x-profile-details h1 {
            font-size: 32px;
            margin-bottom: 4px;
        }

        .x-profile-details span {
            color: #71767b;
            font-size: 16px;
        }

        .x-profile-stats {
            display: flex;
            gap: 32px;
            padding: 20px;
            margin-top: 20px;
        }

        .x-stat {
            text-align: center;
        }

        .x-stat-number {
            font-size: 20px;
            font-weight: bold;
        }

        .x-stat-label {
            color: #71767b;
            font-size: 14px;
        }

        /* X-CLONE Explore Page */
        .x-trending-section {
            background-color: #1a1a1a;
            border-radius: 16px;
            margin: 20px;
            margin-bottom: 20px;
        }

        .x-trending-header {
            padding: 20px;
            border-bottom: 1px solid #333;
            font-size: 20px;
            font-weight: bold;
        }

        .x-trending-item {
            padding: 16px 20px;
            border-bottom: 1px solid #333;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .x-trending-item:hover {
            background-color: rgba(255, 255, 255, 0.03);
        }

        .x-trending-item:last-child {
            border-bottom: none;
        }

        .x-trending-location {
            color: #71767b;
            font-size: 14px;
        }

        .x-trending-topic {
            font-weight: bold;
            margin: 4px 0;
        }

        .x-trending-count {
            color: #71767b;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Toggle Button -->
        <button class="sidebar-toggle" id="sidebarToggle">☰</button>

        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>⚡ Ultimate Suite</h2>
                <div class="sidebar-subtitle">Complete Productivity Workspace</div>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-item active" data-page="tasks">
                    <span class="nav-icon">✅</span>
                    <span>Tasks</span>
                </div>
                <div class="nav-item" data-page="notes">
                    <span class="nav-icon">📝</span>
                    <span>Notes</span>
                </div>
                <div class="nav-item" data-page="bookmarks">
                    <span class="nav-icon">🔖</span>
                    <span>Bookmarks</span>
                </div>
                <div class="nav-item" data-page="documents">
                    <span class="nav-icon">📄</span>
                    <span>Documents</span>
                </div>
                <div class="nav-item" data-page="clock">
                    <span class="nav-icon">🕐</span>
                    <span>Clock & Timer</span>
                </div>
                <div class="nav-item" data-page="recipes">
                    <span class="nav-icon">🍳</span>
                    <span>Recipes</span>
                </div>
                <div class="nav-item" data-page="quotes">
                    <span class="nav-icon">💬</span>
                    <span>Quotes</span>
                </div>
                <div class="nav-item" data-page="contacts">
                    <span class="nav-icon">👥</span>
                    <span>Contacts</span>
                </div>
                <div class="nav-item" data-page="crypto">
                    <span class="nav-icon">💰</span>
                    <span>Crypto Prices</span>
                </div>
                <div class="nav-item" data-page="ai-prompts">
                    <span class="nav-icon">🤖</span>
                    <span>AI Prompts</span>
                </div>
                <div class="nav-item" data-page="projects">
                    <span class="nav-icon">🚀</span>
                    <span>Projects</span>
                </div>
                <div class="nav-item" data-page="claude-chat">
                    <span class="nav-icon">🧠</span>
                    <span>Claude AI</span>
                </div>
                <div class="nav-item" data-page="gemini-chat">
                    <span class="nav-icon">✨</span>
                    <span>Gemini AI</span>
                </div>
                <div class="nav-item" data-page="word">
                    <span class="nav-icon">📝</span>
                    <span>Word</span>
                </div>
                <div class="nav-item" data-page="image-generator">
                    <span class="nav-icon">🎨</span>
                    <span>AI Images</span>
                </div>
                <div class="nav-item" data-page="gemini-image-gen">
                    <span class="nav-icon">🤖</span>
                    <span>Gemini Images</span>
                </div>
                <div class="nav-item" data-page="calculator">
                    <span class="nav-icon">🧮</span>
                    <span>Calculator</span>
                </div>
                <div class="nav-item" data-page="prompt-generator">
                    <span class="nav-icon">✨</span>
                    <span>Prompt Gen</span>
                </div>
                <div class="nav-item" data-page="habit-tracker">
                    <span class="nav-icon">📈</span>
                    <span>Habit Tracker</span>
                </div>
                <div class="nav-item" data-page="retro">
                    <span class="nav-icon">🏪</span>
                    <span>Retro</span>
                </div>
                <div class="nav-item" data-page="games">
                    <span class="nav-icon">🎮</span>
                    <span>Games</span>
                </div>
                <div class="nav-item" data-page="ogworm">
                    <span class="nav-icon">🐛</span>
                    <span>OGWORM</span>
                </div>
                <div class="nav-item" data-page="gallery">
                    <span class="nav-icon">🖼️</span>
                    <span>Gallery</span>
                </div>
                <div class="nav-item" data-page="x-clone">
                    <span class="nav-icon">✖️</span>
                    <span>X-CLONE</span>
                </div>
                
                <!-- Project Portfolio Pages -->
                <div style="padding: 10px 20px; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 10px;">
                    <h4 style="color: rgba(255,255,255,0.7); font-size: 0.8rem; margin-bottom: 10px;">MY PROJECTS</h4>
                </div>
                
                <div class="nav-item" data-page="browser-fighting-game">
                    <span class="nav-icon">🥊</span>
                    <span>Fighting Game</span>
                </div>
                <div class="nav-item" data-page="gemini-image-gen-project">
                    <span class="nav-icon">🖼️</span>
                    <span>Gemini Images</span>
                </div>
                <div class="nav-item" data-page="marito">
                    <span class="nav-icon">🍄</span>
                    <span>Mario Game</span>
                </div>
                <div class="nav-item" data-page="pixel-pursuit">
                    <span class="nav-icon">🔍</span>
                    <span>Pixel Pursuit</span>
                </div>
                <div class="nav-item" data-page="smart-checklist">
                    <span class="nav-icon">📋</span>
                    <span>Smart Checklist</span>
                </div>
                <div class="nav-item" data-page="space-invaders">
                    <span class="nav-icon">👾</span>
                    <span>Space Invaders</span>
                </div>
                <div class="nav-item" data-page="worm1v1">
                    <span class="nav-icon">🐛</span>
                    <span>Worm 1v1</span>
                </div>
                <div class="nav-item" data-page="ogworm">
                    <span class="nav-icon">🎮</span>
                    <span>OGWORM</span>
                </div>
                <div class="nav-item" data-page="viral-veo-prompt">
                    <span class="nav-icon">📹</span>
                    <span>Viral Video Prompt</span>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            
            <!-- Tasks Page -->
            <div class="content-area active" id="tasks-page">
                <div class="page-header">
                    <h1>✅ Ultimate Task Manager</h1>
                    <p>Organize and track your daily tasks</p>
                </div>
                
                <div class="content-card">
                    <div class="task-stats">
                        <div class="stat">
                            <span class="stat-number" id="totalTasks">0</span>
                            <span class="stat-label">Total Tasks</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="completedTasks">0</span>
                            <span class="stat-label">Completed</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="remainingTasks">0</span>
                            <span class="stat-label">Remaining</span>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>

                    
                    <div class="category-tabs" id="categoryTabs">
                        <button class="tab active" data-category="all">All Tasks</button>
                    </div>

                    <div class="add-task-form">
                        <label for="taskInput" class="visually-hidden">Add new task</label>
                        <input type="text" class="task-input" id="taskInput" name="taskInput" placeholder="What needs to be done?" aria-label="Add new task">
                        <label for="categorySelect" class="visually-hidden">Task category</label>
                        <select class="category-select" id="categorySelect" name="categorySelect" aria-label="Task category">
                            <option value="personal">Personal</option>
                            <option value="work">Work</option>
                            <option value="shopping">Shopping</option>
                            <option value="health">Health</option>
                            <option value="learning">Learning</option>
                            <option value="generated">AI Generated</option>
                        </select>
                        <button class="add-btn" id="addBtn">Add Task</button>
                    </div>

                    <div class="filter-controls">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="pending">Pending</button>
                        <button class="filter-btn" data-filter="completed">Completed</button>
                        <button class="clear-completed" id="clearCompleted">Clear Completed</button>
                    </div>
                </div>
                
                <div class="content-card">
                    <div class="tasks-container" id="tasksContainer">
                        <div class="empty-state" id="emptyState">
                            <div style="font-size: 4rem; margin-bottom: 20px;">📝</div>
                            <h3>No tasks yet!</h3>
                            <p>Add your first task above to get started.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Clock & Timer Page -->
            <div class="content-area" id="clock-page">
                <div class="page-header">
                    <h1>🕐 Clock & Timer Hub</h1>
                    <p>World clocks, timers, and stopwatch</p>
                </div>
                
                <div class="clock-container">
                    <div class="clock-widget">
                        <div class="clock-label">Current Time</div>
                        <div class="digital-clock" id="currentTime">00:00:00</div>
                        <div id="currentDate"></div>
                    </div>

                    <div class="clock-widget">
                        <div class="clock-label">Melbourne Time</div>
                        <div class="digital-clock" id="melbourneTime">00:00:00</div>
                        <div id="melbourneDate"></div>
                    </div>

                    <div class="clock-widget">
                        <div class="clock-label">Timer</div>
                        <div class="digital-clock" id="timerDisplay">00:00:00</div>
                        <div class="timer-controls">
                            <input type="number" id="timerMinutes" placeholder="Minutes" min="0" max="999" style="width: 80px; padding: 8px; margin: 5px; border-radius: 5px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
                            <button class="clock-btn" id="startTimer">Start</button>
                            <button class="clock-btn" id="pauseTimer">Pause</button>
                            <button class="clock-btn" id="resetTimer">Reset</button>
                        </div>
                    </div>

                    <div class="clock-widget">
                        <div class="clock-label">Stopwatch</div>
                        <div class="digital-clock" id="stopwatchDisplay">00:00:00</div>
                        <div class="timer-controls">
                            <button class="clock-btn" id="startStopwatch">Start</button>
                            <button class="clock-btn" id="pauseStopwatch">Pause</button>
                            <button class="clock-btn" id="resetStopwatch">Reset</button>
                            <button class="clock-btn" id="lapStopwatch">Lap</button>
                        </div>
                        <div id="lapTimes"></div>
                    </div>
                </div>
            </div>

            <!-- Recipes Page -->
            <div class="content-area" id="recipes-page">
                <div class="page-header">
                    <h1>🍳 Recipe Collection</h1>
                    <p>Your personal cookbook</p>
                </div>
                
                <div class="content-card">
                    <h2>Add New Recipe</h2>
                    <div class="form-group">
                        <label class="form-label">Recipe Name</label>
                        <input type="text" class="form-input" id="recipeName" placeholder="Enter recipe name...">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Cuisine Type</label>
                        <select class="form-input" id="cuisineType">
                            <option value="italian">Italian</option>
                            <option value="asian">Asian</option>
                            <option value="mexican">Mexican</option>
                            <option value="american">American</option>
                            <option value="mediterranean">Mediterranean</option>
                            <option value="indian">Indian</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Cooking Time (minutes)</label>
                        <input type="number" class="form-input" id="cookingTime" placeholder="30">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Servings</label>
                        <input type="number" class="form-input" id="servings" placeholder="4">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ingredients (one per line)</label>
                        <textarea class="form-textarea" id="recipeIngredients" placeholder="1 cup flour
2 eggs
1/2 cup milk" rows="6"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Instructions (one step per line)</label>
                        <textarea class="form-textarea" id="recipeInstructions" placeholder="Preheat oven to 350°F
Mix dry ingredients
Add wet ingredients" rows="6"></textarea>
                    </div>
                    <button class="primary-btn" id="addRecipe">Add Recipe</button>
                </div>

                <div class="content-card">
                    <h2>Your Recipes</h2>
                    <div class="recipe-grid" id="recipeGrid">
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">🍽️</div>
                            <h3>No recipes yet!</h3>
                            <p>Add your first recipe above.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quotes Page -->
            <div class="content-area" id="quotes-page">
                <div class="page-header">
                    <h1>💬 Inspirational Quotes</h1>
                    <p>Wisdom and motivation for every day</p>
                </div>
                
                <div class="content-card">
                    <h2>Add New Quote</h2>
                    <div class="form-group">
                        <label class="form-label">Quote Text</label>
                        <textarea class="form-textarea" id="quoteText" placeholder="Enter the quote here..." rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Author</label>
                        <input type="text" class="form-input" id="quoteAuthor" placeholder="Quote author">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select class="form-input" id="quoteCategory">
                            <option value="motivation">Motivation</option>
                            <option value="wisdom">Wisdom</option>
                            <option value="success">Success</option>
                            <option value="life">Life</option>
                            <option value="happiness">Happiness</option>
                            <option value="love">Love</option>
                            <option value="inspirational">Inspirational</option>
                            <option value="funny">Funny</option>
                        </select>
                    </div>
                    <button class="primary-btn" id="addQuote">Add Quote</button>
                </div>

                <div class="content-card">
                    <h2>Quote Collection</h2>
                    <div class="quotes-grid" id="quotesGrid">
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">💭</div>
                            <h3>No quotes yet!</h3>
                            <p>Add your first inspirational quote above.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contacts Page -->
            <div class="content-area" id="contacts-page">
                <div class="page-header">
                    <h1>👥 Contact Manager</h1>
                    <p>Keep track of important people</p>
                </div>
                
                <div class="content-card">
                    <h2>Add New Contact</h2>
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-input" id="contactName" placeholder="Enter full name...">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="contactEmail" placeholder="email@example.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="form-input" id="contactPhone" placeholder="+1 (555) 123-4567">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company/Organization</label>
                        <input type="text" class="form-input" id="contactCompany" placeholder="Company name">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select class="form-input" id="contactCategory">
                            <option value="personal">Personal</option>
                            <option value="work">Work</option>
                            <option value="family">Family</option>
                            <option value="friends">Friends</option>
                            <option value="business">Business</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Notes</label>
                        <textarea class="form-textarea" id="contactNotes" placeholder="Additional notes about this contact..." rows="3"></textarea>
                    </div>
                    <button class="primary-btn" id="addContact">Add Contact</button>
                </div>

                <div class="content-card">
                    <h2>Your Contacts</h2>
                    <div class="contacts-grid" id="contactsGrid">
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">📇</div>
                            <h3>No contacts yet!</h3>
                            <p>Add your first contact above.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notes Page -->
            <div class="content-area" id="notes-page">
                <div class="page-header">
                    <h1>📝 Notes</h1>
                    <p>Your digital notepad</p>
                </div>
                
                <div class="content-card">
                    <h2>Add New Note</h2>
                    <div class="form-group">
                        <label class="form-label">Note Title</label>
                        <input type="text" class="form-input" id="noteTitle" placeholder="Enter note title...">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select class="form-input" id="noteCategory">
                            <option value="personal">Personal</option>
                            <option value="work">Work</option>
                            <option value="ideas">Ideas</option>
                            <option value="research">Research</option>
                            <option value="highlights">Chat Highlights</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Note Content</label>
                        <textarea class="form-textarea" id="noteContent" placeholder="Write your notes here..." rows="6"></textarea>
                    </div>
                    <button class="primary-btn" id="addNote">Save Note</button>
                </div>

                <div class="content-card">
                    <h2>Your Notes</h2>
                    <div class="filter-controls">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="personal">Personal</button>
                        <button class="filter-btn" data-filter="work">Work</button>
                        <button class="filter-btn" data-filter="ideas">Ideas</button>
                        <button class="filter-btn" data-filter="research">Research</button>
                        <button class="filter-btn" data-filter="highlights">Highlights</button>
                        <button class="filter-btn" data-filter="other">Other</button>
                    </div>
                    <div class="recipe-grid" id="notesGrid">
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">📝</div>
                            <h3>No notes yet!</h3>
                            <p>Add your first note above or highlight text from chat messages.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bookmarks Page -->
            <div class="content-area" id="bookmarks-page">
                <div class="page-header">
                    <h1>🔖 Bookmarks</h1>
                    <p>Save your favorite links</p>
                </div>
                <div class="content-card">
                    <h2>Add Bookmark</h2>
                    <div class="form-group">
                        <input type="text" class="form-input" placeholder="Bookmark title">
                    </div>
                    <div class="form-group">
                        <input type="url" class="form-input" placeholder="https://example.com">
                    </div>
                    <button class="primary-btn" onclick="alert('Bookmarks feature coming soon!')">Add Bookmark</button>
                </div>
            </div>

            <!-- Documents Page -->
            <div class="content-area" id="documents-page">
                <div class="page-header">
                    <h1>📄 Documents</h1>
                    <p>Manage your documents</p>
                </div>
                <div class="content-card">
                    <h2>Document Manager</h2>
                    <p>Document management features coming soon!</p>
                </div>
            </div>

            <!-- Crypto Page -->
            <div class="content-area" id="crypto-page">
                <div class="page-header">
                    <h1>💰 Crypto Prices</h1>
                    <p>Real-time cryptocurrency price tracking</p>
                </div>
                
                <div class="content-card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2>Popular Cryptocurrencies</h2>
                        <button class="primary-btn" id="refreshCrypto">🔄 Refresh Prices</button>
                    </div>
                    <div id="cryptoLoading" class="empty-state" style="display: none;">
                        <div class="loading"></div>
                        <p>Loading crypto prices...</p>
                    </div>
                    <div class="crypto-grid" id="cryptoGrid">
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">₿</div>
                            <h3>Loading crypto prices...</h3>
                            <p>Click refresh to load latest prices.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Prompts Page -->
            <div class="content-area" id="ai-prompts-page">
                <div class="page-header">
                    <h1>🤖 AI Prompts</h1>
                    <p>Your personal AI prompt library</p>
                </div>
                
                <div class="content-card">
                    <h2>Add New AI Prompt</h2>
                    <div class="form-group">
                        <label class="form-label">Prompt Title</label>
                        <input type="text" class="form-input" id="promptTitle" placeholder="Enter prompt title...">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select class="form-input" id="promptCategory">
                            <option value="writing">Writing</option>
                            <option value="coding">Coding</option>
                            <option value="creative">Creative</option>
                            <option value="analysis">Analysis</option>
                            <option value="business">Business</option>
                            <option value="research">Research</option>
                            <option value="education">Education</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Prompt Text</label>
                        <textarea class="form-textarea" id="promptText" placeholder="Enter your AI prompt here..." rows="6"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Description (Optional)</label>
                        <textarea class="form-textarea" id="promptDescription" placeholder="Describe what this prompt does..." rows="3"></textarea>
                    </div>
                    <button class="primary-btn" id="addPrompt">Add Prompt</button>
                </div>

                <div class="content-card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2>Prompt Library</h2>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="text" class="form-input" id="promptSearch" placeholder="Search prompts..." style="width: 200px;">
                            <select class="form-input" id="promptFilter" style="width: 120px;">
                                <option value="all">All Categories</option>
                                <option value="writing">Writing</option>
                                <option value="coding">Coding</option>
                                <option value="creative">Creative</option>
                                <option value="analysis">Analysis</option>
                                <option value="business">Business</option>
                                <option value="research">Research</option>
                                <option value="education">Education</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="prompts-grid" id="promptsGrid">
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">🤖</div>
                            <h3>No prompts yet!</h3>
                            <p>Add your first AI prompt above.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Projects Page -->
            <div class="content-area" id="projects-page">
                <div class="page-header">
                    <h1>🚀 Projects</h1>
                    <p>Manage and track your projects</p>
                </div>
                
                <div class="content-card">
                    <h2>Add New Project</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label class="form-label">Project Name</label>
                            <input type="text" class="form-input" id="projectName" placeholder="Enter project name...">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Category</label>
                            <select class="form-input" id="projectCategory">
                                <option value="web-dev">Web Development</option>
                                <option value="mobile-app">Mobile App</option>
                                <option value="design">Design</option>
                                <option value="marketing">Marketing</option>
                                <option value="business">Business</option>
                                <option value="personal">Personal</option>
                                <option value="research">Research</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Status</label>
                            <select class="form-input" id="projectStatus">
                                <option value="planning">Planning</option>
                                <option value="in-progress">In Progress</option>
                                <option value="on-hold">On Hold</option>
                                <option value="completed">Completed</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Priority</label>
                            <select class="form-input" id="projectPriority">
                                <option value="low">Low</option>
                                <option value="medium">Medium</option>
                                <option value="high">High</option>
                                <option value="critical">Critical</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Due Date</label>
                            <input type="date" class="form-input" id="projectDueDate">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Progress (%)</label>
                            <input type="range" class="form-input" id="projectProgress" min="0" max="100" value="0" style="margin-top: 10px;">
                            <div id="progressValue" style="text-align: center; margin-top: 5px; color: #ffffff;">0%</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea class="form-textarea" id="projectDescription" placeholder="Describe your project..." rows="4"></textarea>
                    </div>
                    <button class="primary-btn" id="addProject">Add Project</button>
                </div>

                <div class="content-card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2>Your Projects</h2>
                        <div style="display: flex; gap: 10px;">
                            <select class="form-input" id="projectStatusFilter" style="width: 140px;">
                                <option value="all">All Status</option>
                                <option value="planning">Planning</option>
                                <option value="in-progress">In Progress</option>
                                <option value="on-hold">On Hold</option>
                                <option value="completed">Completed</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                            <select class="form-input" id="projectPriorityFilter" style="width: 120px;">
                                <option value="all">All Priority</option>
                                <option value="critical">Critical</option>
                                <option value="high">High</option>
                                <option value="medium">Medium</option>
                                <option value="low">Low</option>
                            </select>
                        </div>
                    </div>
                    <div class="projects-grid" id="projectsGrid">
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">📋</div>
                            <h3>No projects yet!</h3>
                            <p>Add your first project above.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Claude Chat Page -->
            <div class="content-area" id="claude-chat-page">
                <div class="page-header">
                    <h1>🧠 Claude AI</h1>
                    <p>Chat with Claude AI (Simulated Responses)</p>
                </div>
                <div class="chat-container">
                    <div class="chat-messages" id="claudeChatMessages">
                        <div class="message assistant">
                            <p>Hello! I'm Claude. How can I help you today? (This is a simulated chat for demo purposes)</p>
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <textarea class="chat-input" id="claudeChatInput" placeholder="Type your message..." rows="1"></textarea>
                        <button class="send-btn" id="claudeSendBtn">Send</button>
                    </div>
                </div>
            </div>

            <!-- Gemini Chat Page -->
            <div class="content-area" id="gemini-chat-page">
                <div class="page-header">
                    <h1>✨ Gemini AI</h1>
                    <p>Chat with Google Gemini AI</p>
                </div>
                <div class="chat-container">
                    <div class="chat-messages" id="geminiChatMessages">
                        <div class="message assistant">
                            <p>Hello! I'm Gemini. How can I assist you today?</p>
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <textarea class="chat-input" id="geminiChatInput" placeholder="Type your message..." rows="1"></textarea>
                        <button class="send-btn" id="geminiSendBtn">Send</button>
                    </div>
                </div>
            </div>

            <div class="content-area" id="word-page">
                <div class="word-container">
                    <!-- Word Toolbar -->
                    <div class="word-toolbar">
                        <!-- File Menu -->
                        <div class="toolbar-section">
                            <button class="toolbar-btn" id="newDoc" title="New Document">📄</button>
                            <button class="toolbar-btn" id="openDoc" title="Open Document">📂</button>
                            <button class="toolbar-btn" id="saveDoc" title="Save Document">💾</button>
                            <button class="toolbar-btn" id="printDoc" title="Print">🖨️</button>
                        </div>
                        
                        <!-- Formatting -->
                        <div class="toolbar-section">
                            <button class="toolbar-btn" id="boldBtn" title="Bold">B</button>
                            <button class="toolbar-btn" id="italicBtn" title="Italic">I</button>
                            <button class="toolbar-btn" id="underlineBtn" title="Underline">U</button>
                            <button class="toolbar-btn" id="strikeBtn" title="Strikethrough">S</button>
                        </div>
                        
                        <!-- Font Controls -->
                        <div class="toolbar-section">
                            <select id="fontFamily" class="toolbar-select">
                                <option value="Arial">Arial</option>
                                <option value="Times New Roman">Times New Roman</option>
                                <option value="Calibri" selected>Calibri</option>
                                <option value="Comic Sans MS">Comic Sans MS</option>
                                <option value="Courier New">Courier New</option>
                                <option value="Georgia">Georgia</option>
                                <option value="Verdana">Verdana</option>
                            </select>
                            <select id="fontSize" class="toolbar-select">
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11" selected>11</option>
                                <option value="12">12</option>
                                <option value="14">14</option>
                                <option value="16">16</option>
                                <option value="18">18</option>
                                <option value="20">20</option>
                                <option value="24">24</option>
                                <option value="36">36</option>
                                <option value="48">48</option>
                            </select>
                        </div>
                        
                        <!-- Colors -->
                        <div class="toolbar-section">
                            <input type="color" id="fontColor" class="color-picker" title="Font Color" value="#000000">
                            <input type="color" id="backgroundColor" class="color-picker" title="Background Color" value="#ffffff">
                        </div>
                        
                        <!-- Alignment -->
                        <div class="toolbar-section">
                            <button class="toolbar-btn" id="alignLeft" title="Align Left">⇤</button>
                            <button class="toolbar-btn" id="alignCenter" title="Center">⇶</button>
                            <button class="toolbar-btn" id="alignRight" title="Align Right">⇥</button>
                            <button class="toolbar-btn" id="alignJustify" title="Justify">⇺</button>
                        </div>
                        
                        <!-- Lists -->
                        <div class="toolbar-section">
                            <button class="toolbar-btn" id="bulletList" title="Bullet List">•</button>
                            <button class="toolbar-btn" id="numberList" title="Numbered List">1.</button>
                        </div>
                        
                        <!-- Indent -->
                        <div class="toolbar-section">
                            <button class="toolbar-btn" id="outdent" title="Decrease Indent">⇦</button>
                            <button class="toolbar-btn" id="indent" title="Increase Indent">⇨</button>
                        </div>
                        
                        <!-- Insert -->
                        <div class="toolbar-section">
                            <button class="toolbar-btn" id="insertTable" title="Insert Table">⚏</button>
                            <button class="toolbar-btn" id="insertImage" title="Insert Image">🖼️</button>
                            <button class="toolbar-btn" id="insertLink" title="Insert Link">🔗</button>
                        </div>
                    </div>
                    
                    <!-- Word Count and Status -->
                    <div class="word-status">
                        <span id="wordCount">Words: 0</span>
                        <span id="charCount">Characters: 0</span>
                        <span id="pageCount">Page: 1</span>
                    </div>
                    
                    <!-- Document Editor -->
                    <div class="word-editor-container">
                        <div class="word-document" id="wordDocument" contenteditable="true" spellcheck="true">
                            <p>Start typing your document here...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Image Generator Page -->
            <div class="content-area" id="image-generator-page">
                <div class="page-header">
                    <h1>🎨 AI Image Generator</h1>
                    <p>Generate images using Gemini AI - Up to 10 images at once</p>
                </div>
                <div class="image-generator-container">
                    <!-- Generation Controls -->
                    <div class="generation-controls">
                        <div class="control-row">
                            <div class="control-group">
                                <label for="imagePrompt">Image Description:</label>
                                <textarea id="imagePrompt" placeholder="Describe the image you want to generate..." rows="3"></textarea>
                            </div>
                        </div>
                        
                        <div class="control-row">
                            <div class="control-group">
                                <label for="imageStyle">Style:</label>
                                <select id="imageStyle">
                                    <option value="">Default</option>
                                    <option value="photorealistic">Photorealistic</option>
                                    <option value="digital art">Digital Art</option>
                                    <option value="oil painting">Oil Painting</option>
                                    <option value="watercolor">Watercolor</option>
                                    <option value="cartoon">Cartoon</option>
                                    <option value="anime">Anime</option>
                                    <option value="sketch">Sketch</option>
                                    <option value="3d render">3D Render</option>
                                    <option value="minimalist">Minimalist</option>
                                    <option value="vintage">Vintage</option>
                                    <option value="cyberpunk">Cyberpunk</option>
                                    <option value="fantasy">Fantasy</option>
                                </select>
                            </div>
                            
                            <div class="control-group">
                                <label for="imageCount">Number of Images:</label>
                                <select id="imageCount">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4" selected>4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                </select>
                            </div>
                            
                            <div class="control-group">
                                <label for="imageFormat">File Format:</label>
                                <select id="imageFormat">
                                    <option value="png">PNG</option>
                                    <option value="jpg" selected>JPG</option>
                                    <option value="webp">WebP</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="control-row">
                            <button id="generateImages" class="generate-btn">🎨 Generate Images</button>
                            <button id="clearImages" class="clear-btn">🗑️ Clear All</button>
                            <button id="downloadAll" class="download-btn">📥 Download All</button>
                        </div>
                    </div>
                    
                    <!-- Status Display -->
                    <div class="generation-status" id="generationStatus" style="display: none;">
                        <div class="status-text">Generating images...</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>
                    
                    <!-- Image Grid -->
                    <div class="image-grid" id="imageGrid">
                        <div class="no-images">
                            <p>🎨 Generate your first AI image!</p>
                            <p>Enter a description above and click "Generate Images"</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calculator Page -->
            <div class="content-area" id="calculator-page">
                <div class="page-header">
                    <h1>🧮 Calculator</h1>
                    <p>Advanced calculator with save functionality</p>
                </div>
                <div class="calculator-container">
                    <!-- Calculator Display -->
                    <div class="calc-display">
                        <div class="calc-history" id="calcHistory"></div>
                        <div class="calc-current" id="calcCurrent">0</div>
                    </div>
                    
                    <!-- Calculator Buttons -->
                    <div class="calc-buttons">
                        <div class="calc-row">
                            <button class="calc-btn func-btn" data-action="clear">C</button>
                            <button class="calc-btn func-btn" data-action="clear-entry">CE</button>
                            <button class="calc-btn func-btn" data-action="backspace">⌫</button>
                            <button class="calc-btn op-btn" data-action="divide">÷</button>
                        </div>
                        <div class="calc-row">
                            <button class="calc-btn num-btn" data-value="7">7</button>
                            <button class="calc-btn num-btn" data-value="8">8</button>
                            <button class="calc-btn num-btn" data-value="9">9</button>
                            <button class="calc-btn op-btn" data-action="multiply">×</button>
                        </div>
                        <div class="calc-row">
                            <button class="calc-btn num-btn" data-value="4">4</button>
                            <button class="calc-btn num-btn" data-value="5">5</button>
                            <button class="calc-btn num-btn" data-value="6">6</button>
                            <button class="calc-btn op-btn" data-action="subtract">−</button>
                        </div>
                        <div class="calc-row">
                            <button class="calc-btn num-btn" data-value="1">1</button>
                            <button class="calc-btn num-btn" data-value="2">2</button>
                            <button class="calc-btn num-btn" data-value="3">3</button>
                            <button class="calc-btn op-btn" data-action="add">+</button>
                        </div>
                        <div class="calc-row">
                            <button class="calc-btn special-btn" data-action="toggle-sign">±</button>
                            <button class="calc-btn num-btn" data-value="0">0</button>
                            <button class="calc-btn num-btn" data-value=".">.</button>
                            <button class="calc-btn equals-btn" data-action="equals">=</button>
                        </div>
                    </div>
                    
                    <!-- Calculator Memory and History -->
                    <div class="calc-extras">
                        <div class="calc-memory">
                            <h3>Memory</h3>
                            <div class="memory-buttons">
                                <button class="mem-btn" data-action="memory-clear">MC</button>
                                <button class="mem-btn" data-action="memory-recall">MR</button>
                                <button class="mem-btn" data-action="memory-add">M+</button>
                                <button class="mem-btn" data-action="memory-subtract">M−</button>
                                <button class="mem-btn" data-action="memory-store">MS</button>
                            </div>
                            <div class="memory-value" id="memoryValue">Memory: 0</div>
                        </div>
                        
                        <div class="calc-saved">
                            <h3>Saved Calculations</h3>
                            <div class="saved-controls">
                                <button class="save-btn" id="saveCalculation">💾 Save Current</button>
                                <button class="save-btn" id="clearSaved">🗑️ Clear All</button>
                            </div>
                            <div class="saved-list" id="savedList">
                                <p class="no-saved">No saved calculations</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Prompt Generator Page -->
            <div class="content-area" id="prompt-generator-page">
                <div class="page-header">
                    <h1>✨ AI Prompt Generator</h1>
                    <p>Transform your prompts into powerful, detailed instructions using AI</p>
                </div>
                <div class="prompt-generator-container">
                    <!-- Input Section -->
                    <div class="prompt-input-section">
                        <div class="prompt-card">
                            <h3>🔸 Your Original Prompt</h3>
                            <textarea 
                                id="originalPrompt" 
                                class="prompt-input"
                                placeholder="Enter your basic prompt here... For example: 'Create a logo for my coffee shop'"
                                rows="4"
                            ></textarea>
                        </div>
                        
                        <div class="prompt-settings">
                            <div class="setting-group">
                                <label for="promptType">Prompt Type:</label>
                                <select id="promptType">
                                    <option value="general">General Enhancement</option>
                                    <option value="creative">Creative Writing</option>
                                    <option value="technical">Technical/Code</option>
                                    <option value="business">Business/Professional</option>
                                    <option value="marketing">Marketing/Sales</option>
                                    <option value="educational">Educational/Tutorial</option>
                                    <option value="image-generation">Image Generation</option>
                                    <option value="data-analysis">Data Analysis</option>
                                </select>
                            </div>
                            
                            <div class="setting-group">
                                <label for="promptLength">Detail Level:</label>
                                <select id="promptLength">
                                    <option value="concise">Concise</option>
                                    <option value="detailed" selected>Detailed</option>
                                    <option value="comprehensive">Comprehensive</option>
                                </select>
                            </div>
                            
                            <div class="setting-group">
                                <label for="promptTone">Tone:</label>
                                <select id="promptTone">
                                    <option value="professional" selected>Professional</option>
                                    <option value="casual">Casual</option>
                                    <option value="formal">Formal</option>
                                    <option value="creative">Creative</option>
                                    <option value="technical">Technical</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="generation-controls">
                            <button id="generatePrompt" class="generate-prompt-btn">
                                ✨ Enhance My Prompt
                            </button>
                            <button id="clearPrompts" class="clear-prompt-btn">
                                🗑️ Clear All
                            </button>
                            <button id="savePrompt" class="save-prompt-btn">
                                💾 Save Enhanced
                            </button>
                        </div>
                    </div>
                    
                    <!-- Output Section -->
                    <div class="prompt-output-section">
                        <div class="output-card">
                            <div class="output-header">
                                <h3>🚀 Enhanced Prompt</h3>
                                <div class="output-actions">
                                    <button id="copyPrompt" class="copy-btn">📋 Copy</button>
                                    <button id="regeneratePrompt" class="regenerate-btn">🔄 Regenerate</button>
                                </div>
                            </div>
                            <div class="enhanced-prompt-container" id="enhancedPromptContainer">
                                <div class="placeholder-text">
                                    <p>🎯 Your enhanced prompt will appear here</p>
                                    <p>Enter your original prompt above and click "Enhance My Prompt"</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Analysis Section -->
                        <div class="analysis-card">
                            <h3>📊 Enhancement Analysis</h3>
                            <div class="analysis-content" id="analysisContent">
                                <div class="analysis-placeholder">
                                    <p>Analysis will show improvements made to your prompt</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Saved Prompts Section -->
                    <div class="saved-prompts-section">
                        <div class="saved-prompts-card">
                            <div class="saved-header">
                                <h3>💾 Saved Enhanced Prompts</h3>
                                <button id="clearSavedPrompts" class="clear-saved-btn">🗑️ Clear All</button>
                            </div>
                            <div class="saved-prompts-list" id="savedPromptsList">
                                <div class="no-saved-prompts">
                                    <p>No saved prompts yet</p>
                                    <p>Generate and save enhanced prompts to build your collection</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick Templates -->
                        <div class="templates-card">
                            <h3>⚡ Quick Templates</h3>
                            <div class="template-buttons">
                                <button class="template-btn" data-template="logo">🎨 Logo Design</button>
                                <button class="template-btn" data-template="content">📝 Content Writing</button>
                                <button class="template-btn" data-template="code">💻 Code Generation</button>
                                <button class="template-btn" data-template="email">📧 Email Writing</button>
                                <button class="template-btn" data-template="social">📱 Social Media</button>
                                <button class="template-btn" data-template="analysis">📊 Data Analysis</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Loading State -->
                    <div class="prompt-loading" id="promptLoading" style="display: none;">
                        <div class="loading-spinner"></div>
                        <p>Enhancing your prompt with AI...</p>
                    </div>
                </div>
            </div>

            <!-- Habit Tracker Page -->
            <div class="content-area" id="habit-tracker-page">
                <div class="page-header">
                    <h1>📈 Habit Tracker</h1>
                    <p>Build better habits with daily tracking and streak counters</p>
                </div>
                
                <div class="habit-tracker-container">
                    <!-- Habit Management Section -->
                    <div class="habit-management-section">
                        <div class="habit-card">
                            <h3>🎯 Create New Habit</h3>
                            <div class="habit-form">
                                <div class="form-row">
                                    <input type="text" id="habitName" placeholder="Habit name (e.g., Drink 8 glasses of water)" class="habit-input">
                                    <select id="habitCategory" class="habit-select">
                                        <option value="health">🏃 Health & Fitness</option>
                                        <option value="productivity">💼 Productivity</option>
                                        <option value="learning">📚 Learning</option>
                                        <option value="wellness">🧘 Wellness</option>
                                        <option value="social">👥 Social</option>
                                        <option value="creative">🎨 Creative</option>
                                        <option value="financial">💰 Financial</option>
                                        <option value="other">📝 Other</option>
                                    </select>
                                </div>
                                
                                <div class="form-row">
                                    <select id="habitFrequency" class="habit-select">
                                        <option value="daily">Daily</option>
                                        <option value="weekdays">Weekdays Only</option>
                                        <option value="weekends">Weekends Only</option>
                                        <option value="weekly">Weekly</option>
                                    </select>
                                    
                                    <select id="habitType" class="habit-select">
                                        <option value="checkbox">✅ Simple Check</option>
                                        <option value="number">🔢 Number Target</option>
                                        <option value="time">⏱️ Time Duration</option>
                                    </select>
                                </div>
                                
                                <div class="target-input-section" id="targetInputSection" style="display: none;">
                                    <div class="form-row">
                                        <input type="number" id="habitTarget" placeholder="Target (e.g., 8 glasses, 30 minutes)" class="habit-input">
                                        <input type="text" id="habitUnit" placeholder="Unit (e.g., glasses, minutes, pages)" class="habit-input">
                                    </div>
                                </div>
                                
                                <textarea id="habitDescription" placeholder="Optional: Add description or motivation..." class="habit-textarea" rows="3"></textarea>
                                
                                <div class="habit-colors">
                                    <span>Choose color: </span>
                                    <div class="color-options">
                                        <div class="color-option" data-color="#4fc3f7" style="background: #4fc3f7;"></div>
                                        <div class="color-option active" data-color="#66bb6a" style="background: #66bb6a;"></div>
                                        <div class="color-option" data-color="#ff7043" style="background: #ff7043;"></div>
                                        <div class="color-option" data-color="#ab47bc" style="background: #ab47bc;"></div>
                                        <div class="color-option" data-color="#ffa726" style="background: #ffa726;"></div>
                                        <div class="color-option" data-color="#ec407a" style="background: #ec407a;"></div>
                                    </div>
                                </div>
                                
                                <div class="habit-controls">
                                    <button id="addHabit" class="add-habit-btn">
                                        ✨ Create Habit
                                    </button>
                                    <button id="clearHabitForm" class="clear-habit-btn">
                                        🗑️ Clear
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Active Habits List -->
                        <div class="active-habits-card">
                            <div class="habits-header">
                                <h3>🎯 Your Active Habits</h3>
                                <div class="habits-filter">
                                    <select id="habitCategoryFilter" class="filter-select">
                                        <option value="all">All Categories</option>
                                        <option value="health">🏃 Health & Fitness</option>
                                        <option value="productivity">💼 Productivity</option>
                                        <option value="learning">📚 Learning</option>
                                        <option value="wellness">🧘 Wellness</option>
                                        <option value="social">👥 Social</option>
                                        <option value="creative">🎨 Creative</option>
                                        <option value="financial">💰 Financial</option>
                                        <option value="other">📝 Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="habits-list" id="habitsList">
                                <div class="no-habits">
                                    <p>🌱 No habits yet</p>
                                    <p>Create your first habit above to start building better daily routines!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tracking Grid Section -->
                    <div class="tracking-section">
                        <div class="tracking-card">
                            <div class="tracking-header">
                                <h3>📅 Daily Tracking</h3>
                                <div class="month-navigation">
                                    <button id="prevMonth" class="nav-btn">←</button>
                                    <span id="currentMonth">January 2024</span>
                                    <button id="nextMonth" class="nav-btn">→</button>
                                </div>
                            </div>
                            
                            <div class="calendar-container">
                                <div class="calendar-weekdays">
                                    <div class="weekday">Sun</div>
                                    <div class="weekday">Mon</div>
                                    <div class="weekday">Tue</div>
                                    <div class="weekday">Wed</div>
                                    <div class="weekday">Thu</div>
                                    <div class="weekday">Fri</div>
                                    <div class="weekday">Sat</div>
                                </div>
                                <div class="calendar-grid" id="calendarGrid">
                                    <!-- Calendar days will be generated here -->
                                </div>
                            </div>
                            
                            <!-- Selected Day Panel -->
                            <div class="selected-day-panel" id="selectedDayPanel" style="display: none;">
                                <div class="panel-header">
                                    <h4 id="selectedDateTitle">Today's Habits</h4>
                                    <button id="closeDayPanel" class="close-panel-btn">✕</button>
                                </div>
                                <div class="day-habits-list" id="dayHabitsList">
                                    <!-- Day-specific habits will appear here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Statistics Card -->
                        <div class="stats-card">
                            <h3>📊 Your Progress</h3>
                            <div class="habit-stats" id="habitStats">
                                <div class="stat-item">
                                    <div class="stat-number" id="totalHabits">0</div>
                                    <div class="stat-label">Active Habits</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="todayCompleted">0</div>
                                    <div class="stat-label">Completed Today</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="weeklyAverage">0%</div>
                                    <div class="stat-label">This Week</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="longestStreak">0</div>
                                    <div class="stat-label">Best Streak</div>
                                </div>
                            </div>
                            
                            <div class="achievements-section">
                                <h4>🏆 Recent Achievements</h4>
                                <div class="achievements-list" id="achievementsList">
                                    <div class="no-achievements">
                                        <p>Complete habits to earn achievements!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Retro Page -->
            <div class="content-area" id="retro-page">
                <div class="page-header">
                    <h1>🏪 Retro Stock Manager</h1>
                    <p>Track fridge stock levels for your workplace (1 row = 10 units)</p>
                </div>
                
                <div class="retro-stock-container">
                    <!-- Drinks Section -->
                    <div class="stock-section">
                        <h2>🍺 Drinks</h2>
                        <div class="stock-grid">
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">Coca Cola</span>
                                    <span class="item-code">CC</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('cc', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('cc', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-cc">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('cc', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('cc', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-cc" value="24" class="target-input"></div>
                            </div>
                            
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">Jack Daniels</span>
                                    <span class="item-code">JD</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('jd', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('jd', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-jd">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('jd', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('jd', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-jd" value="12" class="target-input"></div>
                            </div>
                            
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">Red Bull</span>
                                    <span class="item-code">RB</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('redbull', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('redbull', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-redbull">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('redbull', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('redbull', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-redbull" value="12" class="target-input"></div>
                            </div>
                            
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">Corona</span>
                                    <span class="item-code">CORONA</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('corona', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('corona', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-corona">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('corona', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('corona', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-corona" value="12" class="target-input"></div>
                            </div>
                            
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">Asahi</span>
                                    <span class="item-code">ASAHI</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('asahi', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('asahi', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-asahi">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('asahi', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('asahi', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-asahi" value="12" class="target-input"></div>
                            </div>
                            
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">Raspberry Guava Lemon Lime Cruisers</span>
                                    <span class="item-code">CRUISERS</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('cruisers', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('cruisers', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-cruisers">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('cruisers', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('cruisers', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-cruisers" value="12" class="target-input"></div>
                            </div>
                            
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">196 Cans</span>
                                    <span class="item-code">196</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('cans196', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('cans196', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-cans196">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('cans196', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('cans196', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-cans196" value="12" class="target-input"></div>
                            </div>
                            
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">Jim Beam Bottles</span>
                                    <span class="item-code">JB</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('jimbeam', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('jimbeam', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-jimbeam">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('jimbeam', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('jimbeam', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-jimbeam" value="6" class="target-input"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Spirits Section -->
                    <div class="stock-section">
                        <h2>🥃 Spirits</h2>
                        <div class="stock-grid">
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">Vodka</span>
                                    <span class="item-code">VODKA</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('vodka', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('vodka', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-vodka">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('vodka', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('vodka', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-vodka" value="3" class="target-input"></div>
                            </div>
                            
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">Bourbon</span>
                                    <span class="item-code">BOURBON</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('bourbon', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('bourbon', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-bourbon">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('bourbon', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('bourbon', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-bourbon" value="3" class="target-input"></div>
                            </div>
                            
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">Rum</span>
                                    <span class="item-code">RUM</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('rum', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('rum', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-rum">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('rum', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('rum', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-rum" value="3" class="target-input"></div>
                            </div>
                            
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">Tequila</span>
                                    <span class="item-code">TEQUILA</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('tequila', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('tequila', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-tequila">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('tequila', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('tequila', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-tequila" value="3" class="target-input"></div>
                            </div>
                            
                            <div class="stock-item">
                                <div class="item-header">
                                    <span class="item-name">Gin</span>
                                    <span class="item-code">GIN</span>
                                </div>
                                <div class="stock-controls">
                                    <div class="control-group">
                                        <label class="control-label">Rows (×10)</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease row-btn" onclick="app.updateStock('gin', -1)">-10</button>
                                            <button class="stock-btn increase row-btn" onclick="app.updateStock('gin', 1)">+10</button>
                                        </div>
                                    </div>
                                    <span class="stock-count" id="stock-gin">0</span>
                                    <div class="control-group">
                                        <label class="control-label">Units</label>
                                        <div class="control-buttons">
                                            <button class="stock-btn decrease unit-btn" onclick="app.updateStockSingle('gin', -1)">-1</button>
                                            <button class="stock-btn increase unit-btn" onclick="app.updateStockSingle('gin', 1)">+1</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="stock-target">Target: <input type="number" id="target-gin" value="3" class="target-input"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Stock Summary -->
                    <div class="stock-summary">
                        <h2>📊 Stock Summary</h2>
                        <div class="summary-content">
                            <div class="summary-item">
                                <span>Items to stock:</span>
                                <span id="items-to-stock">0</span>
                            </div>
                            <div class="summary-actions">
                                <button class="action-btn" onclick="app.resetAllStock()">🔄 Reset All</button>
                                <button class="action-btn" onclick="app.generateStockList()">📋 Generate Stock List</button>
                                <button class="action-btn" onclick="app.saveStock()">💾 Save</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Generated Stock List -->
                    <div class="stock-list-output" id="stockListOutput" style="display: none;">
                        <h3>📋 Stock List</h3>
                        <div class="stock-list-content" id="stockListContent"></div>
                        <button class="copy-btn" onclick="app.copyStockList()">📋 Copy to Clipboard</button>
                    </div>
                </div>
            </div>

            <!-- Games Page -->
            <div class="content-area" id="games-page">
                <div class="page-header">
                    <h1>🎮 Weapon Dodge Arena</h1>
                    <p>Epic 2D dodge game with Xbox controller support - Survive the weapon storm!</p>
                </div>
                
                <div class="content-card">
                    <div class="game-container">
                        <!-- Game Canvas -->
                        <div class="game-wrapper">
                            <canvas id="gameCanvas" width="800" height="600"></canvas>
                            <div class="game-overlay" id="gameOverlay">
                                <div class="game-menu" id="gameMenu">
                                    <h2>🎯 WEAPON DODGE ARENA</h2>
                                    <p>Survive the incoming weapon storm!</p>
                                    <div class="controls-info">
                                        <h3>Controls:</h3>
                                        <div class="control-list">
                                            <div class="control-item">🎮 Xbox Controller: Left Stick to Move</div>
                                            <div class="control-item">⌨️ Keyboard: WASD or Arrow Keys</div>
                                            <div class="control-item">🔥 Hold for Dash Boost (Limited Energy)</div>
                                            <div class="control-item">⛶ Game Fullscreen: Click button or press F11</div>
                                        </div>
                                    </div>
                                    <div class="game-buttons">
                                        <button id="startGameBtn" class="game-btn primary">🚀 START GAME</button>
                                        <button id="pauseGameBtn" class="game-btn secondary" style="display: none;">⏸️ PAUSE</button>
                                        <button id="fullscreenBtn" class="game-btn secondary">⛶ FULLSCREEN</button>
                                    </div>
                                </div>
                                
                                <div class="game-over-screen" id="gameOverScreen" style="display: none;">
                                    <h2>💀 GAME OVER</h2>
                                    <div class="final-stats">
                                        <div class="stat">Score: <span id="finalScore">0</span></div>
                                        <div class="stat">Time: <span id="finalTime">0</span>s</div>
                                        <div class="stat">Weapons Dodged: <span id="weaponsDodged">0</span></div>
                                    </div>
                                    <div class="game-buttons">
                                        <button id="restartGameBtn" class="game-btn primary">🔄 PLAY AGAIN</button>
                                        <button id="backToMenuBtn" class="game-btn secondary">📋 MAIN MENU</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Game Stats -->
                        <div class="game-stats" id="gameStats" style="display: none;">
                            <div class="stat-group">
                                <div class="stat-item">
                                    <span class="stat-label">Score</span>
                                    <span class="stat-value" id="currentScore">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Time</span>
                                    <span class="stat-value" id="gameTime">0s</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Combo</span>
                                    <span class="stat-value" id="comboCounter">x1</span>
                                </div>
                            </div>
                            <div class="energy-bar">
                                <div class="energy-label">⚡ Dash Energy</div>
                                <div class="energy-background">
                                    <div class="energy-fill" id="energyFill"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- High Scores -->
                        <div class="high-scores">
                            <h3>🏆 High Scores</h3>
                            <div class="scores-list" id="scoresList">
                                <div class="score-item">No scores yet - be the first!</div>
                            </div>
                            <button class="game-btn secondary" onclick="app.clearHighScores()">🗑️ Clear Scores</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- OGWORM Page -->
            <div class="content-area" id="ogworm-page">
                <iframe src="Worm1v1.html" style="width: 100%; height: 100vh; border: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0;"></iframe>
            </div>

            <!-- Gemini Image Generator Page -->
            <div class="content-area" id="gemini-image-gen-page">
                <div class="page-header">
                    <h1>🤖 Gemini Image Generator</h1>
                    <p>AI-powered image generation with Gemini integration</p>
                </div>
                
                <div class="content-card">
                    <div class="gemini-image-generator">
                        <!-- Main Controls Section -->
                        <div class="generator-controls">
                            <div class="control-section">
                                <h3>🎨 Image Prompt</h3>
                                <div class="prompt-container">
                                    <textarea id="geminiImagePrompt" placeholder="Describe the image you want to generate in detail..." rows="4" class="prompt-input"></textarea>
                                    <div class="prompt-suggestions">
                                        <span class="suggestion-tag" onclick="app.addPromptSuggestion('A majestic mountain landscape at sunset with vibrant colors')">🏔️ Landscape</span>
                                        <span class="suggestion-tag" onclick="app.addPromptSuggestion('A futuristic cityscape with neon lights and flying cars')">🌃 Sci-Fi</span>
                                        <span class="suggestion-tag" onclick="app.addPromptSuggestion('A cute cartoon character with big eyes and colorful outfit')">🦄 Cartoon</span>
                                        <span class="suggestion-tag" onclick="app.addPromptSuggestion('An elegant portrait in renaissance art style')">🎭 Portrait</span>
                                        <span class="suggestion-tag" onclick="app.addPromptSuggestion('Abstract geometric patterns with vibrant gradients')">🎨 Abstract</span>
                                    </div>
                                </div>
                            </div>

                            <div class="control-row">
                                <div class="control-group">
                                    <label for="geminiImageStyle">🎭 Art Style</label>
                                    <select id="geminiImageStyle" class="style-select">
                                        <option value="">Natural</option>
                                        <option value="photorealistic">📸 Photorealistic</option>
                                        <option value="digital art">💫 Digital Art</option>
                                        <option value="oil painting">🖼️ Oil Painting</option>
                                        <option value="watercolor">🎨 Watercolor</option>
                                        <option value="pencil sketch">✏️ Pencil Sketch</option>
                                        <option value="anime style">🌸 Anime</option>
                                        <option value="cartoon">🎪 Cartoon</option>
                                        <option value="vintage poster">📜 Vintage Poster</option>
                                        <option value="cyberpunk">🌆 Cyberpunk</option>
                                        <option value="minimalist">⚪ Minimalist</option>
                                        <option value="surreal">🔮 Surreal</option>
                                        <option value="steampunk">⚙️ Steampunk</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label for="geminiImageQuality">✨ Quality</label>
                                    <select id="geminiImageQuality" class="quality-select">
                                        <option value="standard">Standard</option>
                                        <option value="high" selected>High Quality</option>
                                        <option value="ultra">Ultra HD</option>
                                    </select>
                                </div>

                                <div class="control-group">
                                    <label for="geminiImageCount">🔢 Count</label>
                                    <select id="geminiImageCount" class="count-select">
                                        <option value="1">1 Image</option>
                                        <option value="2">2 Images</option>
                                        <option value="3">3 Images</option>
                                        <option value="4" selected>4 Images</option>
                                        <option value="6">6 Images</option>
                                        <option value="8">8 Images</option>
                                    </select>
                                </div>
                            </div>

                            <div class="advanced-controls" id="advancedControls" style="display: none;">
                                <h4>🛠️ Advanced Settings</h4>
                                <div class="control-row">
                                    <div class="control-group">
                                        <label for="geminiImageRatio">📐 Aspect Ratio</label>
                                        <select id="geminiImageRatio">
                                            <option value="1:1" selected>Square (1:1)</option>
                                            <option value="16:9">Landscape (16:9)</option>
                                            <option value="9:16">Portrait (9:16)</option>
                                            <option value="4:3">Classic (4:3)</option>
                                            <option value="3:4">Portrait (3:4)</option>
                                        </select>
                                    </div>

                                    <div class="control-group">
                                        <label for="geminiImageMood">🎭 Mood/Lighting</label>
                                        <select id="geminiImageMood">
                                            <option value="">Default</option>
                                            <option value="bright and cheerful">☀️ Bright & Cheerful</option>
                                            <option value="dark and moody">🌙 Dark & Moody</option>
                                            <option value="warm golden hour">🌅 Golden Hour</option>
                                            <option value="cool blue tones">❄️ Cool Blue</option>
                                            <option value="dramatic lighting">⚡ Dramatic</option>
                                            <option value="soft ethereal">✨ Soft Ethereal</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="generation-buttons">
                                <button id="toggleAdvanced" class="secondary-btn" onclick="app.toggleAdvancedControls()">
                                    🛠️ Advanced Options
                                </button>
                                <button id="enhancePrompt" class="secondary-btn" onclick="app.enhancePromptWithGemini()">
                                    ✨ Enhance Prompt
                                </button>
                                <button id="generateGeminiImages" class="primary-btn" onclick="app.generateGeminiImages()">
                                    🚀 Generate Images
                                </button>
                            </div>
                        </div>

                        <!-- Progress Section -->
                        <div class="generation-progress" id="geminiGenerationProgress" style="display: none;">
                            <div class="progress-info">
                                <h4>🔄 Generating Images...</h4>
                                <p id="geminiProgressText">Enhancing prompt with Gemini AI...</p>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="geminiProgressFill"></div>
                                </div>
                                <span class="progress-percentage" id="geminiProgressPercent">0%</span>
                            </div>
                        </div>

                        <!-- Results Section -->
                        <div class="results-section">
                            <div class="results-header">
                                <h3>🖼️ Generated Images</h3>
                                <div class="results-actions">
                                    <button id="clearGeminiImages" class="clear-btn" onclick="app.clearGeminiImages()">
                                        🗑️ Clear All
                                    </button>
                                    <button id="downloadGeminiAll" class="download-btn" onclick="app.downloadAllGeminiImages()">
                                        📥 Download All
                                    </button>
                                </div>
                            </div>
                            
                            <div class="image-grid" id="geminiImageGrid">
                                <div class="no-images-placeholder">
                                    <div class="placeholder-icon">🎨</div>
                                    <p>No images generated yet</p>
                                    <p>Enter a prompt above and click "Generate Images" to get started!</p>
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced Prompt Display -->
                        <div class="enhanced-prompt-section" id="enhancedPromptSection" style="display: none;">
                            <h4>✨ Gemini-Enhanced Prompt</h4>
                            <div class="enhanced-prompt-display" id="enhancedPromptDisplay"></div>
                            <div class="prompt-actions">
                                <button class="secondary-btn" onclick="app.useEnhancedPrompt()">Use This Prompt</button>
                                <button class="secondary-btn" onclick="app.regeneratePrompt()">Regenerate</button>
                            </div>
                        </div>

                        <!-- All Generated Images Gallery -->
                        <div class="all-images-gallery">
                            <div class="gallery-header">
                                <h3>🖼️ All Generated Images Gallery</h3>
                                <div class="gallery-controls">
                                    <select id="galleryFilter" onchange="app.filterGallery()" class="gallery-filter-select">
                                        <option value="all">All Images</option>
                                        <option value="recent">Recent (Last 10)</option>
                                        <option value="favorites">Favorites</option>
                                    </select>
                                    <button class="secondary-btn" onclick="app.toggleGalleryView()">
                                        <span id="galleryViewToggle">🔲 Grid View</span>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="gallery-container" id="allImagesGallery">
                                <div class="gallery-placeholder">
                                    <div class="placeholder-icon">🎨</div>
                                    <p>All your generated images will appear here</p>
                                    <p>Generate some images above to build your gallery!</p>
                                </div>
                            </div>
                            
                            <!-- Gallery Pagination -->
                            <div class="gallery-pagination" id="galleryPagination" style="display: none;">
                                <button class="page-btn" id="prevPage" onclick="app.previousGalleryPage()">← Previous</button>
                                <span class="page-info" id="pageInfo">Page 1 of 1</span>
                                <button class="page-btn" id="nextPage" onclick="app.nextGalleryPage()">Next →</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Browser Fighting Game Project Page -->
            <div class="content-area" id="browser-fighting-game-page">
                <div class="page-header">
                    <h1>🥊 Browser Fighting Game</h1>
                    <p>Epic browser-based fighting game with smooth animations and combat mechanics</p>
                </div>
                
                <div class="content-card">
                    <div class="project-overview">
                        <div class="project-info">
                            <h3>📖 Project Overview</h3>
                            <p>A dynamic 2D fighting game built with HTML5 Canvas and JavaScript, featuring character sprites, combat mechanics, and responsive controls.</p>
                            
                            <div class="project-features">
                                <h4>✨ Key Features:</h4>
                                <ul>
                                    <li>🎮 Smooth character animations and sprite handling</li>
                                    <li>⚔️ Combat system with attacks and special moves</li>
                                    <li>🎯 Collision detection and physics</li>
                                    <li>🕹️ Responsive keyboard and gamepad support</li>
                                    <li>🎨 Custom character sprites and backgrounds</li>
                                </ul>
                            </div>
                            
                            <div class="project-actions">
                                <a href="browser-fighting-game/index.html" target="_blank" class="action-btn primary">🚀 Play Game</a>
                                <a href="browser-fighting-game/" class="action-btn secondary">📁 View Source</a>
                                <button class="action-btn secondary" onclick="window.open('browser-fighting-game/README.md', '_blank')">📚 Documentation</button>
                            </div>
                        </div>
                        <div class="project-preview">
                            <div class="preview-placeholder">
                                <span class="preview-icon">🥊</span>
                                <p>Fighting Game Preview</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gemini Image Generator Project Page -->
            <div class="content-area" id="gemini-image-gen-project-page">
                <div class="page-header">
                    <h1>🖼️ Gemini Image Generator</h1>
                    <p>AI-powered image generation using Google's Gemini API with React and TypeScript</p>
                </div>
                
                <div class="content-card">
                    <div class="project-overview">
                        <div class="project-info">
                            <h3>📖 Project Overview</h3>
                            <p>A modern React application that leverages Google's Gemini AI to generate high-quality images from text descriptions with an intuitive interface.</p>
                            
                            <div class="project-features">
                                <h4>✨ Key Features:</h4>
                                <ul>
                                    <li>🤖 Integration with Google Gemini AI</li>
                                    <li>⚛️ Built with React and TypeScript</li>
                                    <li>🎨 Interactive image generation interface</li>
                                    <li>💾 Image saving and gallery features</li>
                                    <li>📱 Responsive design for all devices</li>
                                </ul>
                            </div>
                            
                            <div class="project-actions">
                                <a href="gemini-image-generator/index.html" target="_blank" class="action-btn primary">🚀 Launch App</a>
                                <a href="gemini-image-generator/" class="action-btn secondary">📁 View Source</a>
                                <button class="action-btn secondary" onclick="window.open('gemini-image-generator/README.md', '_blank')">📚 Documentation</button>
                            </div>
                        </div>
                        <div class="project-preview">
                            <div class="preview-placeholder">
                                <span class="preview-icon">🖼️</span>
                                <p>Image Generator Preview</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Marito Game Project Page -->
            <div class="content-area" id="marito-page">
                <div class="page-header">
                    <h1>🍄 Marito Game</h1>
                    <p>Classic Mario-style platformer game with modern web technologies</p>
                </div>
                
                <div class="content-card">
                    <div class="project-overview">
                        <div class="project-info">
                            <h3>📖 Project Overview</h3>
                            <p>A nostalgic platform game inspired by classic Mario games, featuring level progression, enemies, power-ups, and smooth gameplay mechanics.</p>
                            
                            <div class="project-features">
                                <h4>✨ Key Features:</h4>
                                <ul>
                                    <li>🎮 Classic platformer gameplay mechanics</li>
                                    <li>👾 Multiple enemy types and behaviors</li>
                                    <li>⭐ Power-ups and achievements system</li>
                                    <li>🎵 Sound effects and background music</li>
                                    <li>📱 Multi-level progression system</li>
                                </ul>
                            </div>
                            
                            <div class="project-actions">
                                <a href="Marito/index.html" target="_blank" class="action-btn primary">🚀 Play Game</a>
                                <a href="Marito/" class="action-btn secondary">📁 View Source</a>
                                <button class="action-btn secondary" onclick="window.open('Marito/README.md', '_blank')">📚 Documentation</button>
                            </div>
                        </div>
                        <div class="project-preview">
                            <div class="preview-placeholder">
                                <span class="preview-icon">🍄</span>
                                <p>Marito Game Preview</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pixel Pursuit Game Project Page -->
            <div class="content-area" id="pixel-pursuit-page">
                <div class="page-header">
                    <h1>🔍 Pixel Pursuit</h1>
                    <p>Multiplayer pixel hunting game with real-time gameplay and competitive features</p>
                </div>
                
                <div class="content-card">
                    <div class="project-overview">
                        <div class="project-info">
                            <h3>📖 Project Overview</h3>
                            <p>An engaging multiplayer game where players compete to find hidden pixels and objects in various maps with real-time scoring and leaderboards.</p>
                            
                            <div class="project-features">
                                <h4>✨ Key Features:</h4>
                                <ul>
                                    <li>🌐 Multiplayer real-time gameplay</li>
                                    <li>🗺️ Multiple game maps and scenarios</li>
                                    <li>🏆 Competitive scoring and leaderboards</li>
                                    <li>📱 Cross-platform compatibility</li>
                                    <li>⚡ Fast-paced pixel hunting mechanics</li>
                                </ul>
                            </div>
                            
                            <div class="project-actions">
                                <a href="Pixel_pursiot/index.html" target="_blank" class="action-btn primary">🚀 Play Game</a>
                                <a href="Pixel_pursiot/" class="action-btn secondary">📁 View Source</a>
                                <button class="action-btn secondary" onclick="window.open('Pixel_pursiot/README.md', '_blank')">📚 Documentation</button>
                            </div>
                        </div>
                        <div class="project-preview">
                            <div class="preview-placeholder">
                                <span class="preview-icon">🔍</span>
                                <p>Pixel Pursuit Preview</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Smart Checklist Project Page -->
            <div class="content-area" id="smart-checklist-page">
                <div class="page-header">
                    <h1>📋 Smart Checklist</h1>
                    <p>Intelligent task management system with React and TypeScript</p>
                </div>
                
                <div class="content-card">
                    <div class="project-overview">
                        <div class="project-info">
                            <h3>📖 Project Overview</h3>
                            <p>A sophisticated checklist application built with React and TypeScript, featuring smart task organization, progress tracking, and productivity insights.</p>
                            
                            <div class="project-features">
                                <h4>✨ Key Features:</h4>
                                <ul>
                                    <li>📝 Advanced task management and categorization</li>
                                    <li>📊 Progress tracking and analytics</li>
                                    <li>🎯 Priority and deadline management</li>
                                    <li>💾 Local storage and data persistence</li>
                                    <li>🌙 Dark/light theme support</li>
                                </ul>
                            </div>
                            
                            <div class="project-actions">
                                <a href="smartchecklist/index.html" target="_blank" class="action-btn primary">🚀 Launch App</a>
                                <a href="smartchecklist/" class="action-btn secondary">📁 View Source</a>
                                <button class="action-btn secondary" onclick="window.open('smartchecklist/README.md', '_blank')">📚 Documentation</button>
                            </div>
                        </div>
                        <div class="project-preview">
                            <div class="preview-placeholder">
                                <span class="preview-icon">📋</span>
                                <p>Smart Checklist Preview</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Space Invaders Project Page -->
            <div class="content-area" id="space-invaders-page">
                <div class="page-header">
                    <h1>👾 Space Invaders</h1>
                    <p>Classic arcade-style space shooter with modern web technologies</p>
                </div>
                
                <div class="content-card">
                    <div class="project-overview">
                        <div class="project-info">
                            <h3>📖 Project Overview</h3>
                            <p>A faithful recreation of the classic Space Invaders arcade game with enhanced graphics, smooth animations, and responsive controls.</p>
                            
                            <div class="project-features">
                                <h4>✨ Key Features:</h4>
                                <ul>
                                    <li>🚀 Classic space shooter gameplay</li>
                                    <li>👾 Progressive enemy waves and difficulty</li>
                                    <li>💥 Particle effects and explosions</li>
                                    <li>🎵 Retro sound effects and music</li>
                                    <li>🏆 High score tracking system</li>
                                </ul>
                            </div>
                            
                            <div class="project-actions">
                                <a href="Spaceinvaders/space_invaders_2025.html" target="_blank" class="action-btn primary">🚀 Play Game</a>
                                <a href="Spaceinvaders/" class="action-btn secondary">📁 View Source</a>
                                <button class="action-btn secondary" onclick="window.open('Spaceinvaders/fixes_summary.txt', '_blank')">📚 Documentation</button>
                            </div>
                        </div>
                        <div class="project-preview">
                            <div class="preview-placeholder">
                                <span class="preview-icon">👾</span>
                                <p>Space Invaders Preview</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Worm 1v1 Project Page -->
            <div class="content-area" id="worm1v1-page">
                <div class="page-header">
                    <h1>🐛 Worm 1v1 Battle Arena</h1>
                    <p>Epic turn-based artillery game with destructible terrain and physics</p>
                </div>
                
                <div class="content-card">
                    <div class="project-overview">
                        <div class="project-info">
                            <h3>📖 Project Overview</h3>
                            <p>A classic Worms-style battle game featuring turn-based combat, destructible landscapes, and physics-based projectile mechanics. Battle against another player in epic artillery warfare!</p>
                            
                            <div class="project-features">
                                <h4>✨ Key Features:</h4>
                                <ul>
                                    <li>🎯 Turn-based tactical combat system</li>
                                    <li>🌍 Destructible terrain with crater physics</li>
                                    <li>💨 Wind effects on projectile trajectories</li>
                                    <li>🎮 Mouse and keyboard controls</li>
                                    <li>💥 Realistic explosion and damage system</li>
                                    <li>⚡ Worm physics and movement mechanics</li>
                                    <li>🎨 Retro-style graphics and animations</li>
                                </ul>
                            </div>
                            
                            <div class="project-actions">
                                <a href="Worm1v1.html" target="_blank" class="action-btn primary">🚀 Play Game</a>
                                <button class="action-btn secondary" onclick="window.open('Worm1v1.html', '_blank')">🔗 Open Game</button>
                            </div>
                        </div>
                        <div class="project-preview">
                            <div class="preview-placeholder">
                                <span class="preview-icon">🐛</span>
                                <p>Worm 1v1 Battle Arena</p>
                                <small>Turn-based artillery combat</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Viral Video Prompt Generator Project Page -->
            <div class="content-area" id="viral-veo-prompt-page">
                <div class="page-header">
                    <h1>📹 Viral Video Prompt Generator</h1>
                    <p>AI-powered prompt generator for creating viral video content</p>
                </div>
                
                <div class="content-card">
                    <div class="project-overview">
                        <div class="project-info">
                            <h3>📖 Project Overview</h3>
                            <p>An innovative tool that generates creative prompts for viral video content, helping content creators brainstorm engaging ideas for social media platforms.</p>
                            
                            <div class="project-features">
                                <h4>✨ Key Features:</h4>
                                <ul>
                                    <li>🧠 AI-powered prompt generation</li>
                                    <li>🎬 Multiple content categories and themes</li>
                                    <li>🔥 Trending topics integration</li>
                                    <li>📱 Social media platform optimization</li>
                                    <li>💾 Save and export generated prompts</li>
                                </ul>
                            </div>
                            
                            <div class="project-actions">
                                <a href="viral-veo-prompt-generator/index.html" target="_blank" class="action-btn primary">🚀 Launch Generator</a>
                                <a href="viral-veo-prompt-generator/" class="action-btn secondary">📁 View Source</a>
                                <button class="action-btn secondary" onclick="window.open('viral-veo-prompt-generator/README.md', '_blank')">📚 Documentation</button>
                            </div>
                        </div>
                        <div class="project-preview">
                            <div class="preview-placeholder">
                                <span class="preview-icon">📹</span>
                                <p>Prompt Generator Preview</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gallery Page -->
            <div class="content-area" id="gallery-page">
                <div class="page-header">
                    <h1>🖼️ Gallery</h1>
                    <p>Browse your Images folder with multiple viewing options - Load from C:\Users\jamie\Desktop\MyHTML\Images</p>
                </div>
                
                <div class="content-card">
                    <!-- Gallery Controls -->
                    <div class="gallery-controls-bar">
                        <div class="gallery-left-controls">
                            <div class="gallery-search">
                                <label for="gallerySearch" class="visually-hidden">Search images</label>
                                <input type="text" id="gallerySearch" name="gallerySearch" placeholder="🔍 Search images..." class="gallery-search-input" aria-label="Search images">
                            </div>
                            <div class="gallery-filter">
                                <label for="galleryFileFilter" class="visually-hidden">Filter by file type</label>
                                <select id="galleryFileFilter" name="galleryFileFilter" class="gallery-filter-select" aria-label="Filter by file type">
                                    <option value="all">All Files</option>
                                    <option value="jpg">JPG Images</option>
                                    <option value="png">PNG Images</option>
                                    <option value="gif">GIF Images</option>
                                </select>
                            </div>
                            <div class="gallery-folder-input">
                                <label for="galleryFolderInput" class="visually-hidden">Load images folder</label>
                                <input type="file" id="galleryFolderInput" name="galleryFolderInput" webkitdirectory directory multiple style="display: none;" aria-label="Load images folder">
                                <button class="action-btn secondary" onclick="document.getElementById('galleryFolderInput').click()" aria-describedby="galleryFolderInput">
                                    📁 Load Images Folder
                                </button>
                            </div>
                        </div>
                        
                        <div class="gallery-right-controls">
                            <div class="gallery-view-controls">
                                <button class="gallery-view-btn active" data-view="grid" title="Grid View">
                                    <span>🔳</span>
                                </button>
                                <button class="gallery-view-btn" data-view="list" title="List View">
                                    <span>📋</span>
                                </button>
                                <button class="gallery-view-btn" data-view="masonry" title="Masonry View">
                                    <span>🧱</span>
                                </button>
                            </div>
                            <div class="gallery-size-controls">
                                <button class="gallery-size-btn" data-size="small" title="Small">S</button>
                                <button class="gallery-size-btn active" data-size="medium" title="Medium">M</button>
                                <button class="gallery-size-btn" data-size="large" title="Large">L</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gallery Stats -->
                    <div class="gallery-stats">
                        <span id="galleryCount">Loading images...</span>
                        <span id="galleryFilter" style="display:none;"></span>
                    </div>
                    
                    <!-- Loading Indicator -->
                    <div class="gallery-loading" id="galleryLoading">
                        <div class="loading-spinner"></div>
                        <p>Loading images...</p>
                    </div>
                    
                    <!-- Gallery Container -->
                    <div class="gallery-container" id="galleryContainer">
                        <!-- Images will be loaded here dynamically -->
                    </div>
                    
                    <!-- Pagination -->
                    <div class="gallery-pagination" id="galleryPagination" style="display: none;">
                        <button class="gallery-page-btn" id="galleryPrevPage" onclick="app.galleryPreviousPage()">← Previous</button>
                        <span class="gallery-page-info" id="galleryPageInfo">Page 1 of 1</span>
                        <button class="gallery-page-btn" id="galleryNextPage" onclick="app.galleryNextPage()">Next →</button>
                    </div>
                </div>
            </div>

            <!-- Image Modal -->
            <div class="image-modal" id="imageModal" style="display: none;">
                <div class="modal-backdrop" onclick="app.closeImageModal()"></div>
                <div class="modal-content">
                    <button class="modal-close" onclick="app.closeImageModal()">×</button>
                    <div class="modal-navigation">
                        <button class="modal-nav-btn" id="modalPrevBtn" onclick="app.showPreviousImage()">‹</button>
                        <button class="modal-nav-btn" id="modalNextBtn" onclick="app.showNextImage()">›</button>
                    </div>
                    <img id="modalImage" src="" alt="" loading="lazy">
                    <div class="modal-info">
                        <div class="modal-filename" id="modalFilename"></div>
                        <div class="modal-details" id="modalDetails"></div>
                    </div>
                </div>
            </div>

        </div>
        
        <!-- X-CLONE Content Area -->
        <div class="content-area" id="x-clone-page">
            <div class="x-clone-container">
                <!-- Left Sidebar -->
                <div class="x-sidebar">
                    <div class="x-sidebar-header">
                        <div class="x-logo">X</div>
                    </div>
                    
                    <div class="x-nav-menu">
                        <a href="#" class="x-nav-item active" data-xpage="home">
                            <div class="x-nav-icon">🏠</div>
                            <span>Home</span>
                        </a>
                        <a href="#" class="x-nav-item" data-xpage="explore">
                            <div class="x-nav-icon">🔍</div>
                            <span>Explore</span>
                        </a>
                        <a href="#" class="x-nav-item" data-xpage="notifications">
                            <div class="x-nav-icon">🔔</div>
                            <span>Notifications</span>
                            <div class="x-notification-badge">30</div>
                        </a>
                        <a href="#" class="x-nav-item" data-xpage="messages">
                            <div class="x-nav-icon">💬</div>
                            <span>Messages</span>
                        </a>
                        <a href="#" class="x-nav-item" data-xpage="supergrok">
                            <div class="x-nav-icon">⚡</div>
                            <span>SuperGrok</span>
                        </a>
                        <a href="#" class="x-nav-item" data-xpage="premium">
                            <div class="x-nav-icon">✖️</div>
                            <span>Premium</span>
                        </a>
                        <a href="#" class="x-nav-item" data-xpage="profile">
                            <div class="x-nav-icon">👤</div>
                            <span>Profile</span>
                        </a>
                    </div>
                    
                    <button class="x-post-button" onclick="openXPostModal()">Post</button>
                    
                    <div class="x-user-profile">
                        <div class="x-profile-image"></div>
                        <div class="x-user-info">
                            <h4>Jamie-Lee</h4>
                            <span>@sillthor194451</span>
                        </div>
                        <div class="x-more-button">⋯</div>
                    </div>
                </div>
                
                <!-- Main Content -->
                <div class="x-main-content">
                    <div class="x-content-header">
                        <h1 class="x-header-title" id="xPageTitle">Home</h1>
                        <div class="x-header-right">
                            <button class="x-header-button">⚙️</button>
                        </div>
                    </div>
                    
                    <!-- Home Page -->
                    <div class="x-page-content active" id="x-home">
                        <div class="x-tweet-composer">
                            <div class="x-composer-header">
                                <div class="x-composer-avatar"></div>
                                <div class="x-composer-input">
                                    <textarea class="x-tweet-textarea" placeholder="What is happening?!" maxlength="280"></textarea>
                                    <div class="x-composer-actions">
                                        <div class="x-composer-tools">
                                            <button class="x-tool-btn" title="Media">📷</button>
                                            <button class="x-tool-btn" title="GIF">🎬</button>
                                            <button class="x-tool-btn" title="Poll">📊</button>
                                            <button class="x-tool-btn" title="Emoji">😊</button>
                                            <button class="x-tool-btn" title="Schedule">📅</button>
                                            <button class="x-tool-btn" title="Location">📍</button>
                                        </div>
                                        <button class="x-tweet-btn" onclick="postXTweet()">Post</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="x-tweet-feed" id="xTweetFeed">
                            <!-- Tweets will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Explore Page -->
                    <div class="x-page-content" id="x-explore">
                        <div class="x-trending-section">
                            <div class="x-trending-header">Trending for you</div>
                            <div class="x-trending-item">
                                <div class="x-trending-location">Trending in Technology</div>
                                <div class="x-trending-topic">#AI</div>
                                <div class="x-trending-count">125K posts</div>
                            </div>
                            <div class="x-trending-item">
                                <div class="x-trending-location">Trending</div>
                                <div class="x-trending-topic">#WebDevelopment</div>
                                <div class="x-trending-count">89.2K posts</div>
                            </div>
                            <div class="x-trending-item">
                                <div class="x-trending-location">Technology · Trending</div>
                                <div class="x-trending-topic">#JavaScript</div>
                                <div class="x-trending-count">67.8K posts</div>
                            </div>
                            <div class="x-trending-item">
                                <div class="x-trending-location">Trending in Programming</div>
                                <div class="x-trending-topic">#React</div>
                                <div class="x-trending-count">45.1K posts</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Messages Page -->
                    <div class="x-page-content" id="x-messages">
                        <div class="x-messages-container">
                            <div class="x-conversations-list">
                                <div class="x-conversation-item" onclick="openXChat('user1')">
                                    <div class="x-conversation-avatar"></div>
                                    <div class="x-conversation-info">
                                        <h4>Alex Johnson</h4>
                                        <div class="x-conversation-preview">Hey! How's the project going?</div>
                                    </div>
                                </div>
                                <div class="x-conversation-item" onclick="openXChat('user2')">
                                    <div class="x-conversation-avatar"></div>
                                    <div class="x-conversation-info">
                                        <h4>Sarah Chen</h4>
                                        <div class="x-conversation-preview">Thanks for the help with the code review</div>
                                    </div>
                                </div>
                                <div class="x-conversation-item" onclick="openXChat('user3')">
                                    <div class="x-conversation-avatar"></div>
                                    <div class="x-conversation-info">
                                        <h4>Mike Davis</h4>
                                        <div class="x-conversation-preview">Can we schedule a meeting tomorrow?</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="x-chat-area">
                                <div class="x-chat-messages" id="xChatMessages">
                                    <div class="x-message">
                                        <div class="x-message-avatar"></div>
                                        <div class="x-message-content">
                                            Hey! How's everything going?
                                        </div>
                                    </div>
                                    <div class="x-message">
                                        <div class="x-message-avatar"></div>
                                        <div class="x-message-content">
                                            Pretty good! Working on some new features.
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="x-message-input-container">
                                    <input type="text" class="x-message-input" placeholder="Start a new message" />
                                    <button class="x-send-btn" onclick="sendXMessage()">Send</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Profile Page -->
                    <div class="x-page-content" id="x-profile">
                        <div class="x-profile-header">
                            <div class="x-profile-info">
                                <div class="x-profile-image-large"></div>
                                <div class="x-profile-details">
                                    <h1>Jamie-Lee</h1>
                                    <span>@sillthor194451</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="x-profile-stats">
                            <div class="x-stat">
                                <div class="x-stat-number">1,234</div>
                                <div class="x-stat-label">Following</div>
                            </div>
                            <div class="x-stat">
                                <div class="x-stat-number">5,678</div>
                                <div class="x-stat-label">Followers</div>
                            </div>
                            <div class="x-stat">
                                <div class="x-stat-number">2,456</div>
                                <div class="x-stat-label">Posts</div>
                            </div>
                            <div class="x-stat">
                                <div class="x-stat-number">892</div>
                                <div class="x-stat-label">Likes</div>
                            </div>
                        </div>
                        
                        <div class="x-tweet-feed" id="xProfileTweets">
                            <!-- User's tweets will be populated here -->
                        </div>
                    </div>
                    
                    <!-- SuperGrok Page -->
                    <div class="x-page-content" id="x-supergrok">
                        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 60vh; text-align: center;">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 60px;">
                                <div style="width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #1d9bf0, #0066cc); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 24px;">⚡</div>
                                <h1 style="font-size: 48px; font-weight: 700; margin: 0; color: #fff;">SuperGrok</h1>
                            </div>
                            
                            <div style="width: 100%; max-width: 520px; position: relative; margin-bottom: 24px;">
                                <input type="text" placeholder="Ask anything" style="width: 100%; background-color: #1a1a1a; border: 1px solid #333; border-radius: 24px; padding: 16px 20px 16px 48px; font-size: 18px; color: #fff; outline: none;" />
                                <div style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #71767b;">🔍</div>
                                <button style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background-color: #1d9bf0; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; display: flex; align-items: center; justify-content: center; color: white;">↑</button>
                            </div>
                            
                            <div style="display: flex; gap: 16px;">
                                <button style="background-color: #1a1a1a; border: 1px solid #333; color: #fff; padding: 12px 20px; border-radius: 24px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                    <span>🖼️</span><span>Create Images</span>
                                </button>
                                <button style="background-color: #1a1a1a; border: 1px solid #333; color: #fff; padding: 12px 20px; border-radius: 24px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                    <span>✏️</span><span>Edit Image</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Other Pages -->
                    <div class="x-page-content" id="x-notifications">
                        <div style="padding: 20px;">
                            <h2 style="color: #fff;">Notifications</h2>
                            <p style="color: #71767b;">Your notifications will appear here.</p>
                        </div>
                    </div>
                    
                    <div class="x-page-content" id="x-premium">
                        <div style="padding: 20px;">
                            <h2 style="color: #fff;">Premium</h2>
                            <p style="color: #71767b;">Upgrade to Premium for enhanced features.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class UltimateProductivitySuite {
            constructor() {
                this.currentPage = 'tasks';
                this.tasks = this.loadData('tasks', []);
                this.notes = this.loadData('notes', []);
                this.bookmarks = this.loadData('bookmarks', []);
                this.recipes = this.loadData('recipes', []);
                this.quotes = this.loadData('quotes', []);
                this.contacts = this.loadData('contacts', []);
                this.cryptoPrices = [];
                this.prompts = this.loadData('prompts', []);
                this.projects = this.loadData('projects', []);
                
                // Task-related properties
                this.currentCategory = 'all';
                this.currentFilter = 'all';
                this.editingTask = null;
                this.showingSubtasks = {};
                
                // Clock properties
                this.timer = null;
                this.stopwatch = null;
                this.timerTime = 0;
                this.stopwatchTime = 0;
                this.timerRunning = false;
                this.stopwatchRunning = false;
                this.lapTimes = [];
                
                // Crypto properties
                this.cryptoRefreshInterval = null;
                this.lastCryptoUpdate = 0;
                
                // Prompts properties
                this.currentPromptFilter = 'all';
                this.editingPrompt = null;
                
                // Projects properties
                this.currentProjectStatusFilter = 'all';
                this.currentProjectPriorityFilter = 'all';
                this.editingProject = null;
                
                // Gallery properties
                this.galleryImages = [];
                this.filteredImages = [];
                this.currentGalleryView = 'grid';
                this.currentGallerySize = 'medium';
                this.currentGalleryFilter = 'all';
                this.gallerySearchTerm = '';
                this.currentGalleryPage = 1;
                this.galleryImagesPerPage = 50;
                this.currentModalImageIndex = -1;
                
                // Prompt Generator properties
                this.savedEnhancedPrompts = this.loadData('enhancedPrompts', []);
                this.promptTemplates = {
                    logo: "Create a modern and professional logo for a [BUSINESS TYPE] business named '[BUSINESS NAME]'. The logo should be clean, memorable, and work well in both color and black/white versions.",
                    content: "Write compelling [CONTENT TYPE] content about [TOPIC] for [TARGET AUDIENCE]. The tone should be [TONE] and the content should be [LENGTH] words long.",
                    code: "Generate clean, well-commented [PROGRAMMING LANGUAGE] code that [FUNCTIONALITY]. Include proper error handling and follow best practices.",
                    email: "Write a [EMAIL TYPE] email to [RECIPIENT] about [SUBJECT]. The tone should be [TONE] and include a clear call to action.",
                    social: "Create engaging social media content for [PLATFORM] about [TOPIC]. Include relevant hashtags and make it shareable for [TARGET AUDIENCE].",
                    analysis: "Analyze the following data/information about [TOPIC] and provide insights on [SPECIFIC ASPECT]. Include charts or visualizations if helpful."
                };

                // Habit Tracker properties
                this.habits = this.loadData('habits', []);
                this.habitCompletions = this.loadData('habitCompletions', {});
                this.currentViewDate = new Date();
                this.selectedDate = null;
                this.selectedHabitColor = '#66bb6a';
                
                // Stock Tracker properties
                this.stockLevels = this.loadData('stockLevels', {
                    cc: 0, jd: 0, redbull: 0, corona: 0, asahi: 0, cruisers: 0, 
                    cans196: 0, jimbeam: 0, vodka: 0, bourbon: 0, rum: 0, tequila: 0, gin: 0
                });
                
                // Gemini Image Generator properties
                this.geminiApiKey = 'AIzaSyDPQtBK3oPEb4z5JMfunP2FQpVMONrvris';
                this.geminiImages = this.loadData('geminiImages', []);
                this.currentEnhancedPrompt = null;
                this.galleryCurrentPage = 1;
                this.galleryItemsPerPage = 20;
                this.galleryViewMode = 'grid'; // 'grid' or 'list'
                this.galleryFilter = 'all';
                this.habitCategoryFilter = 'all';
                this.achievements = this.loadData('achievements', []);
                
                // Habit Timer properties
                this.currentHabitTimer = null;
                this.habitTimer = null;
                this.currentTimerModal = null;

                this.initializeApp();
            }

            initializeApp() {
                this.initializeSidebar();
                this.initializeTasks();
                this.initGame();
                this.initializeClock();
                this.initializeRecipes();
                this.initializeQuotes();
                this.initializeContacts();
                this.initializeCrypto();
                this.initializePrompts();
                this.initializeProjects();
                this.initializeRetro();
                this.initializeGeminiImageGen();
                this.initializeNotes();
                this.initializeChats();
                this.initializeWord();
                this.initializeImageGenerator();
                this.initializeCalculator();
                this.initializePromptGenerator();
                this.initializeHabitTracker();
                this.initializeTextSelection();
                this.renderCurrentPage();
            }

            initializeSidebar() {
                const toggle = document.getElementById('sidebarToggle');
                const sidebar = document.getElementById('sidebar');
                const mainContent = document.getElementById('mainContent');
                const navItems = document.querySelectorAll('.nav-item');

                toggle.addEventListener('click', () => {
                    sidebar.classList.toggle('open');
                    mainContent.classList.toggle('shifted');
                });

                document.addEventListener('click', (e) => {
                    if (window.innerWidth <= 768 && 
                        !sidebar.contains(e.target) && 
                        !toggle.contains(e.target) && 
                        sidebar.classList.contains('open')) {
                        sidebar.classList.remove('open');
                        mainContent.classList.remove('shifted');
                    }
                });

                navItems.forEach(item => {
                    item.addEventListener('click', () => {
                        const page = item.dataset.page;
                        this.switchPage(page);
                        navItems.forEach(nav => nav.classList.remove('active'));
                        item.classList.add('active');
                    });
                });
            }

            switchPage(page) {
                document.querySelectorAll('.content-area').forEach(area => {
                    area.classList.remove('active');
                });
                
                document.getElementById(`${page}-page`).classList.add('active');
                this.currentPage = page;
                
                if (page === 'clock') {
                    this.updateClocks();
                } else if (page === 'crypto') {
                    if (!this.cryptoPrices.length) {
                        this.loadCryptoPrices();
                    }
                } else if (page === 'retro') {
                    this.loadStockLevels();
                } else if (page === 'gallery') {
                    this.initializeGallery();
                } else if (page === 'gemini-image-gen') {
                    this.renderGeminiImageGrid();
                } else if (page === 'x-clone') {
                    this.initializeXClone();
                }
            }

            renderCurrentPage() {
                if (this.currentPage === 'tasks') {
                    this.renderTasks();
                } else if (this.currentPage === 'recipes') {
                    this.renderRecipes();
                } else if (this.currentPage === 'quotes') {
                    this.renderQuotes();
                } else if (this.currentPage === 'contacts') {
                    this.renderContacts();
                } else if (this.currentPage === 'crypto') {
                    this.renderCrypto();
                } else if (this.currentPage === 'ai-prompts') {
                    this.renderPrompts();
                } else if (this.currentPage === 'projects') {
                    this.renderProjects();
                } else if (this.currentPage === 'notes') {
                    this.renderNotes();
                }
            }

            // Task Management with Sub-tasks
            initializeTasks() {
                const taskInput = document.getElementById('taskInput');
                const addBtn = document.getElementById('addBtn');
                const categoryTabs = document.getElementById('categoryTabs');
                const clearCompletedBtn = document.getElementById('clearCompleted');

                addBtn.addEventListener('click', () => this.addTask());
                taskInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.addTask();
                });
                
                categoryTabs.addEventListener('click', (e) => {
                    if (e.target.classList.contains('tab')) {
                        this.setCategory(e.target.dataset.category);
                    }
                });

                document.querySelector('.filter-controls').addEventListener('click', (e) => {
                    if (e.target.classList.contains('filter-btn')) {
                        this.setFilter(e.target.dataset.filter);
                    }
                });

                clearCompletedBtn.addEventListener('click', () => this.clearCompleted());
                
                this.renderTasks();
                this.updateCategoryTabs();
            }

            addTask() {
                const taskInput = document.getElementById('taskInput');
                const categorySelect = document.getElementById('categorySelect');
                const text = taskInput.value.trim();
                const category = categorySelect.value;
                
                if (!text) return;

                const task = {
                    id: Date.now(),
                    text,
                    category,
                    completed: false,
                    subtasks: [],
                    createdAt: new Date().toISOString()
                };
                
                this.tasks.push(task);
                taskInput.value = '';
                this.saveData('tasks', this.tasks);
                this.renderTasks();
                this.updateCategoryTabs();
            }

            addSubtask(taskId, subtaskText) {
                const task = this.tasks.find(t => t.id === taskId);
                if (task && subtaskText.trim()) {
                    const subtask = {
                        id: Date.now(),
                        text: subtaskText.trim(),
                        completed: false
                    };
                    task.subtasks.push(subtask);
                    this.saveData('tasks', this.tasks);
                    this.renderTasks();
                }
            }

            toggleSubtask(taskId, subtaskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (task) {
                    const subtask = task.subtasks.find(s => s.id === subtaskId);
                    if (subtask) {
                        subtask.completed = !subtask.completed;
                        this.saveData('tasks', this.tasks);
                        this.renderTasks();
                    }
                }
            }

            deleteSubtask(taskId, subtaskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (task) {
                    task.subtasks = task.subtasks.filter(s => s.id !== subtaskId);
                    this.saveData('tasks', this.tasks);
                    this.renderTasks();
                }
            }

            toggleTask(id) {
                const task = this.tasks.find(t => t.id === id);
                if (task) {
                    task.completed = !task.completed;
                    this.saveData('tasks', this.tasks);
                    this.renderTasks();
                }
            }

            deleteTask(id) {
                this.tasks = this.tasks.filter(t => t.id !== id);
                this.saveData('tasks', this.tasks);
                this.renderTasks();
                this.updateCategoryTabs();
            }

            setCategory(category) {
                this.currentCategory = category;
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.toggle('active', tab.dataset.category === category);
                });
                this.renderTasks();
            }

            setFilter(filter) {
                this.currentFilter = filter;
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.filter === filter);
                });
                this.renderTasks();
            }

            clearCompleted() {
                this.tasks = this.tasks.filter(task => !task.completed);
                this.saveData('tasks', this.tasks);
                this.renderTasks();
                this.updateCategoryTabs();
            }

            getFilteredTasks() {
                let filtered = this.tasks;

                if (this.currentCategory !== 'all') {
                    filtered = filtered.filter(task => task.category === this.currentCategory);
                }

                if (this.currentFilter === 'pending') {
                    filtered = filtered.filter(task => !task.completed);
                } else if (this.currentFilter === 'completed') {
                    filtered = filtered.filter(task => task.completed);
                }

                return filtered;
            }

            updateStats() {
                const total = this.tasks.length;
                const completed = this.tasks.filter(task => task.completed).length;
                const remaining = total - completed;
                const progress = total > 0 ? (completed / total) * 100 : 0;

                document.getElementById('totalTasks').textContent = total;
                document.getElementById('completedTasks').textContent = completed;
                document.getElementById('remainingTasks').textContent = remaining;
                document.getElementById('progressFill').style.width = `${progress}%`;
            }

            updateCategoryTabs() {
                const categories = [...new Set(this.tasks.map(task => task.category))];
                const categoryTabs = document.getElementById('categoryTabs');
                const existingTabs = categoryTabs.querySelectorAll('.tab:not([data-category="all"])');
                
                existingTabs.forEach(tab => {
                    if (!categories.includes(tab.dataset.category)) {
                        tab.remove();
                    }
                });

                categories.forEach(category => {
                    if (!categoryTabs.querySelector(`[data-category="${category}"]`)) {
                        const tab = document.createElement('button');
                        tab.className = 'tab';
                        tab.dataset.category = category;
                        tab.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                        categoryTabs.appendChild(tab);
                    }
                });
            }

            renderTasks() {
                const filteredTasks = this.getFilteredTasks();
                const tasksContainer = document.getElementById('tasksContainer');
                const emptyState = document.getElementById('emptyState');
                
                if (filteredTasks.length === 0) {
                    emptyState.style.display = 'block';
                } else {
                    emptyState.style.display = 'none';
                }

                const tasksHTML = filteredTasks.map(task => this.createTaskHTML(task)).join('');
                tasksContainer.innerHTML = tasksHTML + emptyState.outerHTML;

                // Bind events for tasks
                filteredTasks.forEach(task => {
                    const taskEl = tasksContainer.querySelector(`[data-task-id="${task.id}"]`);
                    if (taskEl) {
                        taskEl.querySelector('.task-checkbox').addEventListener('click', () => this.toggleTask(task.id));
                        taskEl.querySelector('.delete-btn')?.addEventListener('click', () => this.deleteTask(task.id));
                        taskEl.querySelector('.add-subtask-btn')?.addEventListener('click', () => this.toggleSubtaskForm(task.id));
                        
                        const subtaskForm = taskEl.querySelector('.add-subtask-form');
                        if (subtaskForm) {
                            const input = subtaskForm.querySelector('.subtask-input');
                            const addBtn = subtaskForm.querySelector('.subtask-add-btn');
                            
                            addBtn.addEventListener('click', () => {
                                this.addSubtask(task.id, input.value);
                                input.value = '';
                            });
                            
                            input.addEventListener('keypress', (e) => {
                                if (e.key === 'Enter') {
                                    this.addSubtask(task.id, input.value);
                                    input.value = '';
                                }
                            });
                        }

                        // Bind subtask events
                        task.subtasks.forEach(subtask => {
                            const subtaskEl = taskEl.querySelector(`[data-subtask-id="${subtask.id}"]`);
                            if (subtaskEl) {
                                subtaskEl.querySelector('.subtask-checkbox').addEventListener('click', () => this.toggleSubtask(task.id, subtask.id));
                                subtaskEl.querySelector('.delete-subtask-btn')?.addEventListener('click', () => this.deleteSubtask(task.id, subtask.id));
                            }
                        });
                    }
                });

                this.updateStats();
            }

            createTaskHTML(task) {
                const subtasksVisible = this.showingSubtasks[task.id] || false;
                const subtasksHTML = task.subtasks.map(subtask => `
                    <div class="subtask-item" data-subtask-id="${subtask.id}">
                        <div class="subtask-checkbox ${subtask.completed ? 'checked' : ''}">
                            ${subtask.completed ? '✓' : ''}
                        </div>
                        <div class="subtask-text ${subtask.completed ? 'completed' : ''}">${subtask.text}</div>
                        <button class="action-btn delete-subtask-btn" title="Delete Subtask" style="width: 25px; height: 25px; font-size: 12px;">🗑️</button>
                    </div>
                `).join('');

                return `
                    <div class="task-item ${task.completed ? 'completed' : ''}" data-task-id="${task.id}">
                        <div class="task-main">
                            <div class="task-checkbox ${task.completed ? 'checked' : ''}">
                                ${task.completed ? '✓' : ''}
                            </div>
                            <div class="task-text ${task.completed ? 'completed' : ''}">${task.text}</div>
                            <div class="task-category">${task.category}</div>
                            <div class="task-actions">
                                <button class="action-btn add-subtask-btn" title="Add Subtask">➕</button>
                                <button class="action-btn delete-btn" title="Delete">🗑️</button>
                            </div>
                        </div>
                        ${task.subtasks.length > 0 || subtasksVisible ? `
                            <div class="subtasks">
                                ${subtasksHTML}
                                <div class="add-subtask-form" style="display: ${subtasksVisible ? 'flex' : 'none'};">
                                    <input type="text" class="subtask-input" placeholder="Add a subtask...">
                                    <button class="subtask-add-btn">Add</button>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
            }

            toggleSubtaskForm(taskId) {
                this.showingSubtasks[taskId] = !this.showingSubtasks[taskId];
                this.renderTasks();
            }

            // Clock & Timer Management
            initializeClock() {
                // Timer controls
                document.getElementById('startTimer').addEventListener('click', () => this.startTimer());
                document.getElementById('pauseTimer').addEventListener('click', () => this.pauseTimer());
                document.getElementById('resetTimer').addEventListener('click', () => this.resetTimer());
                
                // Stopwatch controls
                document.getElementById('startStopwatch').addEventListener('click', () => this.startStopwatch());
                document.getElementById('pauseStopwatch').addEventListener('click', () => this.pauseStopwatch());
                document.getElementById('resetStopwatch').addEventListener('click', () => this.resetStopwatch());
                document.getElementById('lapStopwatch').addEventListener('click', () => this.lapStopwatch());

                this.updateClocks();
                setInterval(() => this.updateClocks(), 1000);
            }

            updateClocks() {
                const now = new Date();
                
                // Current time
                document.getElementById('currentTime').textContent = now.toLocaleTimeString();
                document.getElementById('currentDate').textContent = now.toLocaleDateString();
                
                // Melbourne time
                const melbourneTime = new Date(now.toLocaleString("en-US", {timeZone: "Australia/Melbourne"}));
                document.getElementById('melbourneTime').textContent = melbourneTime.toLocaleTimeString();
                document.getElementById('melbourneDate').textContent = melbourneTime.toLocaleDateString();
            }

            startTimer() {
                if (this.timerTime === 0) {
                    const minutes = parseInt(document.getElementById('timerMinutes').value) || 0;
                    this.timerTime = minutes * 60;
                }
                
                if (this.timerTime > 0 && !this.timerRunning) {
                    this.timerRunning = true;
                    this.timer = setInterval(() => {
                        this.timerTime--;
                        this.updateTimerDisplay();
                        
                        if (this.timerTime <= 0) {
                            this.pauseTimer();
                            alert('Timer finished!');
                        }
                    }, 1000);
                }
            }

            pauseTimer() {
                this.timerRunning = false;
                if (this.timer) {
                    clearInterval(this.timer);
                    this.timer = null;
                }
            }

            resetTimer() {
                this.pauseTimer();
                this.timerTime = 0;
                this.updateTimerDisplay();
            }

            updateTimerDisplay() {
                const hours = Math.floor(this.timerTime / 3600);
                const minutes = Math.floor((this.timerTime % 3600) / 60);
                const seconds = this.timerTime % 60;
                
                document.getElementById('timerDisplay').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }

            startStopwatch() {
                if (!this.stopwatchRunning) {
                    this.stopwatchRunning = true;
                    this.stopwatch = setInterval(() => {
                        this.stopwatchTime++;
                        this.updateStopwatchDisplay();
                    }, 1000);
                }
            }

            pauseStopwatch() {
                this.stopwatchRunning = false;
                if (this.stopwatch) {
                    clearInterval(this.stopwatch);
                    this.stopwatch = null;
                }
            }

            resetStopwatch() {
                this.pauseStopwatch();
                this.stopwatchTime = 0;
                this.lapTimes = [];
                this.updateStopwatchDisplay();
                document.getElementById('lapTimes').innerHTML = '';
            }

            lapStopwatch() {
                if (this.stopwatchRunning) {
                    this.lapTimes.push(this.stopwatchTime);
                    const lapTime = this.formatTime(this.stopwatchTime);
                    const lapDiv = document.createElement('div');
                    lapDiv.style.cssText = 'padding: 5px; color: rgba(255,255,255,0.8); font-size: 0.9rem;';
                    lapDiv.textContent = `Lap ${this.lapTimes.length}: ${lapTime}`;
                    document.getElementById('lapTimes').appendChild(lapDiv);
                }
            }

            updateStopwatchDisplay() {
                document.getElementById('stopwatchDisplay').textContent = this.formatTime(this.stopwatchTime);
            }

            formatTime(totalSeconds) {
                const hours = Math.floor(totalSeconds / 3600);
                const minutes = Math.floor((totalSeconds % 3600) / 60);
                const seconds = totalSeconds % 60;
                
                return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }

            // Recipe Management
            initializeRecipes() {
                document.getElementById('addRecipe').addEventListener('click', () => {
                    this.addRecipe();
                });
            }

            addRecipe() {
                const name = document.getElementById('recipeName').value.trim();
                const cuisine = document.getElementById('cuisineType').value;
                const cookingTime = document.getElementById('cookingTime').value;
                const servings = document.getElementById('servings').value;
                const ingredients = document.getElementById('recipeIngredients').value.trim();
                const instructions = document.getElementById('recipeInstructions').value.trim();
                
                if (!name || !ingredients || !instructions) return;

                const recipe = {
                    id: Date.now(),
                    name,
                    cuisine,
                    cookingTime: parseInt(cookingTime) || 0,
                    servings: parseInt(servings) || 1,
                    ingredients: ingredients.split('\n').filter(i => i.trim()),
                    instructions: instructions.split('\n').filter(i => i.trim()),
                    createdAt: new Date().toISOString()
                };

                this.recipes.unshift(recipe);
                this.saveData('recipes', this.recipes);
                
                // Clear form
                document.getElementById('recipeName').value = '';
                document.getElementById('cookingTime').value = '';
                document.getElementById('servings').value = '';
                document.getElementById('recipeIngredients').value = '';
                document.getElementById('recipeInstructions').value = '';
                
                this.renderRecipes();
            }

            deleteRecipe(id) {
                this.recipes = this.recipes.filter(recipe => recipe.id !== id);
                this.saveData('recipes', this.recipes);
                this.renderRecipes();
            }

            renderRecipes() {
                const grid = document.getElementById('recipeGrid');
                
                if (this.recipes.length === 0) {
                    grid.innerHTML = `
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">🍽️</div>
                            <h3>No recipes yet!</h3>
                            <p>Add your first recipe above.</p>
                        </div>
                    `;
                    return;
                }

                grid.innerHTML = this.recipes.map(recipe => `
                    <div class="recipe-card">
                        <div class="recipe-title">${recipe.name}</div>
                        <div class="recipe-meta">
                            ${recipe.cuisine} • ${recipe.cookingTime} min • ${recipe.servings} servings
                        </div>
                        <div class="ingredients">
                            <h4>Ingredients:</h4>
                            <ul>
                                ${recipe.ingredients.map(ingredient => `<li>${ingredient}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="instructions">
                            <h4>Instructions:</h4>
                            <ol>
                                ${recipe.instructions.map(instruction => `<li>${instruction}</li>`).join('')}
                            </ol>
                        </div>
                        <div class="task-actions" style="margin-top: 15px; justify-content: center;">
                            <button class="action-btn delete-btn" onclick="app.deleteRecipe(${recipe.id})" title="Delete">🗑️</button>
                        </div>
                    </div>
                `).join('');
            }

            // Quotes Management
            initializeQuotes() {
                document.getElementById('addQuote').addEventListener('click', () => {
                    this.addQuote();
                });
            }

            addQuote() {
                const text = document.getElementById('quoteText').value.trim();
                const author = document.getElementById('quoteAuthor').value.trim();
                const category = document.getElementById('quoteCategory').value;
                
                if (!text || !author) return;

                const quote = {
                    id: Date.now(),
                    text,
                    author,
                    category,
                    createdAt: new Date().toISOString()
                };

                this.quotes.unshift(quote);
                this.saveData('quotes', this.quotes);
                
                // Clear form
                document.getElementById('quoteText').value = '';
                document.getElementById('quoteAuthor').value = '';
                
                this.renderQuotes();
            }

            deleteQuote(id) {
                this.quotes = this.quotes.filter(quote => quote.id !== id);
                this.saveData('quotes', this.quotes);
                this.renderQuotes();
            }

            renderQuotes() {
                const grid = document.getElementById('quotesGrid');
                
                if (this.quotes.length === 0) {
                    grid.innerHTML = `
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">💭</div>
                            <h3>No quotes yet!</h3>
                            <p>Add your first inspirational quote above.</p>
                        </div>
                    `;
                    return;
                }

                grid.innerHTML = this.quotes.map(quote => `
                    <div class="quote-card">
                        <div class="quote-text">"${quote.text}"</div>
                        <div class="quote-author">— ${quote.author}</div>
                        <div class="task-category" style="margin: 15px 0 10px 0;">${quote.category}</div>
                        <div class="task-actions" style="justify-content: center;">
                            <button class="action-btn delete-btn" onclick="app.deleteQuote(${quote.id})" title="Delete">🗑️</button>
                        </div>
                    </div>
                `).join('');
            }

            // Contacts Management
            initializeContacts() {
                document.getElementById('addContact').addEventListener('click', () => {
                    this.addContact();
                });
            }

            addContact() {
                const name = document.getElementById('contactName').value.trim();
                const email = document.getElementById('contactEmail').value.trim();
                const phone = document.getElementById('contactPhone').value.trim();
                const company = document.getElementById('contactCompany').value.trim();
                const category = document.getElementById('contactCategory').value;
                const notes = document.getElementById('contactNotes').value.trim();
                
                if (!name) return;

                const contact = {
                    id: Date.now(),
                    name,
                    email,
                    phone,
                    company,
                    category,
                    notes,
                    createdAt: new Date().toISOString()
                };

                this.contacts.unshift(contact);
                this.saveData('contacts', this.contacts);
                
                // Clear form
                document.getElementById('contactName').value = '';
                document.getElementById('contactEmail').value = '';
                document.getElementById('contactPhone').value = '';
                document.getElementById('contactCompany').value = '';
                document.getElementById('contactNotes').value = '';
                
                this.renderContacts();
            }

            deleteContact(id) {
                this.contacts = this.contacts.filter(contact => contact.id !== id);
                this.saveData('contacts', this.contacts);
                this.renderContacts();
            }

            renderContacts() {
                const grid = document.getElementById('contactsGrid');
                
                if (this.contacts.length === 0) {
                    grid.innerHTML = `
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">📇</div>
                            <h3>No contacts yet!</h3>
                            <p>Add your first contact above.</p>
                        </div>
                    `;
                    return;
                }

                grid.innerHTML = this.contacts.map(contact => `
                    <div class="contact-card">
                        <div class="contact-name">${contact.name}</div>
                        <div class="contact-info">
                            ${contact.email ? `📧 ${contact.email}<br>` : ''}
                            ${contact.phone ? `📱 ${contact.phone}<br>` : ''}
                            ${contact.company ? `🏢 ${contact.company}<br>` : ''}
                        </div>
                        <div class="task-category" style="margin: 10px 0;">${contact.category}</div>
                        ${contact.notes ? `<div class="contact-notes" style="margin: 10px 0; font-size: 0.9rem; color: rgba(255,255,255,0.8);">${contact.notes}</div>` : ''}
                        <div class="task-actions" style="justify-content: center; margin-top: 15px;">
                            ${contact.email ? `<a href="mailto:${contact.email}" class="action-btn" style="background: rgba(255,255,255,0.15); text-decoration: none;" title="Email">📧</a>` : ''}
                            ${contact.phone ? `<a href="tel:${contact.phone}" class="action-btn" style="background: rgba(255,255,255,0.15); text-decoration: none;" title="Call">📱</a>` : ''}
                            <button class="action-btn delete-btn" onclick="app.deleteContact(${contact.id})" title="Delete">🗑️</button>
                        </div>
                    </div>
                `).join('');
            }

            // Crypto Management
            initializeCrypto() {
                document.getElementById('refreshCrypto').addEventListener('click', () => {
                    this.loadCryptoPrices();
                });
            }

            async loadCryptoPrices() {
                const loadingEl = document.getElementById('cryptoLoading');
                const gridEl = document.getElementById('cryptoGrid');
                
                loadingEl.style.display = 'block';
                gridEl.style.display = 'none';
                
                try {
                    // Using CoinGecko free API
                    const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,cardano,polkadot,chainlink,litecoin,stellar,dogecoin,solana,polygon&vs_currencies=usd&include_24hr_change=true&include_market_cap=true');
                    
                    if (!response.ok) throw new Error('Failed to fetch crypto prices');
                    
                    const data = await response.json();
                    
                    const cryptoData = [
                        { id: 'bitcoin', name: 'Bitcoin', symbol: 'BTC', icon: '₿' },
                        { id: 'ethereum', name: 'Ethereum', symbol: 'ETH', icon: 'Ξ' },
                        { id: 'cardano', name: 'Cardano', symbol: 'ADA', icon: '₳' },
                        { id: 'polkadot', name: 'Polkadot', symbol: 'DOT', icon: '●' },
                        { id: 'chainlink', name: 'Chainlink', symbol: 'LINK', icon: '🔗' },
                        { id: 'litecoin', name: 'Litecoin', symbol: 'LTC', icon: 'Ł' },
                        { id: 'stellar', name: 'Stellar', symbol: 'XLM', icon: '*' },
                        { id: 'dogecoin', name: 'Dogecoin', symbol: 'DOGE', icon: '🐕' },
                        { id: 'solana', name: 'Solana', symbol: 'SOL', icon: '◎' },
                        { id: 'polygon', name: 'Polygon', symbol: 'MATIC', icon: '♦' }
                    ];
                    
                    this.cryptoPrices = cryptoData.map(crypto => ({
                        ...crypto,
                        price: data[crypto.id]?.usd || 0,
                        change: data[crypto.id]?.usd_24h_change || 0,
                        marketCap: data[crypto.id]?.usd_market_cap || 0
                    }));
                    
                    this.lastCryptoUpdate = Date.now();
                    this.renderCrypto();
                    this.showToast('Crypto prices updated successfully!');
                    
                } catch (error) {
                    console.error('Error loading crypto prices:', error);
                    this.showToast('Failed to load crypto prices. Please try again.', 'error');
                } finally {
                    loadingEl.style.display = 'none';
                    gridEl.style.display = 'grid';
                }
            }

            renderCrypto() {
                const grid = document.getElementById('cryptoGrid');
                
                if (this.cryptoPrices.length === 0) {
                    grid.innerHTML = `
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">₿</div>
                            <h3>Loading crypto prices...</h3>
                            <p>Click refresh to load latest prices.</p>
                        </div>
                    `;
                    return;
                }

                const lastUpdateText = this.lastCryptoUpdate ? 
                    `Last updated: ${new Date(this.lastCryptoUpdate).toLocaleTimeString()}` : '';

                grid.innerHTML = this.cryptoPrices.map(crypto => `
                    <div class="crypto-card">
                        <div class="crypto-name">${crypto.icon} ${crypto.name}</div>
                        <div class="crypto-symbol">${crypto.symbol}</div>
                        <div class="crypto-price">$${crypto.price.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: crypto.price < 1 ? 6 : 2})}</div>
                        <div class="crypto-change ${crypto.change >= 0 ? 'positive' : 'negative'}">
                            ${crypto.change >= 0 ? '↗' : '↘'} ${crypto.change.toFixed(2)}%
                        </div>
                        ${crypto.marketCap > 0 ? `<div style="font-size: 0.8rem; color: rgba(255,255,255,0.6); margin-top: 10px;">
                            Market Cap: $${(crypto.marketCap / 1e9).toFixed(1)}B
                        </div>` : ''}
                    </div>
                `).join('');
                
                if (lastUpdateText) {
                    grid.insertAdjacentHTML('beforebegin', `
                        <div style="text-align: center; margin-bottom: 15px; color: rgba(255,255,255,0.7); font-size: 0.9rem;">
                            ${lastUpdateText}
                        </div>
                    `);
                }
            }

            // AI Prompts Management
            initializePrompts() {
                document.getElementById('addPrompt').addEventListener('click', () => {
                    if (this.editingPrompt) {
                        this.updatePrompt();
                    } else {
                        this.addPrompt();
                    }
                });

                document.getElementById('promptSearch').addEventListener('input', (e) => {
                    this.filterPrompts();
                });

                document.getElementById('promptFilter').addEventListener('change', (e) => {
                    this.currentPromptFilter = e.target.value;
                    this.filterPrompts();
                });
            }

            addPrompt() {
                if (this.editingPrompt) {
                    this.updatePrompt();
                    return;
                }

                const title = document.getElementById('promptTitle').value.trim();
                const category = document.getElementById('promptCategory').value;
                const text = document.getElementById('promptText').value.trim();
                const description = document.getElementById('promptDescription').value.trim();
                
                if (!title || !text) {
                    this.showToast('Please fill in title and prompt text.', 'error');
                    return;
                }

                const prompt = {
                    id: Date.now(),
                    title,
                    category,
                    text,
                    description,
                    createdAt: new Date().toISOString()
                };

                this.prompts.unshift(prompt);
                this.saveData('prompts', this.prompts);
                
                // Clear form
                this.clearPromptForm();
                
                this.renderPrompts();
                this.showToast('Prompt added successfully!');
            }

            clearPromptForm() {
                document.getElementById('promptTitle').value = '';
                document.getElementById('promptText').value = '';
                document.getElementById('promptDescription').value = '';
                this.editingPrompt = null;
                document.getElementById('addPrompt').textContent = 'Add Prompt';
            }

            editPrompt(id) {
                const prompt = this.prompts.find(p => p.id === id);
                if (!prompt) return;

                document.getElementById('promptTitle').value = prompt.title;
                document.getElementById('promptCategory').value = prompt.category;
                document.getElementById('promptText').value = prompt.text;
                document.getElementById('promptDescription').value = prompt.description || '';
                
                this.editingPrompt = id;
                document.getElementById('addPrompt').textContent = 'Update Prompt';
                
                // Scroll to form
                document.querySelector('#ai-prompts-page .content-card').scrollIntoView({ behavior: 'smooth' });
            }

            updatePrompt() {
                if (!this.editingPrompt) return;

                const title = document.getElementById('promptTitle').value.trim();
                const category = document.getElementById('promptCategory').value;
                const text = document.getElementById('promptText').value.trim();
                const description = document.getElementById('promptDescription').value.trim();
                
                if (!title || !text) {
                    this.showToast('Please fill in title and prompt text.', 'error');
                    return;
                }

                const promptIndex = this.prompts.findIndex(p => p.id === this.editingPrompt);
                if (promptIndex !== -1) {
                    this.prompts[promptIndex] = {
                        ...this.prompts[promptIndex],
                        title,
                        category,
                        text,
                        description,
                        updatedAt: new Date().toISOString()
                    };
                    
                    this.saveData('prompts', this.prompts);
                    this.renderPrompts();
                    this.showToast('Prompt updated successfully!');
                    
                    // Reset form
                    this.clearPromptForm();
                }
            }

            deletePrompt(id) {
                if (confirm('Are you sure you want to delete this prompt?')) {
                    this.prompts = this.prompts.filter(prompt => prompt.id !== id);
                    this.saveData('prompts', this.prompts);
                    this.renderPrompts();
                    this.showToast('Prompt deleted successfully!');
                }
            }

            copyPromptToClipboard(text) {
                navigator.clipboard.writeText(text).then(() => {
                    this.showToast('Prompt copied to clipboard!');
                }).catch(() => {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    this.showToast('Prompt copied to clipboard!');
                });
            }

            filterPrompts() {
                this.renderPrompts();
            }

            getFilteredPrompts() {
                let filtered = this.prompts;
                
                // Filter by category
                if (this.currentPromptFilter !== 'all') {
                    filtered = filtered.filter(prompt => prompt.category === this.currentPromptFilter);
                }
                
                // Filter by search
                const searchTerm = document.getElementById('promptSearch').value.toLowerCase();
                if (searchTerm) {
                    filtered = filtered.filter(prompt => 
                        prompt.title.toLowerCase().includes(searchTerm) ||
                        prompt.text.toLowerCase().includes(searchTerm) ||
                        prompt.description.toLowerCase().includes(searchTerm)
                    );
                }
                
                return filtered;
            }

            renderPrompts() {
                const filteredPrompts = this.getFilteredPrompts();
                const grid = document.getElementById('promptsGrid');
                
                if (filteredPrompts.length === 0) {
                    grid.innerHTML = `
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">🤖</div>
                            <h3>No prompts found!</h3>
                            <p>${this.prompts.length === 0 ? 'Add your first AI prompt above.' : 'Try adjusting your search or filter.'}</p>
                        </div>
                    `;
                    return;
                }

                grid.innerHTML = filteredPrompts.map(prompt => `
                    <div class="prompt-card">
                        <div class="prompt-title">${prompt.title}</div>
                        <div class="task-category" style="margin-bottom: 15px;">${prompt.category}</div>
                        ${prompt.description ? `<div style="font-size: 0.9rem; color: rgba(255,255,255,0.8); margin-bottom: 15px; font-style: italic;">${prompt.description}</div>` : ''}
                        <div class="prompt-text">${prompt.text}</div>
                        <div class="prompt-actions">
                            <button class="action-btn copy-btn" onclick="app.copyPromptToClipboard(\`${prompt.text.replace(/`/g, '\\`')}\`)" title="Copy to Clipboard">📋</button>
                            <button class="action-btn edit-btn" onclick="app.editPrompt(${prompt.id})" title="Edit">✏️</button>
                            <button class="action-btn delete-btn" onclick="app.deletePrompt(${prompt.id})" title="Delete">🗑️</button>
                        </div>
                    </div>
                `).join('');
            }

            // Projects Management
            initializeProjects() {
                document.getElementById('addProject').addEventListener('click', () => {
                    if (this.editingProject) {
                        this.updateProject();
                    } else {
                        this.addProject();
                    }
                });

                document.getElementById('projectStatusFilter').addEventListener('change', (e) => {
                    this.currentProjectStatusFilter = e.target.value;
                    this.renderProjects();
                });

                document.getElementById('projectPriorityFilter').addEventListener('change', (e) => {
                    this.currentProjectPriorityFilter = e.target.value;
                    this.renderProjects();
                });

                // Update progress slider display
                document.getElementById('projectProgress').addEventListener('input', (e) => {
                    document.getElementById('progressValue').textContent = e.target.value + '%';
                });
            }

            initializeRetro() {
                // Add event listeners for target inputs to update stock summary
                const targetInputs = document.querySelectorAll('.target-input');
                targetInputs.forEach(input => {
                    input.addEventListener('input', () => {
                        this.updateStockSummary();
                    });
                });
            }

            addProject() {
                const name = document.getElementById('projectName').value.trim();
                const category = document.getElementById('projectCategory').value;
                const status = document.getElementById('projectStatus').value;
                const priority = document.getElementById('projectPriority').value;
                const dueDate = document.getElementById('projectDueDate').value;
                const progress = parseInt(document.getElementById('projectProgress').value);
                const description = document.getElementById('projectDescription').value.trim();
                
                if (!name) {
                    this.showToast('Please enter a project name.', 'error');
                    return;
                }

                const project = {
                    id: Date.now(),
                    name,
                    category,
                    status,
                    priority,
                    dueDate: dueDate || null,
                    progress,
                    description,
                    createdAt: new Date().toISOString()
                };

                this.projects.unshift(project);
                this.saveData('projects', this.projects);
                
                // Clear form
                this.clearProjectForm();
                
                this.renderProjects();
                this.showToast('Project added successfully!');
            }

            editProject(id) {
                const project = this.projects.find(p => p.id === id);
                if (!project) return;

                document.getElementById('projectName').value = project.name;
                document.getElementById('projectCategory').value = project.category;
                document.getElementById('projectStatus').value = project.status;
                document.getElementById('projectPriority').value = project.priority;
                document.getElementById('projectDueDate').value = project.dueDate || '';
                document.getElementById('projectProgress').value = project.progress;
                document.getElementById('progressValue').textContent = project.progress + '%';
                document.getElementById('projectDescription').value = project.description || '';
                
                this.editingProject = id;
                document.getElementById('addProject').textContent = 'Update Project';
                
                // Scroll to form
                document.querySelector('#projects-page .content-card').scrollIntoView({ behavior: 'smooth' });
            }

            updateProject() {
                if (!this.editingProject) return;

                const name = document.getElementById('projectName').value.trim();
                const category = document.getElementById('projectCategory').value;
                const status = document.getElementById('projectStatus').value;
                const priority = document.getElementById('projectPriority').value;
                const dueDate = document.getElementById('projectDueDate').value;
                const progress = parseInt(document.getElementById('projectProgress').value);
                const description = document.getElementById('projectDescription').value.trim();
                
                if (!name) {
                    this.showToast('Please enter a project name.', 'error');
                    return;
                }

                const projectIndex = this.projects.findIndex(p => p.id === this.editingProject);
                if (projectIndex !== -1) {
                    this.projects[projectIndex] = {
                        ...this.projects[projectIndex],
                        name,
                        category,
                        status,
                        priority,
                        dueDate: dueDate || null,
                        progress,
                        description,
                        updatedAt: new Date().toISOString()
                    };
                    
                    this.saveData('projects', this.projects);
                    this.renderProjects();
                    this.showToast('Project updated successfully!');
                    
                    // Reset form
                    this.editingProject = null;
                    document.getElementById('addProject').textContent = 'Add Project';
                    this.clearProjectForm();
                }
            }

            deleteProject(id) {
                if (confirm('Are you sure you want to delete this project?')) {
                    this.projects = this.projects.filter(project => project.id !== id);
                    this.saveData('projects', this.projects);
                    this.renderProjects();
                    this.showToast('Project deleted successfully!');
                }
            }

            clearProjectForm() {
                document.getElementById('projectName').value = '';
                document.getElementById('projectCategory').value = 'web-dev';
                document.getElementById('projectStatus').value = 'planning';
                document.getElementById('projectPriority').value = 'medium';
                document.getElementById('projectDueDate').value = '';
                document.getElementById('projectProgress').value = '0';
                document.getElementById('progressValue').textContent = '0%';
                document.getElementById('projectDescription').value = '';
            }

            getFilteredProjects() {
                let filtered = this.projects;
                
                // Filter by status
                if (this.currentProjectStatusFilter !== 'all') {
                    filtered = filtered.filter(project => project.status === this.currentProjectStatusFilter);
                }
                
                // Filter by priority
                if (this.currentProjectPriorityFilter !== 'all') {
                    filtered = filtered.filter(project => project.priority === this.currentProjectPriorityFilter);
                }
                
                return filtered;
            }

            formatProjectDueDate(dueDate) {
                if (!dueDate) return '';
                
                const due = new Date(dueDate);
                const now = new Date();
                const diffTime = due.getTime() - now.getTime();
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                let className = '';
                let prefix = 'Due: ';
                
                if (diffDays < 0) {
                    className = 'overdue';
                    prefix = 'Overdue: ';
                } else if (diffDays <= 7) {
                    className = 'due-soon';
                    prefix = 'Due soon: ';
                }
                
                return `<div class="project-due-date ${className}">${prefix}${due.toLocaleDateString()}</div>`;
            }

            renderProjects() {
                const filteredProjects = this.getFilteredProjects();
                const grid = document.getElementById('projectsGrid');
                
                if (filteredProjects.length === 0) {
                    grid.innerHTML = `
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">📋</div>
                            <h3>No projects found!</h3>
                            <p>${this.projects.length === 0 ? 'Add your first project above.' : 'Try adjusting your filters.'}</p>
                        </div>
                    `;
                    return;
                }

                grid.innerHTML = filteredProjects.map(project => `
                    <div class="project-card">
                        <div class="project-name">${project.name}</div>
                        <div class="project-meta">
                            <div class="project-status ${project.status}">${project.status.replace('-', ' ')}</div>
                            <div class="project-priority ${project.priority}">${project.priority}</div>
                        </div>
                        <div class="task-category" style="margin-bottom: 15px;">${project.category.replace('-', ' ')}</div>
                        ${project.description ? `<div class="project-description">${project.description}</div>` : ''}
                        <div class="project-progress">
                            <div class="project-progress-label">Progress: ${project.progress}%</div>
                            <div class="project-progress-bar">
                                <div class="project-progress-fill" style="width: ${project.progress}%"></div>
                            </div>
                        </div>
                        ${this.formatProjectDueDate(project.dueDate)}
                        <div class="project-actions">
                            <button class="action-btn edit-btn" onclick="app.editProject(${project.id})" title="Edit">✏️</button>
                            <button class="action-btn delete-btn" onclick="app.deleteProject(${project.id})" title="Delete">🗑️</button>
                        </div>
                    </div>
                `).join('');
            }

            // Notes Management
            initializeNotes() {
                document.getElementById('addNote').addEventListener('click', () => {
                    this.addNote();
                });

                // Filter buttons
                const notesFilterControls = document.querySelector('#notes-page .filter-controls');
                if (notesFilterControls) {
                    notesFilterControls.addEventListener('click', (e) => {
                        if (e.target.classList.contains('filter-btn')) {
                            this.currentNotesFilter = e.target.dataset.filter;
                            document.querySelectorAll('#notes-page .filter-btn').forEach(btn => {
                                btn.classList.toggle('active', btn.dataset.filter === this.currentNotesFilter);
                            });
                            this.renderNotes();
                        }
                    });
                }

                this.currentNotesFilter = 'all';
            }

            addNote() {
                const title = document.getElementById('noteTitle').value.trim();
                const category = document.getElementById('noteCategory').value;
                const content = document.getElementById('noteContent').value.trim();
                
                if (!title || !content) {
                    this.showToast('Please enter both title and content.', 'error');
                    return;
                }

                const note = {
                    id: Date.now(),
                    title,
                    category,
                    content,
                    createdAt: new Date().toISOString()
                };

                this.notes.unshift(note);
                this.saveData('notes', this.notes);
                
                // Clear form
                document.getElementById('noteTitle').value = '';
                document.getElementById('noteContent').value = '';
                
                this.renderNotes();
                this.showToast('Note saved successfully!');
            }

            addNoteFromSelection(text, title = null) {
                const note = {
                    id: Date.now(),
                    title: title || 'Chat Highlight',
                    category: 'highlights',
                    content: text,
                    createdAt: new Date().toISOString()
                };

                this.notes.unshift(note);
                this.saveData('notes', this.notes);
                this.showToast('Text saved as note!');
            }

            deleteNote(id) {
                if (confirm('Are you sure you want to delete this note?')) {
                    this.notes = this.notes.filter(note => note.id !== id);
                    this.saveData('notes', this.notes);
                    this.renderNotes();
                    this.showToast('Note deleted successfully!');
                }
            }

            getFilteredNotes() {
                if (this.currentNotesFilter === 'all') {
                    return this.notes;
                }
                return this.notes.filter(note => note.category === this.currentNotesFilter);
            }

            renderNotes() {
                const filteredNotes = this.getFilteredNotes();
                const grid = document.getElementById('notesGrid');
                
                if (filteredNotes.length === 0) {
                    grid.innerHTML = `
                        <div class="empty-state">
                            <div style="font-size: 3rem; margin-bottom: 15px;">📝</div>
                            <h3>No notes yet!</h3>
                            <p>Add your first note above or highlight text from chat messages.</p>
                        </div>
                    `;
                    return;
                }

                grid.innerHTML = filteredNotes.map(note => `
                    <div class="note-card">
                        <div class="note-title">${note.title}</div>
                        <div class="note-meta">
                            <span class="task-category" style="display: inline-block; margin-right: 15px;">${note.category}</span>
                            <span>${new Date(note.createdAt).toLocaleDateString()}</span>
                        </div>
                        <div class="note-content">${note.content.length > 200 ? note.content.substring(0, 200) + '...' : note.content}</div>
                        <div class="note-actions">
                            <button class="action-btn delete-btn" onclick="app.deleteNote(${note.id})" title="Delete">🗑️</button>
                        </div>
                    </div>
                `).join('');
            }

            // Chat Management
            initializeChats() {
                // Claude Chat
                const claudeSendBtn = document.getElementById('claudeSendBtn');
                const claudeChatInput = document.getElementById('claudeChatInput');

                claudeSendBtn.addEventListener('click', () => {
                    this.sendClaudeMessage();
                });

                claudeChatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendClaudeMessage();
                    }
                });

                // Gemini Chat
                const geminiSendBtn = document.getElementById('geminiSendBtn');
                const geminiChatInput = document.getElementById('geminiChatInput');

                geminiSendBtn.addEventListener('click', () => {
                    this.sendGeminiMessage();
                });

                geminiChatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendGeminiMessage();
                    }
                });

                // Load existing chats
                this.claudeChats = this.loadData('claudeChats', []);
                this.geminiChats = this.loadData('geminiChats', []);
            }

            sendClaudeMessage() {
                const input = document.getElementById('claudeChatInput');
                const message = input.value.trim();
                
                if (!message) return;

                // Add user message
                this.addMessageToChat('claude', message, 'user');
                input.value = '';

                // Simulate Claude response (since we don't have real API access)
                setTimeout(() => {
                    const responses = [
                        "I understand you'd like to discuss that topic. As a simulated Claude, I can provide thoughtful responses on a wide range of subjects.",
                        "That's an interesting question! While this is a demo version, I'm here to help with information, creative tasks, analysis, and more.",
                        "I appreciate you sharing that with me. In a real implementation, I would provide detailed, helpful responses tailored to your specific needs.",
                        "Thank you for your message! This simulated version demonstrates how the chat interface would work with the actual Claude API.",
                        "I'd be happy to help with that! This demo shows the chat functionality - the real version would connect to Claude's API for authentic responses."
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    this.addMessageToChat('claude', randomResponse, 'assistant');
                }, 1000);
            }

            async sendGeminiMessage(imageData = null) {
                const input = document.getElementById('geminiChatInput');
                const message = input.value.trim();
                
                if (!message && !imageData) return;

                // Add user message
                if (imageData) {
                    this.addMessageToChat('gemini', '📸 Screenshot sent with message: ' + (message || 'Analyze this image'), 'user');
                } else {
                    this.addMessageToChat('gemini', message, 'user');
                }
                input.value = '';

                // Show loading
                const loadingId = this.addMessageToChat('gemini', 'Thinking...', 'assistant', true);

                try {
                    // Prepare parts for the request
                    const parts = [];
                    
                    if (message) {
                        parts.push({ text: message });
                    }
                    
                    if (imageData) {
                        parts.push({
                            inline_data: {
                                mime_type: "image/png",
                                data: imageData
                            }
                        });
                        
                        // Add default prompt if no message
                        if (!message) {
                            parts.unshift({ text: "Please analyze this screenshot and describe what you see." });
                        }
                    }

                    // Use Google Gemini API with vision support
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=AIzaSyANM-sfgaGhQJgH2HQrR1ZErkEUS3vRcB0`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: parts
                            }]
                        })
                    });

                    if (!response.ok) {
                        throw new Error('Failed to get response from Gemini API');
                    }

                    const data = await response.json();
                    const aiResponse = data.candidates[0]?.content?.parts[0]?.text || 'Sorry, I could not generate a response.';

                    // Remove loading message and add real response
                    this.removeMessageFromChat('gemini', loadingId);
                    this.addMessageToChat('gemini', aiResponse, 'assistant');

                } catch (error) {
                    console.error('Gemini API Error:', error);
                    this.removeMessageFromChat('gemini', loadingId);
                    this.addMessageToChat('gemini', 'Sorry, I encountered an error. Please try again later.', 'assistant');
                }
            }

            addMessageToChat(chatType, message, sender, isLoading = false) {
                const messagesContainer = document.getElementById(chatType === 'claude' ? 'claudeChatMessages' : 'geminiChatMessages');
                const messageId = Date.now() + Math.random();
                
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender} ${isLoading ? 'loading-message' : ''}`;
                messageDiv.setAttribute('data-message-id', messageId);
                messageDiv.innerHTML = `<p>${message}</p>`;
                
                messagesContainer.appendChild(messageDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;

                // Save to chat history (except loading messages)
                if (!isLoading) {
                    const chatHistory = chatType === 'claude' ? this.claudeChats : this.geminiChats;
                    chatHistory.push({
                        id: messageId,
                        message,
                        sender,
                        timestamp: new Date().toISOString()
                    });
                    this.saveData(chatType === 'claude' ? 'claudeChats' : 'geminiChats', chatHistory);
                }

                return messageId;
            }

            removeMessageFromChat(chatType, messageId) {
                const messagesContainer = document.getElementById(chatType === 'claude' ? 'claudeChatMessages' : 'geminiChatMessages');
                const messageElement = messagesContainer.querySelector(`[data-message-id="${messageId}"]`);
                if (messageElement) {
                    messageElement.remove();
                }
            }

            // Text Selection to Notes Feature
            // Word Processor functionality
            initializeWord() {
                const wordDocument = document.getElementById('wordDocument');
                
                // Toolbar event listeners
                document.getElementById('newDoc').addEventListener('click', () => this.newDocument());
                document.getElementById('saveDoc').addEventListener('click', () => this.saveDocument());
                document.getElementById('openDoc').addEventListener('click', () => this.openDocument());
                document.getElementById('printDoc').addEventListener('click', () => this.printDocument());
                
                // Formatting buttons
                document.getElementById('boldBtn').addEventListener('click', () => this.formatText('bold'));
                document.getElementById('italicBtn').addEventListener('click', () => this.formatText('italic'));
                document.getElementById('underlineBtn').addEventListener('click', () => this.formatText('underline'));
                document.getElementById('strikeBtn').addEventListener('click', () => this.formatText('strikeThrough'));
                
                // Font controls
                document.getElementById('fontFamily').addEventListener('change', (e) => this.changeFontFamily(e.target.value));
                document.getElementById('fontSize').addEventListener('change', (e) => this.changeFontSize(e.target.value));
                
                // Colors
                document.getElementById('fontColor').addEventListener('change', (e) => this.changeFontColor(e.target.value));
                document.getElementById('backgroundColor').addEventListener('change', (e) => this.changeBackgroundColor(e.target.value));
                
                // Alignment
                document.getElementById('alignLeft').addEventListener('click', () => this.alignText('left'));
                document.getElementById('alignCenter').addEventListener('click', () => this.alignText('center'));
                document.getElementById('alignRight').addEventListener('click', () => this.alignText('right'));
                document.getElementById('alignJustify').addEventListener('click', () => this.alignText('justify'));
                
                // Lists
                document.getElementById('bulletList').addEventListener('click', () => this.formatText('insertUnorderedList'));
                document.getElementById('numberList').addEventListener('click', () => this.formatText('insertOrderedList'));
                
                // Indent
                document.getElementById('indent').addEventListener('click', () => this.formatText('indent'));
                document.getElementById('outdent').addEventListener('click', () => this.formatText('outdent'));
                
                // Insert
                document.getElementById('insertTable').addEventListener('click', () => this.insertTable());
                document.getElementById('insertImage').addEventListener('click', () => this.insertImage());
                document.getElementById('insertLink').addEventListener('click', () => this.insertLink());
                
                // Document events
                wordDocument.addEventListener('input', () => this.updateWordCount());
                wordDocument.addEventListener('keyup', () => this.updateWordCount());
                wordDocument.addEventListener('paste', () => setTimeout(() => this.updateWordCount(), 100));
                
                // Load saved document
                this.loadSavedDocument();
                this.updateWordCount();
            }
            
            newDocument() {
                if (confirm('Create a new document? Any unsaved changes will be lost.')) {
                    document.getElementById('wordDocument').innerHTML = '<p>Start typing your document here...</p>';
                    this.updateWordCount();
                }
            }
            
            saveDocument() {
                const content = document.getElementById('wordDocument').innerHTML;
                const docName = prompt('Enter document name:', 'My Document') || 'My Document';
                
                // Save to localStorage
                const savedDocs = this.loadData('wordDocuments', {});
                savedDocs[docName] = {
                    content: content,
                    lastModified: new Date().toISOString()
                };
                this.saveData('wordDocuments', savedDocs);
                
                // Create download file
                const blob = new Blob([content], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = docName + '.html';
                a.click();
                URL.revokeObjectURL(url);
                
                alert('Document saved successfully!');
            }
            
            openDocument() {
                const savedDocs = this.loadData('wordDocuments', {});
                const docNames = Object.keys(savedDocs);
                
                if (docNames.length === 0) {
                    alert('No saved documents found.');
                    return;
                }
                
                const docList = docNames.map((name, index) => `${index + 1}. ${name}`).join('\n');
                const selection = prompt(`Select document to open:\n${docList}\n\nEnter document number:`);
                
                if (selection && !isNaN(selection)) {
                    const index = parseInt(selection) - 1;
                    if (index >= 0 && index < docNames.length) {
                        const docName = docNames[index];
                        document.getElementById('wordDocument').innerHTML = savedDocs[docName].content;
                        this.updateWordCount();
                    }
                }
            }
            
            printDocument() {
                const content = document.getElementById('wordDocument').innerHTML;
                const printWindow = window.open('', '_blank');
                printWindow.document.write(`
                    <html>
                    <head>
                        <title>Print Document</title>
                        <style>
                            body { font-family: Calibri, Arial, sans-serif; font-size: 12pt; line-height: 1.5; margin: 1in; }
                            @media print { body { margin: 0.5in; } }
                        </style>
                    </head>
                    <body>${content}</body>
                    </html>
                `);
                printWindow.document.close();
                printWindow.print();
            }
            
            formatText(command) {
                document.execCommand(command, false, null);
                this.updateToolbarState();
                document.getElementById('wordDocument').focus();
            }
            
            changeFontFamily(font) {
                document.execCommand('fontName', false, font);
                document.getElementById('wordDocument').focus();
            }
            
            changeFontSize(size) {
                document.execCommand('fontSize', false, size);
                document.getElementById('wordDocument').focus();
            }
            
            changeFontColor(color) {
                document.execCommand('foreColor', false, color);
                document.getElementById('wordDocument').focus();
            }
            
            changeBackgroundColor(color) {
                document.execCommand('hiliteColor', false, color);
                document.getElementById('wordDocument').focus();
            }
            
            alignText(alignment) {
                const commands = {
                    left: 'justifyLeft',
                    center: 'justifyCenter',
                    right: 'justifyRight',
                    justify: 'justifyFull'
                };
                document.execCommand(commands[alignment], false, null);
                document.getElementById('wordDocument').focus();
            }
            
            insertTable() {
                const rows = prompt('Number of rows:', '3') || '3';
                const cols = prompt('Number of columns:', '3') || '3';
                
                let tableHTML = '<table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse; width: 100%;">';
                for (let i = 0; i < parseInt(rows); i++) {
                    tableHTML += '<tr>';
                    for (let j = 0; j < parseInt(cols); j++) {
                        tableHTML += '<td>Cell</td>';
                    }
                    tableHTML += '</tr>';
                }
                tableHTML += '</table><p></p>';
                
                document.execCommand('insertHTML', false, tableHTML);
                document.getElementById('wordDocument').focus();
            }
            
            insertImage() {
                const url = prompt('Enter image URL:');
                if (url) {
                    const imgHTML = `<img src="${url}" style="max-width: 100%; height: auto;" alt="Inserted image">`;
                    document.execCommand('insertHTML', false, imgHTML);
                    document.getElementById('wordDocument').focus();
                }
            }
            
            insertLink() {
                const selectedText = window.getSelection().toString();
                const url = prompt('Enter URL:', 'https://');
                const linkText = prompt('Link text:', selectedText || 'Link');
                
                if (url && linkText) {
                    const linkHTML = `<a href="${url}" target="_blank">${linkText}</a>`;
                    if (selectedText) {
                        document.execCommand('insertHTML', false, linkHTML);
                    } else {
                        document.execCommand('insertHTML', false, linkHTML + ' ');
                    }
                    document.getElementById('wordDocument').focus();
                }
            }
            
            updateWordCount() {
                const content = document.getElementById('wordDocument').innerText;
                const words = content.trim().split(/\s+/).filter(word => word.length > 0).length;
                const chars = content.length;
                const pages = Math.ceil(words / 250); // Rough estimate: 250 words per page
                
                document.getElementById('wordCount').textContent = `Words: ${words}`;
                document.getElementById('charCount').textContent = `Characters: ${chars}`;
                document.getElementById('pageCount').textContent = `Page: ${pages}`;
                
                // Auto-save every few seconds
                clearTimeout(this.wordAutoSaveTimeout);
                this.wordAutoSaveTimeout = setTimeout(() => {
                    this.autoSaveDocument();
                }, 3000);
            }
            
            updateToolbarState() {
                // Update toolbar buttons based on current selection
                const selection = window.getSelection();
                if (selection.rangeCount > 0) {
                    document.getElementById('boldBtn').classList.toggle('active', 
                        document.queryCommandState('bold'));
                    document.getElementById('italicBtn').classList.toggle('active', 
                        document.queryCommandState('italic'));
                    document.getElementById('underlineBtn').classList.toggle('active', 
                        document.queryCommandState('underline'));
                }
            }
            
            autoSaveDocument() {
                const content = document.getElementById('wordDocument').innerHTML;
                this.saveData('wordAutoSave', {
                    content: content,
                    timestamp: new Date().toISOString()
                });
            }
            
            loadSavedDocument() {
                const autoSave = this.loadData('wordAutoSave', null);
                if (autoSave && autoSave.content && autoSave.content !== '<p>Start typing your document here...</p>') {
                    if (confirm('Found auto-saved content. Load it?')) {
                        document.getElementById('wordDocument').innerHTML = autoSave.content;
                    }
                }
            }

            // Image Generator functionality
            initializeImageGenerator() {
                this.generatedImages = [];
                
                document.getElementById('generateImages').addEventListener('click', () => this.generateImages());
                document.getElementById('clearImages').addEventListener('click', () => this.clearImages());
                document.getElementById('downloadAll').addEventListener('click', () => this.downloadAllImages());
            }
            
            async generateImages() {
                const prompt = document.getElementById('imagePrompt').value.trim();
                const style = document.getElementById('imageStyle').value;
                const count = parseInt(document.getElementById('imageCount').value);
                const format = document.getElementById('imageFormat').value;
                
                if (!prompt) {
                    alert('Please enter an image description.');
                    return;
                }
                
                // Show loading state
                const statusEl = document.getElementById('generationStatus');
                const progressEl = document.getElementById('progressFill');
                statusEl.style.display = 'block';
                
                // Prepare full prompt with style
                const fullPrompt = style ? `${prompt}, ${style} style` : prompt;
                
                // Gemini API Key
                const GEMINI_API_KEY = 'AIzaSyDPQtBK3oPEb4z5JMfunP2FQpVMONrvris';
                
                try {
                    for (let i = 0; i < count; i++) {
                        progressEl.style.width = `${((i + 1) / count) * 100}%`;
                        
                        // Use Gemini API to generate image descriptions for better results
                        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${GEMINI_API_KEY}`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                contents: [{
                                    parts: [{
                                        text: `Create a detailed, vivid image description for: "${fullPrompt}". Include specific details about colors, lighting, composition, and artistic elements. Make it suitable for image generation AI.`
                                    }]
                                }]
                            })
                        });
                        
                        const data = await response.json();
                        let enhancedPrompt = fullPrompt;
                        
                        if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                            enhancedPrompt = data.candidates[0].content.parts[0].text;
                        }
                        
                        // Generate placeholder image with enhanced prompt
                        const imageData = await this.generatePlaceholderImage(enhancedPrompt, format);
                        
                        this.generatedImages.push({
                            id: Date.now() + i,
                            url: imageData,
                            prompt: enhancedPrompt,
                            originalPrompt: fullPrompt,
                            format: format,
                            timestamp: new Date().toISOString()
                        });
                    }
                    
                    this.renderImageGrid();
                    this.showToast(`Successfully generated ${count} image${count > 1 ? 's' : ''}!`);
                    
                } catch (error) {
                    console.error('Image generation error:', error);
                    alert('Failed to generate images. Please check your internet connection and try again.');
                } finally {
                    statusEl.style.display = 'none';
                    progressEl.style.width = '0%';
                }
            }
            
            async generatePlaceholderImage(prompt, format) {
                // Create a canvas with placeholder image
                const canvas = document.createElement('canvas');
                canvas.width = 512;
                canvas.height = 512;
                const ctx = canvas.getContext('2d');
                
                // Create gradient background
                const gradient = ctx.createLinearGradient(0, 0, 512, 512);
                gradient.addColorStop(0, `hsl(${Math.random() * 360}, 70%, 60%)`);
                gradient.addColorStop(1, `hsl(${Math.random() * 360}, 70%, 40%)`);
                
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, 512, 512);
                
                // Add some geometric shapes
                for (let i = 0; i < 5; i++) {
                    ctx.fillStyle = `hsla(${Math.random() * 360}, 50%, 50%, 0.7)`;
                    ctx.beginPath();
                    ctx.arc(
                        Math.random() * 512,
                        Math.random() * 512,
                        Math.random() * 100 + 20,
                        0,
                        Math.PI * 2
                    );
                    ctx.fill();
                }
                
                // Add text
                ctx.fillStyle = 'white';
                ctx.font = '20px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('AI Generated', 256, 240);
                ctx.fillText('Image Placeholder', 256, 270);
                
                // Convert to desired format
                const mimeType = format === 'png' ? 'image/png' : format === 'jpg' ? 'image/jpeg' : 'image/webp';
                return canvas.toDataURL(mimeType, 0.9);
            }
            
            renderImageGrid() {
                const grid = document.getElementById('imageGrid');
                
                if (this.generatedImages.length === 0) {
                    grid.innerHTML = `
                        <div class="no-images">
                            <p>🎨 Generate your first AI image!</p>
                            <p>Enter a description above and click "Generate Images"</p>
                        </div>
                    `;
                    return;
                }
                
                grid.innerHTML = this.generatedImages.map(image => `
                    <div class="image-card">
                        <img src="${image.url}" alt="${image.prompt}">
                        <div class="image-card-info">
                            <p><strong>Prompt:</strong> ${image.prompt}</p>
                            <p><strong>Format:</strong> ${image.format.toUpperCase()}</p>
                            <button class="image-download" onclick="app.downloadImage('${image.id}')">
                                📥 Download
                            </button>
                        </div>
                    </div>
                `).join('');
            }
            
            downloadImage(imageId) {
                const image = this.generatedImages.find(img => img.id.toString() === imageId);
                if (image) {
                    const link = document.createElement('a');
                    link.download = `ai-image-${image.id}.${image.format}`;
                    link.href = image.url;
                    link.click();
                }
            }
            
            downloadAllImages() {
                if (this.generatedImages.length === 0) {
                    alert('No images to download.');
                    return;
                }
                
                this.generatedImages.forEach((image, index) => {
                    setTimeout(() => {
                        const link = document.createElement('a');
                        link.download = `ai-image-${index + 1}.${image.format}`;
                        link.href = image.url;
                        link.click();
                    }, index * 100); // Stagger downloads
                });
            }
            
            clearImages() {
                if (this.generatedImages.length === 0) return;
                
                if (confirm('Clear all generated images?')) {
                    this.generatedImages = [];
                    this.renderImageGrid();
                }
            }

            // Calculator functionality
            initializeCalculator() {
                this.calcDisplay = '0';
                this.calcPrevious = null;
                this.calcOperator = null;
                this.calcWaitingForOperand = false;
                this.calcMemory = 0;
                this.calcHistory = [];
                this.savedCalculations = this.loadData('savedCalculations', []);
                
                // Initialize calculator buttons
                document.querySelectorAll('.calc-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.handleCalculatorInput(e.target));
                });
                
                // Memory buttons
                document.querySelectorAll('.mem-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.handleMemoryOperation(e.target.dataset.action));
                });
                
                // Save buttons
                document.getElementById('saveCalculation').addEventListener('click', () => this.saveCurrentCalculation());
                document.getElementById('clearSaved').addEventListener('click', () => this.clearSavedCalculations());
                
                this.updateCalculatorDisplay();
                this.renderSavedCalculations();
            }
            
            handleCalculatorInput(button) {
                const { action, value } = button.dataset;
                
                if (value) {
                    this.inputNumber(value);
                } else if (action) {
                    this.performAction(action);
                }
            }
            
            inputNumber(num) {
                if (this.calcWaitingForOperand) {
                    this.calcDisplay = num;
                    this.calcWaitingForOperand = false;
                } else {
                    this.calcDisplay = this.calcDisplay === '0' ? num : this.calcDisplay + num;
                }
                
                this.updateCalculatorDisplay();
            }
            
            performAction(action) {
                const inputValue = parseFloat(this.calcDisplay);
                
                switch (action) {
                    case 'clear':
                        this.calcDisplay = '0';
                        this.calcPrevious = null;
                        this.calcOperator = null;
                        this.calcWaitingForOperand = false;
                        document.getElementById('calcHistory').textContent = '';
                        break;
                        
                    case 'clear-entry':
                        this.calcDisplay = '0';
                        break;
                        
                    case 'backspace':
                        this.calcDisplay = this.calcDisplay.slice(0, -1) || '0';
                        break;
                        
                    case 'toggle-sign':
                        this.calcDisplay = (parseFloat(this.calcDisplay) * -1).toString();
                        break;
                        
                    case 'add':
                    case 'subtract':
                    case 'multiply':
                    case 'divide':
                        if (this.calcPrevious === null) {
                            this.calcPrevious = inputValue;
                        } else if (this.calcOperator) {
                            const result = this.calculate();
                            this.calcDisplay = String(result);
                            this.calcPrevious = result;
                        }
                        
                        this.calcWaitingForOperand = true;
                        this.calcOperator = action;
                        document.getElementById('calcHistory').textContent = 
                            `${this.calcPrevious} ${this.getOperatorSymbol(action)}`;
                        break;
                        
                    case 'equals':
                        if (this.calcPrevious !== null && this.calcOperator) {
                            const result = this.calculate();
                            const historyText = `${this.calcPrevious} ${this.getOperatorSymbol(this.calcOperator)} ${inputValue} =`;
                            
                            this.calcHistory.unshift({
                                expression: historyText,
                                result: result,
                                timestamp: new Date().toISOString()
                            });
                            
                            this.calcDisplay = String(result);
                            this.calcPrevious = null;
                            this.calcOperator = null;
                            this.calcWaitingForOperand = true;
                            
                            document.getElementById('calcHistory').textContent = historyText;
                        }
                        break;
                }
                
                this.updateCalculatorDisplay();
            }
            
            calculate() {
                const current = parseFloat(this.calcDisplay);
                const previous = this.calcPrevious;
                
                switch (this.calcOperator) {
                    case 'add':
                        return previous + current;
                    case 'subtract':
                        return previous - current;
                    case 'multiply':
                        return previous * current;
                    case 'divide':
                        return current !== 0 ? previous / current : 0;
                    default:
                        return current;
                }
            }
            
            getOperatorSymbol(operator) {
                const symbols = {
                    add: '+',
                    subtract: '−',
                    multiply: '×',
                    divide: '÷'
                };
                return symbols[operator] || '';
            }
            
            handleMemoryOperation(operation) {
                const currentValue = parseFloat(this.calcDisplay);
                
                switch (operation) {
                    case 'memory-clear':
                        this.calcMemory = 0;
                        break;
                    case 'memory-recall':
                        this.calcDisplay = String(this.calcMemory);
                        break;
                    case 'memory-add':
                        this.calcMemory += currentValue;
                        break;
                    case 'memory-subtract':
                        this.calcMemory -= currentValue;
                        break;
                    case 'memory-store':
                        this.calcMemory = currentValue;
                        break;
                }
                
                document.getElementById('memoryValue').textContent = `Memory: ${this.calcMemory}`;
                this.updateCalculatorDisplay();
            }
            
            updateCalculatorDisplay() {
                document.getElementById('calcCurrent').textContent = this.calcDisplay;
            }
            
            saveCurrentCalculation() {
                const expression = document.getElementById('calcHistory').textContent;
                const result = this.calcDisplay;
                
                if (expression) {
                    const calculation = {
                        id: Date.now(),
                        expression: expression,
                        result: result,
                        timestamp: new Date().toISOString()
                    };
                    
                    this.savedCalculations.unshift(calculation);
                    this.saveData('savedCalculations', this.savedCalculations);
                    this.renderSavedCalculations();
                    
                    alert('Calculation saved!');
                } else {
                    alert('No calculation to save.');
                }
            }
            
            clearSavedCalculations() {
                if (this.savedCalculations.length === 0) return;
                
                if (confirm('Clear all saved calculations?')) {
                    this.savedCalculations = [];
                    this.saveData('savedCalculations', this.savedCalculations);
                    this.renderSavedCalculations();
                }
            }
            
            renderSavedCalculations() {
                const list = document.getElementById('savedList');
                
                if (this.savedCalculations.length === 0) {
                    list.innerHTML = '<p class="no-saved">No saved calculations</p>';
                    return;
                }
                
                list.innerHTML = this.savedCalculations.map(calc => `
                    <div class="saved-item" onclick="app.loadSavedCalculation('${calc.id}')">
                        <div>${calc.expression}</div>
                        <div><strong>${calc.result}</strong></div>
                        <small>${new Date(calc.timestamp).toLocaleString()}</small>
                    </div>
                `).join('');
            }
            
            loadSavedCalculation(calcId) {
                const calc = this.savedCalculations.find(c => c.id.toString() === calcId);
                if (calc) {
                    this.calcDisplay = calc.result;
                    document.getElementById('calcHistory').textContent = calc.expression;
                    this.updateCalculatorDisplay();
                }
            }

            initializeTextSelection() {
                let selectionTooltip = null;

                document.addEventListener('mouseup', (e) => {
                    // Remove existing tooltip
                    if (selectionTooltip) {
                        document.body.removeChild(selectionTooltip);
                        selectionTooltip = null;
                    }

                    const selection = window.getSelection();
                    const selectedText = selection.toString().trim();

                    // Only show tooltip for non-empty selections in chat messages
                    if (selectedText.length > 10 && this.isInChatArea(e.target)) {
                        const range = selection.getRangeAt(0);
                        const rect = range.getBoundingClientRect();

                        selectionTooltip = document.createElement('div');
                        selectionTooltip.className = 'selection-tooltip';
                        selectionTooltip.textContent = '📝 Save as Note';
                        selectionTooltip.style.left = rect.left + (rect.width / 2) - 60 + 'px';
                        selectionTooltip.style.top = rect.top - 35 + 'px';

                        selectionTooltip.addEventListener('click', () => {
                            this.addNoteFromSelection(selectedText);
                            document.body.removeChild(selectionTooltip);
                            selectionTooltip = null;
                            selection.removeAllRanges();
                        });

                        document.body.appendChild(selectionTooltip);
                    }
                });

                // Remove tooltip on click outside
                document.addEventListener('click', (e) => {
                    if (selectionTooltip && !selectionTooltip.contains(e.target)) {
                        document.body.removeChild(selectionTooltip);
                        selectionTooltip = null;
                    }
                });
            }

            isInChatArea(element) {
                while (element && element !== document.body) {
                    if (element.classList && element.classList.contains('chat-messages')) {
                        return true;
                    }
                    element = element.parentElement;
                }
                return false;
            }

            // Prompt Generator Functions
            initializePromptGenerator() {
                // Event listeners for prompt generator
                const generateBtn = document.getElementById('generatePrompt');
                const clearBtn = document.getElementById('clearPrompts');
                const saveBtn = document.getElementById('savePrompt');
                const copyBtn = document.getElementById('copyPrompt');
                const regenerateBtn = document.getElementById('regeneratePrompt');
                const clearSavedBtn = document.getElementById('clearSavedPrompts');

                if (generateBtn) {
                    generateBtn.addEventListener('click', () => this.generateEnhancedPrompt());
                }

                if (clearBtn) {
                    clearBtn.addEventListener('click', () => this.clearPromptInputs());
                }

                if (saveBtn) {
                    saveBtn.addEventListener('click', () => this.saveEnhancedPrompt());
                }

                if (copyBtn) {
                    copyBtn.addEventListener('click', () => this.copyEnhancedPrompt());
                }

                if (regenerateBtn) {
                    regenerateBtn.addEventListener('click', () => this.generateEnhancedPrompt());
                }

                if (clearSavedBtn) {
                    clearSavedBtn.addEventListener('click', () => this.clearAllSavedPrompts());
                }

                // Template buttons
                document.querySelectorAll('.template-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const template = e.target.dataset.template;
                        this.loadTemplate(template);
                    });
                });

                this.renderSavedPrompts();
            }

            async generateEnhancedPrompt() {
                const originalPrompt = document.getElementById('originalPrompt').value.trim();
                const promptType = document.getElementById('promptType').value;
                const promptLength = document.getElementById('promptLength').value;
                const promptTone = document.getElementById('promptTone').value;

                if (!originalPrompt) {
                    this.showToast('Please enter a prompt to enhance', 'error');
                    return;
                }

                const loadingEl = document.getElementById('promptLoading');
                loadingEl.style.display = 'block';

                try {
                    const enhancementRequest = this.buildEnhancementPrompt(originalPrompt, promptType, promptLength, promptTone);
                    
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent?key=${this.getGeminiApiKey()}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: enhancementRequest }]
                            }]
                        })
                    });

                    const data = await response.json();
                    
                    if (data.candidates && data.candidates[0]?.content?.parts?.[0]?.text) {
                        const enhancedPrompt = data.candidates[0].content.parts[0].text;
                        this.displayEnhancedPrompt(enhancedPrompt, originalPrompt);
                        this.generateAnalysis(originalPrompt, enhancedPrompt);
                    } else {
                        throw new Error('No enhanced prompt generated');
                    }
                } catch (error) {
                    console.error('Error enhancing prompt:', error);
                    this.showToast('Failed to enhance prompt. Please try again.', 'error');
                    
                    // Show fallback enhanced prompt
                    this.showFallbackEnhancement(originalPrompt, promptType, promptLength, promptTone);
                } finally {
                    loadingEl.style.display = 'none';
                }
            }

            buildEnhancementPrompt(originalPrompt, type, length, tone) {
                return `You are an expert prompt engineer. Please enhance the following prompt to make it more effective and detailed.

Original Prompt: "${originalPrompt}"

Enhancement Requirements:
- Type: ${type}
- Detail Level: ${length}
- Tone: ${tone}

Please provide an enhanced version that:
1. Adds specific context and details
2. Includes clear instructions and expectations
3. Specifies desired format or structure
4. Adds relevant constraints or guidelines
5. Makes the request more actionable

Enhanced Prompt:`;
            }

            showFallbackEnhancement(original, type, length, tone) {
                let enhanced = `Enhanced version of: "${original}"\n\n`;
                
                switch (type) {
                    case 'creative':
                        enhanced += `Create compelling and imaginative content that ${original.toLowerCase()}. `;
                        break;
                    case 'technical':
                        enhanced += `Provide a detailed technical solution that ${original.toLowerCase()}. `;
                        break;
                    case 'business':
                        enhanced += `Develop a professional business-oriented approach to ${original.toLowerCase()}. `;
                        break;
                    default:
                        enhanced += `Please provide a comprehensive response that ${original.toLowerCase()}. `;
                }

                if (length === 'comprehensive') {
                    enhanced += 'Include detailed explanations, examples, and step-by-step guidance. ';
                } else if (length === 'detailed') {
                    enhanced += 'Provide clear details and relevant examples. ';
                } else {
                    enhanced += 'Keep the response focused and to the point. ';
                }

                enhanced += `Maintain a ${tone} tone throughout the response.`;

                this.displayEnhancedPrompt(enhanced, original);
                this.generateAnalysis(original, enhanced);
            }

            displayEnhancedPrompt(enhancedPrompt, originalPrompt) {
                const container = document.getElementById('enhancedPromptContainer');
                container.innerHTML = `<div class="enhanced-prompt-text">${enhancedPrompt}</div>`;
                
                // Store current enhanced prompt for saving/copying
                this.currentEnhancedPrompt = {
                    original: originalPrompt,
                    enhanced: enhancedPrompt,
                    timestamp: Date.now()
                };
            }

            generateAnalysis(original, enhanced) {
                const analysis = document.getElementById('analysisContent');
                
                const improvements = [];
                if (enhanced.length > original.length * 1.5) improvements.push('Added more detailed context');
                if (enhanced.includes('step') || enhanced.includes('format')) improvements.push('Included structural guidance');
                if (enhanced.includes('example') || enhanced.includes('specific')) improvements.push('Added specificity requirements');
                if (enhanced.match(/tone|style|approach/i)) improvements.push('Clarified tone and style');
                
                analysis.innerHTML = `
                    <div class="analysis-results">
                        <div class="improvement-item">
                            <strong>📈 Length Enhancement:</strong> ${Math.round((enhanced.length / original.length) * 100)}% increase in detail
                        </div>
                        <div class="improvement-item">
                            <strong>🎯 Key Improvements:</strong>
                            <ul>${improvements.map(imp => `<li>${imp}</li>`).join('')}</ul>
                        </div>
                        <div class="improvement-item">
                            <strong>💡 Enhancement Focus:</strong> Made the prompt more specific, actionable, and results-oriented
                        </div>
                    </div>
                `;
            }

            copyEnhancedPrompt() {
                if (!this.currentEnhancedPrompt) {
                    this.showToast('No enhanced prompt to copy', 'error');
                    return;
                }

                navigator.clipboard.writeText(this.currentEnhancedPrompt.enhanced).then(() => {
                    this.showToast('Enhanced prompt copied to clipboard!');
                }).catch(() => {
                    this.showToast('Failed to copy to clipboard', 'error');
                });
            }

            saveEnhancedPrompt() {
                if (!this.currentEnhancedPrompt) {
                    this.showToast('No enhanced prompt to save', 'error');
                    return;
                }

                const savedPrompt = {
                    id: Date.now(),
                    title: this.currentEnhancedPrompt.original.substring(0, 50) + '...',
                    original: this.currentEnhancedPrompt.original,
                    enhanced: this.currentEnhancedPrompt.enhanced,
                    timestamp: this.currentEnhancedPrompt.timestamp,
                    date: new Date().toLocaleDateString()
                };

                this.savedEnhancedPrompts.unshift(savedPrompt);
                this.saveData('enhancedPrompts', this.savedEnhancedPrompts);
                this.renderSavedPrompts();
                this.showToast('Enhanced prompt saved!');
            }

            loadTemplate(templateType) {
                const template = this.promptTemplates[templateType];
                if (template) {
                    document.getElementById('originalPrompt').value = template;
                    this.showToast(`${templateType.charAt(0).toUpperCase() + templateType.slice(1)} template loaded!`);
                }
            }

            clearPromptInputs() {
                document.getElementById('originalPrompt').value = '';
                document.getElementById('enhancedPromptContainer').innerHTML = `
                    <div class="placeholder-text">
                        <p>🎯 Your enhanced prompt will appear here</p>
                        <p>Enter your original prompt above and click "Enhance My Prompt"</p>
                    </div>
                `;
                document.getElementById('analysisContent').innerHTML = `
                    <div class="analysis-placeholder">
                        <p>Analysis will show improvements made to your prompt</p>
                    </div>
                `;
                this.currentEnhancedPrompt = null;
            }

            renderSavedPrompts() {
                const container = document.getElementById('savedPromptsList');
                
                if (this.savedEnhancedPrompts.length === 0) {
                    container.innerHTML = `
                        <div class="no-saved-prompts">
                            <p>No saved prompts yet</p>
                            <p>Generate and save enhanced prompts to build your collection</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.savedEnhancedPrompts.map(prompt => `
                    <div class="saved-prompt-item" onclick="app.loadSavedPrompt(${prompt.id})">
                        <div class="saved-prompt-header">
                            <div class="saved-prompt-title">${prompt.title}</div>
                            <div class="saved-prompt-date">${prompt.date}</div>
                        </div>
                        <div class="saved-prompt-preview">${prompt.enhanced.substring(0, 100)}...</div>
                    </div>
                `).join('');
            }

            loadSavedPrompt(promptId) {
                const savedPrompt = this.savedEnhancedPrompts.find(p => p.id === promptId);
                if (savedPrompt) {
                    document.getElementById('originalPrompt').value = savedPrompt.original;
                    this.displayEnhancedPrompt(savedPrompt.enhanced, savedPrompt.original);
                    this.generateAnalysis(savedPrompt.original, savedPrompt.enhanced);
                    this.showToast('Saved prompt loaded!');
                }
            }

            clearAllSavedPrompts() {
                if (this.savedEnhancedPrompts.length === 0) {
                    this.showToast('No saved prompts to clear', 'error');
                    return;
                }

                if (confirm('Are you sure you want to delete all saved enhanced prompts?')) {
                    this.savedEnhancedPrompts = [];
                    this.saveData('enhancedPrompts', this.savedEnhancedPrompts);
                    this.renderSavedPrompts();
                    this.showToast('All saved prompts cleared');
                }
            }

            getGeminiApiKey() {
                // You would need to set your API key here or in localStorage
                return localStorage.getItem('geminiApiKey') || 'YOUR_GEMINI_API_KEY_HERE';
            }

            // Habit Tracker Functions
            initializeHabitTracker() {
                // Event listeners for habit tracker
                const addHabitBtn = document.getElementById('addHabit');
                const clearFormBtn = document.getElementById('clearHabitForm');
                const habitTypeSelect = document.getElementById('habitType');
                const prevMonthBtn = document.getElementById('prevMonth');
                const nextMonthBtn = document.getElementById('nextMonth');
                const closePanelBtn = document.getElementById('closeDayPanel');
                const habitCategoryFilter = document.getElementById('habitCategoryFilter');

                if (addHabitBtn) {
                    addHabitBtn.addEventListener('click', () => this.addHabit());
                }

                if (clearFormBtn) {
                    clearFormBtn.addEventListener('click', () => this.clearHabitForm());
                }

                if (habitTypeSelect) {
                    habitTypeSelect.addEventListener('change', (e) => this.toggleTargetInput(e.target.value));
                }

                if (prevMonthBtn) {
                    prevMonthBtn.addEventListener('click', () => this.navigateMonth(-1));
                }

                if (nextMonthBtn) {
                    nextMonthBtn.addEventListener('click', () => this.navigateMonth(1));
                }

                if (closePanelBtn) {
                    closePanelBtn.addEventListener('click', () => this.closeDayPanel());
                }

                if (habitCategoryFilter) {
                    habitCategoryFilter.addEventListener('change', (e) => {
                        this.habitCategoryFilter = e.target.value;
                        this.renderHabitsList();
                    });
                }

                // Color selection
                document.querySelectorAll('.color-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
                        e.target.classList.add('active');
                        this.selectedHabitColor = e.target.dataset.color;
                    });
                });

                // Initialize calendar and habits list
                this.renderHabitTracker();
            }

            addHabit() {
                const name = document.getElementById('habitName').value.trim();
                const category = document.getElementById('habitCategory').value;
                const frequency = document.getElementById('habitFrequency').value;
                const type = document.getElementById('habitType').value;
                const description = document.getElementById('habitDescription').value.trim();

                if (!name) {
                    this.showToast('Please enter a habit name', 'error');
                    return;
                }

                let target = null;
                let unit = '';

                if (type !== 'checkbox') {
                    const targetValue = document.getElementById('habitTarget').value;
                    unit = document.getElementById('habitUnit').value.trim();

                    if (!targetValue || !unit) {
                        this.showToast('Please enter target and unit for this habit type', 'error');
                        return;
                    }

                    target = parseFloat(targetValue);
                }

                const habit = {
                    id: Date.now(),
                    name,
                    category,
                    frequency,
                    type,
                    target,
                    unit,
                    description,
                    color: this.selectedHabitColor,
                    createdAt: new Date().toISOString(),
                    streak: 0,
                    bestStreak: 0,
                    totalCompletions: 0
                };

                this.habits.unshift(habit);
                this.saveData('habits', this.habits);
                this.clearHabitForm();
                this.renderHabitTracker();
                this.showToast('Habit created successfully!');
            }

            toggleTargetInput(type) {
                const targetSection = document.getElementById('targetInputSection');
                if (type === 'checkbox') {
                    targetSection.style.display = 'none';
                } else {
                    targetSection.style.display = 'block';
                }
            }

            clearHabitForm() {
                document.getElementById('habitName').value = '';
                document.getElementById('habitDescription').value = '';
                document.getElementById('habitTarget').value = '';
                document.getElementById('habitUnit').value = '';
                document.getElementById('habitType').selectedIndex = 0;
                document.getElementById('targetInputSection').style.display = 'none';
                
                // Reset color selection
                document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
                document.querySelector('.color-option[data-color="#66bb6a"]').classList.add('active');
                this.selectedHabitColor = '#66bb6a';
            }

            renderHabitTracker() {
                this.renderHabitsList();
                this.renderCalendar();
                this.updateHabitStats();
                this.renderAchievements();
            }

            renderHabitsList() {
                const container = document.getElementById('habitsList');
                const filteredHabits = this.habitCategoryFilter === 'all' 
                    ? this.habits 
                    : this.habits.filter(habit => habit.category === this.habitCategoryFilter);

                if (filteredHabits.length === 0) {
                    container.innerHTML = `
                        <div class="no-habits">
                            <p>🌱 No habits found</p>
                            <p>${this.habitCategoryFilter === 'all' ? 'Create your first habit above to start building better daily routines!' : 'No habits in this category yet.'}</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = filteredHabits.map(habit => {
                    const categoryEmojis = {
                        health: '🏃',
                        productivity: '💼',
                        learning: '📚',
                        wellness: '🧘',
                        social: '👥',
                        creative: '🎨',
                        financial: '💰',
                        other: '📝'
                    };

                    return `
                        <div class="habit-item" style="--habit-color: ${habit.color}">
                            <div class="habit-item-header">
                                <div class="habit-name">${habit.name}</div>
                                <div class="habit-streak">${habit.streak} day streak</div>
                            </div>
                            <div class="habit-info">
                                <div>
                                    <span class="habit-category-badge">${categoryEmojis[habit.category]} ${habit.category}</span>
                                    ${habit.type !== 'checkbox' ? `<span style="margin-left: 8px; font-size: 11px;">Target: ${habit.target} ${habit.unit}</span>` : ''}
                                </div>
                                <div class="habit-actions">
                                    <button class="habit-action-btn" onclick="app.editHabit(${habit.id})">✏️</button>
                                    <button class="habit-action-btn" onclick="app.deleteHabit(${habit.id})">🗑️</button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            renderCalendar() {
                const currentMonth = document.getElementById('currentMonth');
                const calendarGrid = document.getElementById('calendarGrid');

                const year = this.currentViewDate.getFullYear();
                const month = this.currentViewDate.getMonth();
                
                currentMonth.textContent = `${this.currentViewDate.toLocaleString('default', { month: 'long' })} ${year}`;

                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const startDate = new Date(firstDay);
                startDate.setDate(startDate.getDate() - firstDay.getDay());

                const today = new Date();
                let calendarHTML = '';

                for (let i = 0; i < 42; i++) {
                    const currentDate = new Date(startDate);
                    currentDate.setDate(startDate.getDate() + i);
                    
                    const dateKey = this.getDateKey(currentDate);
                    const isToday = this.isSameDay(currentDate, today);
                    const isCurrentMonth = currentDate.getMonth() === month;
                    const isSelected = this.selectedDate && this.isSameDay(currentDate, this.selectedDate);

                    let dayClasses = 'calendar-day';
                    if (isToday) dayClasses += ' today';
                    if (isSelected) dayClasses += ' selected';
                    if (!isCurrentMonth) dayClasses += ' other-month';

                    const dayHabits = this.getHabitsForDate(currentDate);
                    const habitDots = dayHabits.map(habit => {
                        const completion = this.habitCompletions[dateKey]?.[habit.id];
                        const isCompleted = completion && this.isHabitCompleted(habit, completion);
                        return `<div class="habit-dot ${isCompleted ? 'completed' : 'incomplete'}" style="--habit-color: ${habit.color}"></div>`;
                    }).join('');

                    calendarHTML += `
                        <div class="${dayClasses}" onclick="app.selectDate(new Date(${currentDate.getTime()}))">
                            <div class="day-number">${currentDate.getDate()}</div>
                            <div class="day-habits-indicator">${habitDots}</div>
                        </div>
                    `;
                }

                calendarGrid.innerHTML = calendarHTML;
            }

            navigateMonth(direction) {
                this.currentViewDate.setMonth(this.currentViewDate.getMonth() + direction);
                this.renderCalendar();
            }

            selectDate(date) {
                this.selectedDate = date;
                this.renderCalendar();
                this.showDayPanel(date);
            }

            showDayPanel(date) {
                const panel = document.getElementById('selectedDayPanel');
                const title = document.getElementById('selectedDateTitle');
                const habitsList = document.getElementById('dayHabitsList');

                const dateStr = date.toLocaleDateString('default', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                title.textContent = this.isSameDay(date, new Date()) ? "Today's Habits" : dateStr;

                const dayHabits = this.getHabitsForDate(date);
                const dateKey = this.getDateKey(date);

                if (dayHabits.length === 0) {
                    habitsList.innerHTML = '<p style="color: rgba(255,255,255,0.6); text-align: center; padding: 20px;">No habits for this day</p>';
                } else {
                    habitsList.innerHTML = dayHabits.map(habit => {
                        const completion = this.habitCompletions[dateKey]?.[habit.id];
                        const isCompleted = completion && this.isHabitCompleted(habit, completion);
                        
                        return `
                            <div class="day-habit-item" style="--habit-color: ${habit.color}">
                                <div class="day-habit-info">
                                    <div class="day-habit-name">${habit.name}</div>
                                    ${habit.type !== 'checkbox' ? `<div class="day-habit-target">Target: ${habit.target} ${habit.unit}</div>` : ''}
                                </div>
                                <button class="habit-complete-btn ${isCompleted ? 'completed' : ''}" 
                                        onclick="app.toggleHabitCompletion(${habit.id}, '${dateKey}')">
                                    ${isCompleted ? '✅ Done' : 'Mark Done'}
                                </button>
                            </div>
                        `;
                    }).join('');
                }

                panel.style.display = 'block';
            }

            closeDayPanel() {
                document.getElementById('selectedDayPanel').style.display = 'none';
                this.selectedDate = null;
                this.renderCalendar();
            }

            toggleHabitCompletion(habitId, dateKey) {
                const habit = this.habits.find(h => h.id === habitId);
                if (!habit) return;

                if (!this.habitCompletions[dateKey]) {
                    this.habitCompletions[dateKey] = {};
                }

                const currentCompletion = this.habitCompletions[dateKey][habitId];
                
                if (habit.type === 'checkbox') {
                    if (currentCompletion) {
                        delete this.habitCompletions[dateKey][habitId];
                    } else {
                        this.habitCompletions[dateKey][habitId] = { completed: true, value: 1 };
                    }
                } else if (habit.type === 'time') {
                    // For time habits, start timer if not completed
                    if (currentCompletion) {
                        delete this.habitCompletions[dateKey][habitId];
                    } else {
                        this.startHabitTimer(habit, habitId, dateKey);
                        return; // Don't save immediately, save after timer completion
                    }
                } else {
                    // For number habits, mark as target achieved
                    if (currentCompletion) {
                        delete this.habitCompletions[dateKey][habitId];
                    } else {
                        this.habitCompletions[dateKey][habitId] = { completed: true, value: habit.target };
                    }
                }

                this.updateHabitStreaks(habit);
                this.saveData('habitCompletions', this.habitCompletions);
                this.saveData('habits', this.habits);
                
                this.renderHabitTracker();
                this.showDayPanel(this.selectedDate);
                
                // Check for achievements
                this.checkAchievements(habit);
            }

            updateHabitStreaks(habit) {
                const today = new Date();
                let streak = 0;
                let currentDate = new Date(today);

                // Calculate current streak
                while (true) {
                    const dateKey = this.getDateKey(currentDate);
                    const completion = this.habitCompletions[dateKey]?.[habit.id];
                    
                    if (completion && this.isHabitCompleted(habit, completion)) {
                        streak++;
                        currentDate.setDate(currentDate.getDate() - 1);
                    } else {
                        break;
                    }
                }

                habit.streak = streak;
                if (streak > habit.bestStreak) {
                    habit.bestStreak = streak;
                }

                // Update total completions
                habit.totalCompletions = Object.values(this.habitCompletions)
                    .filter(day => day[habit.id] && this.isHabitCompleted(habit, day[habit.id]))
                    .length;
            }

            getHabitsForDate(date) {
                return this.habits.filter(habit => {
                    switch (habit.frequency) {
                        case 'daily':
                            return true;
                        case 'weekdays':
                            return date.getDay() >= 1 && date.getDay() <= 5;
                        case 'weekends':
                            return date.getDay() === 0 || date.getDay() === 6;
                        case 'weekly':
                            return date.getDay() === 1; // Mondays only for weekly
                        default:
                            return true;
                    }
                });
            }

            isHabitCompleted(habit, completion) {
                if (habit.type === 'checkbox') {
                    return completion.completed;
                } else {
                    return completion.completed && completion.value >= habit.target;
                }
            }

            updateHabitStats() {
                const totalHabits = this.habits.length;
                const today = new Date();
                const todayKey = this.getDateKey(today);
                const todayHabits = this.getHabitsForDate(today);
                const todayCompleted = todayHabits.filter(habit => {
                    const completion = this.habitCompletions[todayKey]?.[habit.id];
                    return completion && this.isHabitCompleted(habit, completion);
                }).length;

                // Calculate weekly average
                let weeklyTotal = 0;
                let weeklyCompleted = 0;
                for (let i = 0; i < 7; i++) {
                    const date = new Date(today);
                    date.setDate(date.getDate() - i);
                    const dateKey = this.getDateKey(date);
                    const dayHabits = this.getHabitsForDate(date);
                    
                    weeklyTotal += dayHabits.length;
                    weeklyCompleted += dayHabits.filter(habit => {
                        const completion = this.habitCompletions[dateKey]?.[habit.id];
                        return completion && this.isHabitCompleted(habit, completion);
                    }).length;
                }

                const weeklyAverage = weeklyTotal > 0 ? Math.round((weeklyCompleted / weeklyTotal) * 100) : 0;
                const longestStreak = Math.max(...this.habits.map(h => h.bestStreak), 0);

                document.getElementById('totalHabits').textContent = totalHabits;
                document.getElementById('todayCompleted').textContent = todayCompleted;
                document.getElementById('weeklyAverage').textContent = weeklyAverage + '%';
                document.getElementById('longestStreak').textContent = longestStreak;
            }

            checkAchievements(habit) {
                const newAchievements = [];

                // First completion
                if (habit.totalCompletions === 1) {
                    newAchievements.push({
                        id: Date.now(),
                        title: 'First Step',
                        description: `Completed "${habit.name}" for the first time!`,
                        icon: '🎉',
                        date: new Date().toISOString()
                    });
                }

                // Streak milestones
                if (habit.streak === 7) {
                    newAchievements.push({
                        id: Date.now() + 1,
                        title: 'Week Warrior',
                        description: `7-day streak for "${habit.name}"!`,
                        icon: '🔥',
                        date: new Date().toISOString()
                    });
                } else if (habit.streak === 30) {
                    newAchievements.push({
                        id: Date.now() + 2,
                        title: 'Month Master',
                        description: `30-day streak for "${habit.name}"!`,
                        icon: '👑',
                        date: new Date().toISOString()
                    });
                }

                if (newAchievements.length > 0) {
                    this.achievements.unshift(...newAchievements);
                    this.saveData('achievements', this.achievements);
                    
                    newAchievements.forEach(achievement => {
                        this.showToast(`🏆 ${achievement.title}: ${achievement.description}`);
                    });
                }
            }

            renderAchievements() {
                const container = document.getElementById('achievementsList');
                const recentAchievements = this.achievements.slice(0, 3);

                if (recentAchievements.length === 0) {
                    container.innerHTML = `
                        <div class="no-achievements">
                            <p>Complete habits to earn achievements!</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = recentAchievements.map(achievement => `
                    <div class="achievement-item">
                        <div class="achievement-icon">${achievement.icon}</div>
                        <div class="achievement-text">
                            <strong>${achievement.title}</strong><br>
                            ${achievement.description}
                        </div>
                    </div>
                `).join('');
            }

            editHabit(habitId) {
                // Simple edit functionality - could be expanded
                const habit = this.habits.find(h => h.id === habitId);
                if (habit) {
                    const newName = prompt('Edit habit name:', habit.name);
                    if (newName && newName.trim()) {
                        habit.name = newName.trim();
                        this.saveData('habits', this.habits);
                        this.renderHabitsList();
                        this.showToast('Habit updated!');
                    }
                }
            }

            deleteHabit(habitId) {
                if (confirm('Are you sure you want to delete this habit? This will remove all tracking data.')) {
                    this.habits = this.habits.filter(h => h.id !== habitId);
                    
                    // Clean up completions data
                    Object.keys(this.habitCompletions).forEach(dateKey => {
                        if (this.habitCompletions[dateKey][habitId]) {
                            delete this.habitCompletions[dateKey][habitId];
                        }
                    });

                    this.saveData('habits', this.habits);
                    this.saveData('habitCompletions', this.habitCompletions);
                    this.renderHabitTracker();
                    this.showToast('Habit deleted');
                }
            }

            // Habit Timer Integration
            startHabitTimer(habit, habitId, dateKey) {
                // Initialize habit completions structure if needed
                if (!this.habitCompletions[dateKey]) {
                    this.habitCompletions[dateKey] = {};
                }

                // Store habit context for timer completion
                this.currentHabitTimer = {
                    habit: habit,
                    habitId: habitId,
                    dateKey: dateKey,
                    startTime: Date.now()
                };

                // Set timer to habit target time (in minutes)
                this.timerTime = habit.target * 60; // Convert to seconds
                this.timerRunning = true;

                // Show timer modal or switch to clock page
                this.showHabitTimerModal(habit);

                // Start the timer
                this.habitTimer = setInterval(() => {
                    this.timerTime--;
                    this.updateHabitTimerDisplay();
                    
                    if (this.timerTime <= 0) {
                        this.completeHabitTimer();
                    }
                }, 1000);
            }

            showHabitTimerModal(habit) {
                // Create timer modal
                const modal = document.createElement('div');
                modal.className = 'habit-timer-modal';
                modal.innerHTML = `
                    <div class="habit-timer-content">
                        <div class="habit-timer-header">
                            <h3>🎯 ${habit.name}</h3>
                            <p>Timer: ${habit.target} ${habit.unit}</p>
                        </div>
                        <div class="habit-timer-display" id="habitTimerDisplay">
                            ${this.formatTime(this.timerTime)}
                        </div>
                        <div class="habit-timer-controls">
                            <button class="secondary-btn" onclick="app.pauseHabitTimer()">⏸️ Pause</button>
                            <button class="secondary-btn" onclick="app.stopHabitTimer()">⏹️ Stop</button>
                            <button class="primary-btn" onclick="app.completeHabitTimer()">✅ Complete</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                this.currentTimerModal = modal;
            }

            updateHabitTimerDisplay() {
                const display = document.getElementById('habitTimerDisplay');
                if (display) {
                    display.textContent = this.formatTime(this.timerTime);
                }
            }

            formatTime(seconds) {
                const hours = Math.floor(seconds / 3600);
                const minutes = Math.floor((seconds % 3600) / 60);
                const secs = seconds % 60;
                
                if (hours > 0) {
                    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                }
                return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }

            pauseHabitTimer() {
                this.timerRunning = false;
                if (this.habitTimer) {
                    clearInterval(this.habitTimer);
                    this.habitTimer = null;
                }
            }

            stopHabitTimer() {
                this.pauseHabitTimer();
                this.closeHabitTimerModal();
                this.currentHabitTimer = null;
                this.timerTime = 0;
            }

            completeHabitTimer() {
                if (!this.currentHabitTimer) return;

                const { habit, habitId, dateKey, startTime } = this.currentHabitTimer;
                const timeSpent = Math.floor((Date.now() - startTime) / 1000 / 60); // Minutes spent

                // Mark habit as completed with actual time spent
                this.habitCompletions[dateKey][habitId] = { 
                    completed: true, 
                    value: Math.max(timeSpent, habit.target) // At least target time
                };

                // Update streaks and save
                this.updateHabitStreaks(habit);
                this.saveData('habitCompletions', this.habitCompletions);
                this.saveData('habits', this.habits);

                // Clean up timer
                this.pauseHabitTimer();
                this.closeHabitTimerModal();
                this.currentHabitTimer = null;
                this.timerTime = 0;

                // Refresh display
                this.renderHabitTracker();
                this.showDayPanel(this.selectedDate);
                this.showToast(`🎉 ${habit.name} completed! ${timeSpent} minutes logged.`);
            }

            closeHabitTimerModal() {
                if (this.currentTimerModal) {
                    document.body.removeChild(this.currentTimerModal);
                    this.currentTimerModal = null;
                }
            }

            // Utility functions for habit tracker
            getDateKey(date) {
                return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;
            }

            isSameDay(date1, date2) {
                return date1.getFullYear() === date2.getFullYear() &&
                       date1.getMonth() === date2.getMonth() &&
                       date1.getDate() === date2.getDate();
            }

            // Stock Management Functions
            loadStockLevels() {
                Object.keys(this.stockLevels).forEach(item => {
                    const element = document.getElementById(`stock-${item}`);
                    if (element) {
                        element.textContent = this.stockLevels[item];
                    }
                });
                this.updateStockSummary();
            }

            updateStock(item, change) {
                // Each row represents 10 units
                const unitChange = change * 10;
                this.stockLevels[item] = Math.max(0, this.stockLevels[item] + unitChange);
                const element = document.getElementById(`stock-${item}`);
                if (element) {
                    element.textContent = this.stockLevels[item];
                }
                this.updateStockSummary();
                this.saveData('stockLevels', this.stockLevels);
            }

            updateStockSingle(item, change) {
                // Single unit changes
                this.stockLevels[item] = Math.max(0, this.stockLevels[item] + change);
                const element = document.getElementById(`stock-${item}`);
                if (element) {
                    element.textContent = this.stockLevels[item];
                }
                this.updateStockSummary();
                this.saveData('stockLevels', this.stockLevels);
            }

            updateStockSummary() {
                let itemsToStock = 0;
                const itemKeys = ['cc', 'jd', 'redbull', 'corona', 'asahi', 'cruisers', 'cans196', 'jimbeam', 'vodka', 'bourbon', 'rum', 'tequila', 'gin'];
                
                itemKeys.forEach(item => {
                    const current = this.stockLevels[item] || 0;
                    const targetElement = document.getElementById(`target-${item}`);
                    const target = targetElement ? parseInt(targetElement.value) || 0 : 0;
                    
                    if (current < target) {
                        itemsToStock += (target - current);
                    }
                });
                
                const summaryElement = document.getElementById('items-to-stock');
                if (summaryElement) {
                    summaryElement.textContent = itemsToStock;
                }
            }

            resetAllStock() {
                if (confirm('Are you sure you want to reset all stock levels to 0?')) {
                    Object.keys(this.stockLevels).forEach(item => {
                        this.stockLevels[item] = 0;
                        const element = document.getElementById(`stock-${item}`);
                        if (element) {
                            element.textContent = '0';
                        }
                    });
                    this.updateStockSummary();
                    this.saveData('stockLevels', this.stockLevels);
                    this.showToast('All stock levels reset to 0');
                }
            }

            generateStockList() {
                const itemNames = {
                    cc: 'Coca Cola',
                    jd: 'Jack Daniels', 
                    redbull: 'Red Bull',
                    corona: 'Corona',
                    asahi: 'Asahi',
                    cruisers: 'Raspberry Guava Lemon Lime Cruisers',
                    cans196: '196 Cans',
                    jimbeam: 'Jim Beam Bottles',
                    vodka: 'Vodka',
                    bourbon: 'Bourbon',
                    rum: 'Rum',
                    tequila: 'Tequila',
                    gin: 'Gin'
                };

                let stockList = [];
                let drinksNeeded = [];
                let spiritsNeeded = [];

                Object.keys(this.stockLevels).forEach(item => {
                    const current = this.stockLevels[item] || 0;
                    const targetElement = document.getElementById(`target-${item}`);
                    const target = targetElement ? parseInt(targetElement.value) || 0 : 0;
                    const needed = Math.max(0, target - current);
                    
                    if (needed > 0) {
                        const listItem = `${itemNames[item]}: ${needed}`;
                        if (['vodka', 'bourbon', 'rum', 'tequila', 'gin'].includes(item)) {
                            spiritsNeeded.push(listItem);
                        } else {
                            drinksNeeded.push(listItem);
                        }
                    }
                });

                let output = '';
                if (drinksNeeded.length > 0) {
                    output += '🍺 Drinks:\n' + drinksNeeded.join('\n') + '\n\n';
                }
                if (spiritsNeeded.length > 0) {
                    output += '🥃 Spirits:\n' + spiritsNeeded.join('\n');
                }

                const outputElement = document.getElementById('stockListOutput');
                const contentElement = document.getElementById('stockListContent');
                
                if (output.trim()) {
                    contentElement.innerHTML = `<pre>${output}</pre>`;
                    outputElement.style.display = 'block';
                    this.generatedStockList = output;
                } else {
                    contentElement.innerHTML = '<p>🎉 All items are fully stocked!</p>';
                    outputElement.style.display = 'block';
                    this.generatedStockList = 'All items are fully stocked!';
                }
            }

            copyStockList() {
                if (this.generatedStockList) {
                    navigator.clipboard.writeText(this.generatedStockList).then(() => {
                        this.showToast('Stock list copied to clipboard!');
                    }).catch(() => {
                        this.showToast('Failed to copy to clipboard', 'error');
                    });
                }
            }

            saveStock() {
                this.saveData('stockLevels', this.stockLevels);
                this.showToast('Stock levels saved!');
            }

            // Gemini Image Generator Functions
            initializeGeminiImageGen() {
                this.renderGeminiImageGrid();
            }

            addPromptSuggestion(suggestion) {
                const promptInput = document.getElementById('geminiImagePrompt');
                if (promptInput) {
                    promptInput.value = suggestion;
                    promptInput.focus();
                }
            }

            toggleAdvancedControls() {
                const advancedControls = document.getElementById('advancedControls');
                const toggleBtn = document.getElementById('toggleAdvanced');
                
                if (advancedControls.style.display === 'none' || !advancedControls.style.display) {
                    advancedControls.style.display = 'block';
                    toggleBtn.textContent = '🔼 Hide Advanced';
                } else {
                    advancedControls.style.display = 'none';
                    toggleBtn.textContent = '🛠️ Advanced Options';
                }
            }

            async enhancePromptWithGemini() {
                const promptInput = document.getElementById('geminiImagePrompt');
                const originalPrompt = promptInput.value.trim();
                
                if (!originalPrompt) {
                    this.showToast('Please enter a prompt first.', 'error');
                    return;
                }

                const enhanceBtn = document.getElementById('enhancePrompt');
                const originalText = enhanceBtn.textContent;
                enhanceBtn.textContent = '⏳ Enhancing...';
                enhanceBtn.disabled = true;

                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${this.geminiApiKey}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{
                                    text: `You are an expert prompt engineer for AI image generation. Enhance this image prompt to be more detailed, vivid, and specific for better AI image generation results. Include details about composition, lighting, colors, style, mood, and artistic elements. Keep the core concept but make it much more descriptive and engaging.

Original prompt: "${originalPrompt}"

Enhanced prompt:`
                                }]
                            }]
                        })
                    });

                    const data = await response.json();
                    
                    if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                        const enhancedPrompt = data.candidates[0].content.parts[0].text.trim();
                        this.currentEnhancedPrompt = enhancedPrompt;
                        
                        const enhancedSection = document.getElementById('enhancedPromptSection');
                        const enhancedDisplay = document.getElementById('enhancedPromptDisplay');
                        
                        enhancedDisplay.innerHTML = `<p><strong>Original:</strong> ${originalPrompt}</p><p><strong>Enhanced:</strong> ${enhancedPrompt}</p>`;
                        enhancedSection.style.display = 'block';
                        
                        this.showToast('Prompt enhanced successfully!');
                    } else {
                        throw new Error('No enhanced prompt received');
                    }
                } catch (error) {
                    console.error('Error enhancing prompt:', error);
                    this.showToast('Failed to enhance prompt. Please try again.', 'error');
                } finally {
                    enhanceBtn.textContent = originalText;
                    enhanceBtn.disabled = false;
                }
            }

            useEnhancedPrompt() {
                if (this.currentEnhancedPrompt) {
                    const promptInput = document.getElementById('geminiImagePrompt');
                    promptInput.value = this.currentEnhancedPrompt;
                    document.getElementById('enhancedPromptSection').style.display = 'none';
                    this.showToast('Enhanced prompt applied!');
                }
            }

            regeneratePrompt() {
                this.enhancePromptWithGemini();
            }

            async generateGeminiImages() {
                const prompt = document.getElementById('geminiImagePrompt').value.trim();
                const style = document.getElementById('geminiImageStyle').value;
                const quality = document.getElementById('geminiImageQuality').value;
                const count = parseInt(document.getElementById('geminiImageCount').value);
                const ratio = document.getElementById('geminiImageRatio').value;
                const mood = document.getElementById('geminiImageMood').value;

                if (!prompt) {
                    this.showToast('Please enter an image description.', 'error');
                    return;
                }

                // Show progress
                const progressSection = document.getElementById('geminiGenerationProgress');
                const progressFill = document.getElementById('geminiProgressFill');
                const progressText = document.getElementById('geminiProgressText');
                const progressPercent = document.getElementById('geminiProgressPercent');
                
                progressSection.style.display = 'block';
                progressFill.style.width = '0%';
                progressPercent.textContent = '0%';

                // Build full prompt
                let fullPrompt = prompt;
                if (style) fullPrompt += `, ${style}`;
                if (mood) fullPrompt += `, ${mood}`;
                if (quality === 'high') fullPrompt += ', high quality, detailed';
                if (quality === 'ultra') fullPrompt += ', ultra high quality, 4K, highly detailed';
                
                try {
                    for (let i = 0; i < count; i++) {
                        const progress = ((i + 1) / count) * 100;
                        progressFill.style.width = `${progress}%`;
                        progressPercent.textContent = `${Math.round(progress)}%`;
                        progressText.textContent = `Generating image ${i + 1} of ${count}...`;

                        // Enhanced image generation with better quality
                        const imageData = await this.generateAdvancedImage(fullPrompt, ratio, quality);
                        
                        const imageObj = {
                            id: Date.now() + i,
                            url: imageData,
                            prompt: fullPrompt,
                            originalPrompt: prompt,
                            style: style,
                            quality: quality,
                            ratio: ratio,
                            mood: mood,
                            timestamp: new Date().toISOString()
                        };

                        this.geminiImages.push(imageObj);
                    }

                    this.renderGeminiImageGrid();
                    this.saveData('geminiImages', this.geminiImages);
                    this.showToast(`Successfully generated ${count} image${count > 1 ? 's' : ''}!`);

                } catch (error) {
                    console.error('Image generation error:', error);
                    this.showToast('Failed to generate images. Please try again.', 'error');
                } finally {
                    progressSection.style.display = 'none';
                }
            }

            async generateAdvancedImage(prompt, aspectRatio = '1:1', quality = 'high') {
                try {
                    // Try multiple image generation APIs
                    
                    // Method 1: Try Pollinations AI (free service)
                    try {
                        const pollinationsUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt)}?width=512&height=512&seed=${Date.now()}`;
                        
                        const response = await fetch(pollinationsUrl);
                        if (response.ok) {
                            const blob = await response.blob();
                            return URL.createObjectURL(blob);
                        }
                    } catch (error) {
                        console.log('Pollinations failed, trying next method');
                    }

                    // Method 2: Try Picsum (artistic placeholder with text)
                    try {
                        const picsumUrl = `https://picsum.photos/512/512?random=${Date.now()}`;
                        const response = await fetch(picsumUrl);
                        if (response.ok) {
                            // Create enhanced version with prompt overlay
                            const img = new Image();
                            img.crossOrigin = 'anonymous';
                            
                            return new Promise((resolve) => {
                                img.onload = () => {
                                    const canvas = document.createElement('canvas');
                                    canvas.width = 512;
                                    canvas.height = 512;
                                    const ctx = canvas.getContext('2d');
                                    
                                    // Draw the image
                                    ctx.drawImage(img, 0, 0, 512, 512);
                                    
                                    // Add artistic overlay
                                    const gradient = ctx.createLinearGradient(0, 0, 512, 512);
                                    const colors = this.generateColorsFromPrompt(prompt);
                                    colors.forEach((color, index) => {
                                        gradient.addColorStop(index / (colors.length - 1), `${color}40`);
                                    });
                                    
                                    ctx.fillStyle = gradient;
                                    ctx.fillRect(0, 0, 512, 512);
                                    
                                    // Add prompt text
                                    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                                    ctx.font = 'bold 16px Arial';
                                    ctx.textAlign = 'center';
                                    ctx.strokeStyle = 'rgba(0, 0, 0, 0.5)';
                                    ctx.lineWidth = 3;
                                    
                                    const truncatedPrompt = prompt.length > 40 ? prompt.substring(0, 37) + '...' : prompt;
                                    ctx.strokeText(truncatedPrompt, 256, 480);
                                    ctx.fillText(truncatedPrompt, 256, 480);
                                    
                                    resolve(canvas.toDataURL('image/png'));
                                };
                                
                                img.src = picsumUrl;
                            });
                        }
                    } catch (error) {
                        console.log('Picsum failed, trying next method');
                    }

                    // Method 3: Try using a different free API service
                    try {
                        const freeImageUrl = `https://source.unsplash.com/512x512/?${encodeURIComponent(prompt.split(' ').slice(0, 3).join(','))}`;
                        
                        const response = await fetch(freeImageUrl);
                        if (response.ok) {
                            return new Promise((resolve) => {
                                const img = new Image();
                                img.crossOrigin = 'anonymous';
                                
                                img.onload = () => {
                                    const canvas = document.createElement('canvas');
                                    canvas.width = 512;
                                    canvas.height = 512;
                                    const ctx = canvas.getContext('2d');
                                    
                                    ctx.drawImage(img, 0, 0, 512, 512);
                                    
                                    // Add AI-style enhancement overlay
                                    const overlay = ctx.createRadialGradient(256, 256, 0, 256, 256, 256);
                                    overlay.addColorStop(0, 'rgba(100, 200, 255, 0.1)');
                                    overlay.addColorStop(1, 'rgba(255, 100, 200, 0.2)');
                                    ctx.fillStyle = overlay;
                                    ctx.fillRect(0, 0, 512, 512);
                                    
                                    // Add prompt text with AI styling
                                    ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                                    ctx.font = 'bold 14px Arial';
                                    ctx.textAlign = 'center';
                                    ctx.strokeStyle = 'rgba(0, 0, 0, 0.8)';
                                    ctx.lineWidth = 2;
                                    
                                    const promptText = '✨ AI: ' + (prompt.length > 35 ? prompt.substring(0, 32) + '...' : prompt);
                                    ctx.strokeText(promptText, 256, 30);
                                    ctx.fillText(promptText, 256, 30);
                                    
                                    resolve(canvas.toDataURL('image/png'));
                                };
                                
                                img.src = freeImageUrl;
                            });
                        }
                    } catch (error) {
                        console.log('Unsplash failed, using fallback');
                    }

                    // Fallback: Enhanced placeholder with better styling
                    return this.generateEnhancedPlaceholder(prompt, aspectRatio, quality);

                } catch (error) {
                    console.error('All image generation methods failed:', error);
                    return this.generateEnhancedPlaceholder(prompt, aspectRatio, quality);
                }
            }

            generateEnhancedPlaceholder(prompt, aspectRatio = '1:1', quality = 'high') {
                // Create canvas with specified aspect ratio
                let width = 512, height = 512;
                
                switch (aspectRatio) {
                    case '16:9': width = 576; height = 324; break;
                    case '9:16': width = 324; height = 576; break;
                    case '4:3': width = 512; height = 384; break;
                    case '3:4': width = 384; height = 512; break;
                    default: width = 512; height = 512;
                }

                if (quality === 'ultra') {
                    width *= 1.5;
                    height *= 1.5;
                }

                const canvas = document.createElement('canvas');
                canvas.width = width;
                canvas.height = height;
                const ctx = canvas.getContext('2d');

                // Create sophisticated gradient based on prompt keywords
                const colors = this.generateColorsFromPrompt(prompt);
                
                // Multiple gradient layers for depth
                const gradient1 = ctx.createLinearGradient(0, 0, width, height);
                const gradient2 = ctx.createRadialGradient(width/2, height/2, 0, width/2, height/2, Math.max(width, height)/2);
                
                colors.forEach((color, index) => {
                    gradient1.addColorStop(index / (colors.length - 1), color);
                    gradient2.addColorStop(index / (colors.length - 1), color + '80');
                });

                ctx.fillStyle = gradient1;
                ctx.fillRect(0, 0, width, height);
                
                ctx.globalCompositeOperation = 'multiply';
                ctx.fillStyle = gradient2;
                ctx.fillRect(0, 0, width, height);
                ctx.globalCompositeOperation = 'source-over';

                // Add sophisticated artistic elements
                this.addAdvancedArtisticElements(ctx, width, height, prompt);

                // Add stylized text overlay
                ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                ctx.font = `bold ${Math.min(width, height) * 0.04}px Arial`;
                ctx.textAlign = 'center';
                ctx.strokeStyle = 'rgba(0, 0, 0, 0.7)';
                ctx.lineWidth = 3;
                
                const truncatedPrompt = prompt.length > 50 ? prompt.substring(0, 47) + '...' : prompt;
                const yPos = height - (Math.min(width, height) * 0.06);
                
                ctx.strokeText('🎨 ' + truncatedPrompt, width / 2, yPos);
                ctx.fillText('🎨 ' + truncatedPrompt, width / 2, yPos);

                return canvas.toDataURL('image/png');
            }

            addAdvancedArtisticElements(ctx, width, height, prompt) {
                const promptLower = prompt.toLowerCase();
                
                // Add context-aware artistic elements
                if (promptLower.includes('space') || promptLower.includes('stars')) {
                    // Add star field
                    for (let i = 0; i < 20; i++) {
                        const x = Math.random() * width;
                        const y = Math.random() * height;
                        const size = Math.random() * 3 + 1;
                        
                        ctx.globalAlpha = Math.random() * 0.8 + 0.2;
                        ctx.fillStyle = '#ffffff';
                        ctx.beginPath();
                        ctx.arc(x, y, size, 0, Math.PI * 2);
                        ctx.fill();
                    }
                } else if (promptLower.includes('water') || promptLower.includes('ocean')) {
                    // Add wave-like patterns
                    ctx.globalAlpha = 0.3;
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.6)';
                    ctx.lineWidth = 2;
                    
                    for (let i = 0; i < 5; i++) {
                        ctx.beginPath();
                        ctx.moveTo(0, height * 0.3 + i * 20);
                        for (let x = 0; x < width; x += 10) {
                            ctx.lineTo(x, height * 0.3 + i * 20 + Math.sin(x * 0.02 + i) * 10);
                        }
                        ctx.stroke();
                    }
                } else {
                    // Add geometric shapes
                    for (let i = 0; i < 8; i++) {
                        const x = Math.random() * width;
                        const y = Math.random() * height;
                        const size = Math.random() * 60 + 20;
                        
                        ctx.globalAlpha = 0.2 + Math.random() * 0.3;
                        ctx.fillStyle = `hsl(${Math.random() * 360}, 70%, 60%)`;
                        
                        if (Math.random() > 0.5) {
                            // Circle
                            ctx.beginPath();
                            ctx.arc(x, y, size, 0, Math.PI * 2);
                            ctx.fill();
                        } else {
                            // Rectangle
                            ctx.fillRect(x - size/2, y - size/2, size, size);
                        }
                    }
                }
                
                ctx.globalAlpha = 1;
            }

            generateColorsFromPrompt(prompt) {
                const promptLower = prompt.toLowerCase();
                
                if (promptLower.includes('sunset') || promptLower.includes('orange') || promptLower.includes('warm')) {
                    return ['#ff6b35', '#f7931e', '#ffd23f', '#ff8566'];
                } else if (promptLower.includes('ocean') || promptLower.includes('blue') || promptLower.includes('water')) {
                    return ['#0077be', '#00a8e6', '#40e0d0', '#87ceeb'];
                } else if (promptLower.includes('forest') || promptLower.includes('green') || promptLower.includes('nature')) {
                    return ['#228b22', '#32cd32', '#90ee90', '#98fb98'];
                } else if (promptLower.includes('space') || promptLower.includes('cosmic') || promptLower.includes('galaxy')) {
                    return ['#191970', '#4b0082', '#8a2be2', '#9400d3'];
                } else if (promptLower.includes('fire') || promptLower.includes('red') || promptLower.includes('flame')) {
                    return ['#dc143c', '#ff4500', '#ff6347', '#ffa500'];
                } else {
                    return ['#667eea', '#764ba2', '#f093fb', '#f5576c'];
                }
            }

            addArtisticElements(ctx, width, height, prompt) {
                const promptLower = prompt.toLowerCase();
                
                // Add geometric shapes
                for (let i = 0; i < 5; i++) {
                    const x = Math.random() * width;
                    const y = Math.random() * height;
                    const radius = Math.random() * 50 + 10;
                    
                    ctx.globalAlpha = 0.3;
                    ctx.fillStyle = `hsl(${Math.random() * 360}, 70%, 60%)`;
                    ctx.beginPath();
                    ctx.arc(x, y, radius, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                ctx.globalAlpha = 1;
            }

            renderGeminiImageGrid() {
                const grid = document.getElementById('geminiImageGrid');
                if (!grid) return;

                // Show recent images (last 4) in the main grid
                const recentImages = this.geminiImages.slice(-4);

                if (recentImages.length === 0) {
                    grid.innerHTML = `
                        <div class="no-images-placeholder">
                            <div class="placeholder-icon">🎨</div>
                            <p>No images generated yet</p>
                            <p>Enter a prompt above and click "Generate Images" to get started!</p>
                        </div>
                    `;
                } else {
                    grid.innerHTML = recentImages.map(image => `
                        <div class="image-item" data-id="${image.id}">
                            <div class="image-container">
                                <img src="${image.url}" alt="Generated image" loading="lazy">
                                <div class="image-overlay">
                                    <button class="image-action-btn download-btn" onclick="app.downloadGeminiImage(${image.id})" title="Download">
                                        📥
                                    </button>
                                    <button class="image-action-btn delete-btn" onclick="app.deleteGeminiImage(${image.id})" title="Delete">
                                        🗑️
                                    </button>
                                    <button class="image-action-btn copy-btn" onclick="app.copyGeminiImagePrompt('${image.originalPrompt}')" title="Copy Prompt">
                                        📋
                                    </button>
                                </div>
                            </div>
                            <div class="image-info">
                                <p class="image-prompt">${image.originalPrompt}</p>
                                <div class="image-meta">
                                    <span class="meta-tag">${image.style || 'Natural'}</span>
                                    <span class="meta-tag">${image.quality}</span>
                                    <span class="meta-tag">${image.ratio || '1:1'}</span>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }

                // Also render the full gallery
                this.renderAllImagesGallery();
            }

            downloadGeminiImage(imageId) {
                const image = this.geminiImages.find(img => img.id === imageId);
                if (image) {
                    const link = document.createElement('a');
                    link.download = `gemini-image-${imageId}.png`;
                    link.href = image.url;
                    link.click();
                }
            }

            deleteGeminiImage(imageId) {
                if (confirm('Delete this image?')) {
                    this.geminiImages = this.geminiImages.filter(img => img.id !== imageId);
                    this.saveData('geminiImages', this.geminiImages);
                    this.renderGeminiImageGrid();
                    this.showToast('Image deleted');
                }
            }

            copyGeminiImagePrompt(prompt) {
                navigator.clipboard.writeText(prompt).then(() => {
                    this.showToast('Prompt copied to clipboard!');
                }).catch(() => {
                    this.showToast('Failed to copy prompt', 'error');
                });
            }

            // X-CLONE Methods
            initializeXClone() {
                // Initialize X-CLONE specific data
                if (!this.xCloneTweets) {
                    this.xCloneTweets = [
                        {
                            id: 1,
                            author: "Tech Insider",
                            handle: "@techinsider",
                            time: "2h",
                            text: "Just discovered an amazing new JavaScript framework that makes development so much faster! 🚀 #WebDev #JavaScript",
                            likes: 234,
                            retweets: 45,
                            replies: 12
                        },
                        {
                            id: 2,
                            author: "Design Studio",
                            handle: "@designstudio",
                            time: "4h",
                            text: "The future of UI design is here. Clean, minimal, and user-focused interfaces are taking over. What's your favorite design trend? 🎨",
                            likes: 189,
                            retweets: 67,
                            replies: 23
                        },
                        {
                            id: 3,
                            author: "Code Academy",
                            handle: "@codeacademy",
                            time: "6h",
                            text: "🧵 Thread: 10 Essential VS Code Extensions Every Developer Should Know\n\n1. Prettier - Code formatting\n2. ESLint - Code linting\n3. GitLens - Git integration\n...",
                            likes: 456,
                            retweets: 123,
                            replies: 34
                        },
                        {
                            id: 4,
                            author: "Startup News",
                            handle: "@startupnews",
                            time: "8h",
                            text: "BREAKING: AI startup raises $50M in Series A funding. This could revolutionize how we think about machine learning applications. 💰",
                            likes: 678,
                            retweets: 234,
                            replies: 89
                        },
                        {
                            id: 5,
                            author: "Open Source",
                            handle: "@opensource",
                            time: "12h",
                            text: "Contributing to open source projects is one of the best ways to improve your coding skills and give back to the community. Start small, dream big! 🌟",
                            likes: 321,
                            retweets: 89,
                            replies: 45
                        }
                    ];
                }
                
                this.currentXPage = 'home';
                this.setupXCloneNavigation();
                this.loadXTweets();
                this.setupXPostFunctionality();
            }
            
            setupXCloneNavigation() {
                const xNavItems = document.querySelectorAll('.x-nav-item');
                
                xNavItems.forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        
                        const page = item.getAttribute('data-xpage');
                        if (page) {
                            this.navigateToXPage(page);
                        }
                    });
                });
            }
            
            navigateToXPage(pageName) {
                // Remove active class from all x nav items
                document.querySelectorAll('.x-nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // Add active class to current nav item
                const currentNavItem = document.querySelector(`[data-xpage="${pageName}"]`);
                if (currentNavItem) {
                    currentNavItem.classList.add('active');
                }
                
                // Show the corresponding page
                this.showXPage(pageName);
                
                // Update page title
                this.updateXPageTitle(this.getXPageTitle(pageName));
            }
            
            showXPage(pageName) {
                // Hide all x pages
                document.querySelectorAll('.x-page-content').forEach(page => {
                    page.classList.remove('active');
                });
                
                // Show the selected page
                const targetPage = document.getElementById(`x-${pageName}`);
                if (targetPage) {
                    targetPage.classList.add('active');
                    
                    // Load page-specific content
                    this.loadXPageContent(pageName);
                }
            }
            
            updateXPageTitle(title) {
                const titleElement = document.getElementById('xPageTitle');
                if (titleElement) {
                    titleElement.textContent = title;
                }
            }
            
            getXPageTitle(pageName) {
                const titles = {
                    'home': 'Home',
                    'explore': 'Explore',
                    'notifications': 'Notifications',
                    'messages': 'Messages',
                    'supergrok': 'SuperGrok',
                    'premium': 'Premium',
                    'profile': 'Profile'
                };
                
                return titles[pageName] || 'Page';
            }
            
            loadXPageContent(pageName) {
                switch(pageName) {
                    case 'home':
                        this.loadXTweets();
                        break;
                    case 'profile':
                        this.loadXProfileTweets();
                        break;
                    case 'explore':
                        // Explore content is static for now
                        break;
                    case 'messages':
                        // Messages content is static for now
                        break;
                    default:
                        // Other pages have static content
                        break;
                }
            }
            
            loadXTweets() {
                const tweetFeed = document.getElementById('xTweetFeed');
                if (!tweetFeed) return;
                
                tweetFeed.innerHTML = '';
                
                this.xCloneTweets.forEach(tweet => {
                    const tweetElement = this.createXTweetElement(tweet);
                    tweetFeed.appendChild(tweetElement);
                });
            }
            
            loadXProfileTweets() {
                const profileTweets = document.getElementById('xProfileTweets');
                if (!profileTweets) return;
                
                // Show only user's tweets (simulate filtering)
                const userTweets = this.xCloneTweets.slice(0, 3);
                profileTweets.innerHTML = '';
                
                userTweets.forEach(tweet => {
                    const tweetElement = this.createXTweetElement(tweet);
                    profileTweets.appendChild(tweetElement);
                });
            }
            
            createXTweetElement(tweet) {
                const tweetDiv = document.createElement('div');
                tweetDiv.className = 'x-tweet';
                tweetDiv.innerHTML = `
                    <div class="x-tweet-avatar"></div>
                    <div class="x-tweet-content">
                        <div class="x-tweet-header">
                            <span class="x-tweet-author">${tweet.author}</span>
                            <span class="x-tweet-handle">${tweet.handle}</span>
                            <span class="x-tweet-time"> · ${tweet.time}</span>
                        </div>
                        <div class="x-tweet-text">${tweet.text}</div>
                        <div class="x-tweet-actions">
                            <button class="x-action-btn" onclick="app.replyToXTweet(${tweet.id})">
                                💬 <span>${tweet.replies}</span>
                            </button>
                            <button class="x-action-btn" onclick="app.retweetXTweet(${tweet.id})">
                                🔄 <span>${tweet.retweets}</span>
                            </button>
                            <button class="x-action-btn" onclick="app.likeXTweet(${tweet.id})">
                                ❤️ <span>${tweet.likes}</span>
                            </button>
                            <button class="x-action-btn" onclick="app.shareXTweet(${tweet.id})">
                                📤
                            </button>
                        </div>
                    </div>
                `;
                return tweetDiv;
            }
            
            setupXPostFunctionality() {
                const tweetTextarea = document.querySelector('.x-tweet-textarea');
                const tweetBtn = document.querySelector('.x-tweet-btn');
                
                if (tweetTextarea) {
                    tweetTextarea.addEventListener('input', function() {
                        const text = this.value.trim();
                        if (tweetBtn) {
                            tweetBtn.disabled = text.length === 0;
                            tweetBtn.style.opacity = text.length === 0 ? '0.5' : '1';
                        }
                    });
                }
            }
            
            postXTweet() {
                const tweetTextarea = document.querySelector('.x-tweet-textarea');
                if (!tweetTextarea) return;
                
                const text = tweetTextarea.value.trim();
                if (text.length === 0) {
                    this.showToast('Please enter some text for your post!', 'error');
                    return;
                }
                
                if (text.length > 280) {
                    this.showToast('Tweet is too long! Please keep it under 280 characters.', 'error');
                    return;
                }
                
                // Create new tweet object
                const newTweet = {
                    id: Date.now(),
                    author: "Jamie-Lee",
                    handle: "@sillthor194451",
                    time: "now",
                    text: text,
                    likes: 0,
                    retweets: 0,
                    replies: 0
                };
                
                // Add to beginning of tweets array
                this.xCloneTweets.unshift(newTweet);
                
                // Refresh the feed
                this.loadXTweets();
                
                // Clear the textarea
                tweetTextarea.value = '';
                
                // Reset tweet button state
                const tweetBtn = document.querySelector('.x-tweet-btn');
                if (tweetBtn) {
                    tweetBtn.disabled = true;
                    tweetBtn.style.opacity = '0.5';
                }
                
                // Show success message
                this.showToast('Tweet posted successfully!');
            }
            
            replyToXTweet(tweetId) {
                this.showToast('Reply functionality coming soon!');
            }
            
            retweetXTweet(tweetId) {
                const tweet = this.xCloneTweets.find(t => t.id === tweetId);
                if (tweet) {
                    tweet.retweets++;
                    this.loadXTweets();
                    this.showToast('Retweeted!');
                }
            }
            
            likeXTweet(tweetId) {
                const tweet = this.xCloneTweets.find(t => t.id === tweetId);
                if (tweet) {
                    tweet.likes++;
                    this.loadXTweets();
                    this.showToast('Liked!');
                }
            }
            
            shareXTweet(tweetId) {
                this.showToast('Share functionality coming soon!');
            }
            
            openXPostModal() {
                // Focus on the tweet textarea
                const tweetTextarea = document.querySelector('.x-tweet-textarea');
                if (tweetTextarea) {
                    // First navigate to home page
                    this.navigateToXPage('home');
                    
                    // Then focus on textarea after a short delay
                    setTimeout(() => {
                        tweetTextarea.focus();
                    }, 100);
                }
            }
            
            openXChat(userId) {
                this.showToast(`Opening chat with ${userId}`);
                // In a real app, this would load the specific chat conversation
            }
            
            sendXMessage() {
                const messageInput = document.querySelector('.x-message-input');
                if (!messageInput) return;
                
                const text = messageInput.value.trim();
                if (text.length === 0) return;
                
                // Add message to chat (simulate)
                const chatMessages = document.getElementById('xChatMessages');
                if (chatMessages) {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'x-message';
                    messageDiv.innerHTML = `
                        <div class="x-message-avatar"></div>
                        <div class="x-message-content">${text}</div>
                    `;
                    chatMessages.appendChild(messageDiv);
                    
                    // Clear input
                    messageInput.value = '';
                    
                    // Scroll to bottom
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }
            }

            clearGeminiImages() {
                if (confirm('Clear all generated images?')) {
                    this.geminiImages = [];
                    this.saveData('geminiImages', this.geminiImages);
                    this.renderGeminiImageGrid();
                    this.showToast('All images cleared');
                }
            }

            downloadAllGeminiImages() {
                if (this.geminiImages.length === 0) {
                    this.showToast('No images to download', 'error');
                    return;
                }

                this.geminiImages.forEach((image, index) => {
                    setTimeout(() => {
                        const link = document.createElement('a');
                        link.download = `gemini-image-${index + 1}.png`;
                        link.href = image.url;
                        link.click();
                    }, index * 500);
                });

                this.showToast(`Downloading ${this.geminiImages.length} images...`);
            }

            // Gallery Functions
            renderAllImagesGallery() {
                const galleryContainer = document.getElementById('allImagesGallery');
                if (!galleryContainer) return;

                const filteredImages = this.getFilteredImages();
                
                if (filteredImages.length === 0) {
                    galleryContainer.innerHTML = `
                        <div class="gallery-placeholder">
                            <div class="placeholder-icon">🎨</div>
                            <p>No images found for the current filter</p>
                            <p>Try generating some images or changing the filter!</p>
                        </div>
                    `;
                    document.getElementById('galleryPagination').style.display = 'none';
                    return;
                }

                // Calculate pagination
                const totalPages = Math.ceil(filteredImages.length / this.galleryItemsPerPage);
                const startIndex = (this.galleryCurrentPage - 1) * this.galleryItemsPerPage;
                const endIndex = startIndex + this.galleryItemsPerPage;
                const currentPageImages = filteredImages.slice(startIndex, endIndex);

                // Render images
                const viewClass = this.galleryViewMode === 'grid' ? 'gallery-grid-view' : 'gallery-list-view';
                galleryContainer.className = `gallery-container ${viewClass}`;
                
                galleryContainer.innerHTML = currentPageImages.map(image => {
                    const itemClass = this.galleryViewMode === 'grid' ? 'grid-item' : 'list-item';
                    
                    if (this.galleryViewMode === 'list') {
                        return `
                            <div class="gallery-item ${itemClass}" data-id="${image.id}">
                                <img src="${image.url}" alt="Generated image" loading="lazy">
                                <div class="gallery-item-info">
                                    <p class="gallery-item-prompt">${image.originalPrompt}</p>
                                    <div class="gallery-item-meta">
                                        <span>${image.style || 'Natural'}</span> • 
                                        <span>${image.quality}</span> • 
                                        <span>${new Date(image.timestamp).toLocaleDateString()}</span>
                                    </div>
                                </div>
                                <div class="gallery-item-actions">
                                    <button class="gallery-action-btn" onclick="app.downloadGeminiImage(${image.id})" title="Download">📥</button>
                                    <button class="gallery-action-btn" onclick="app.copyGeminiImagePrompt('${image.originalPrompt}')" title="Copy Prompt">📋</button>
                                    <button class="gallery-action-btn" onclick="app.deleteGeminiImage(${image.id})" title="Delete">🗑️</button>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="gallery-item ${itemClass}" data-id="${image.id}">
                                <img src="${image.url}" alt="Generated image" loading="lazy">
                                <div class="gallery-item-overlay">
                                    <p class="gallery-item-prompt">${image.originalPrompt}</p>
                                    <div class="gallery-item-actions">
                                        <button class="gallery-action-btn" onclick="app.downloadGeminiImage(${image.id})" title="Download">📥</button>
                                        <button class="gallery-action-btn" onclick="app.copyGeminiImagePrompt('${image.originalPrompt}')" title="Copy Prompt">📋</button>
                                        <button class="gallery-action-btn" onclick="app.deleteGeminiImage(${image.id})" title="Delete">🗑️</button>
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                }).join('');

                // Update pagination
                this.updateGalleryPagination(totalPages);
            }

            getFilteredImages() {
                let filtered = [...this.geminiImages];
                
                switch (this.galleryFilter) {
                    case 'recent':
                        filtered = filtered.slice(-10);
                        break;
                    case 'favorites':
                        filtered = filtered.filter(img => img.favorite);
                        break;
                    default:
                        // Show all images, most recent first
                        filtered = filtered.reverse();
                }
                
                return filtered;
            }

            updateGalleryPagination(totalPages) {
                const pagination = document.getElementById('galleryPagination');
                const pageInfo = document.getElementById('pageInfo');
                const prevBtn = document.getElementById('prevPage');
                const nextBtn = document.getElementById('nextPage');
                
                if (totalPages <= 1) {
                    pagination.style.display = 'none';
                    return;
                }
                
                pagination.style.display = 'flex';
                pageInfo.textContent = `Page ${this.galleryCurrentPage} of ${totalPages}`;
                
                prevBtn.disabled = this.galleryCurrentPage <= 1;
                nextBtn.disabled = this.galleryCurrentPage >= totalPages;
            }

            filterGallery() {
                const filterSelect = document.getElementById('galleryFilter');
                this.galleryFilter = filterSelect.value;
                this.galleryCurrentPage = 1;
                this.renderAllImagesGallery();
            }

            toggleGalleryView() {
                const toggleSpan = document.getElementById('galleryViewToggle');
                
                if (this.galleryViewMode === 'grid') {
                    this.galleryViewMode = 'list';
                    toggleSpan.textContent = '📋 List View';
                } else {
                    this.galleryViewMode = 'grid';
                    toggleSpan.textContent = '🔲 Grid View';
                }
                
                this.renderAllImagesGallery();
            }

            previousGalleryPage() {
                if (this.galleryCurrentPage > 1) {
                    this.galleryCurrentPage--;
                    this.renderAllImagesGallery();
                }
            }

            nextGalleryPage() {
                const filteredImages = this.getFilteredImages();
                const totalPages = Math.ceil(filteredImages.length / this.galleryItemsPerPage);
                
                if (this.galleryCurrentPage < totalPages) {
                    this.galleryCurrentPage++;
                    this.renderAllImagesGallery();
                }
            }

            // Utility Functions
            showToast(message, type = 'success') {
                const toast = document.createElement('div');
                toast.className = `toast ${type === 'error' ? 'error' : ''}`;
                toast.textContent = message;
                
                document.body.appendChild(toast);
                
                // Trigger animation
                setTimeout(() => toast.classList.add('show'), 100);
                
                // Remove toast after 3 seconds
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => document.body.removeChild(toast), 300);
                }, 3000);
            }

            // ============ GAME SYSTEM ============
            initGame() {
                this.gameState = {
                    isRunning: false,
                    isPaused: false,
                    score: 0,
                    time: 0,
                    combo: 1,
                    weaponsDodged: 0,
                    energy: 100,
                    maxEnergy: 100,
                    energyRegenRate: 0.5,
                    dashCost: 20,
                    difficulty: 1
                };

                // Initialize scaling factors
                this.scaleX = 1;
                this.scaleY = 1;
                this.isFullscreen = false;
                this.originalCanvasSize = null;
                this.performanceMode = false;

                this.player = {
                    x: 400,
                    y: 300,
                    size: 20,
                    speed: 5,
                    dashSpeed: 12,
                    isDashing: false,
                    trail: []
                };

                this.weapons = [];
                this.particles = [];
                this.controller = null;
                this.keys = {
                    w: false, a: false, s: false, d: false,
                    up: false, left: false, down: false, right: false,
                    dash: false
                };

                this.canvas = document.getElementById('gameCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.highScores = this.loadData('gameHighScores', []);

                this.setupEventListeners();
                this.setupGamepadSupport();
                this.updateHighScores();
            }

            setupEventListeners() {
                // Game buttons
                document.getElementById('startGameBtn').onclick = () => this.startGame();
                document.getElementById('pauseGameBtn').onclick = () => this.pauseGame();
                document.getElementById('restartGameBtn').onclick = () => this.restartGame();
                document.getElementById('backToMenuBtn').onclick = () => this.backToMenu();
                document.getElementById('fullscreenBtn').onclick = () => this.toggleFullscreen();

                // Fullscreen change event listener
                document.addEventListener('fullscreenchange', () => this.handleFullscreenChange());
                document.addEventListener('webkitfullscreenchange', () => this.handleFullscreenChange()); // Safari
                document.addEventListener('msfullscreenchange', () => this.handleFullscreenChange()); // IE11

                // Keyboard controls
                document.addEventListener('keydown', (e) => {
                    switch(e.code) {
                        case 'KeyW': case 'ArrowUp': this.keys.w = this.keys.up = true; break;
                        case 'KeyA': case 'ArrowLeft': this.keys.a = this.keys.left = true; break;
                        case 'KeyS': case 'ArrowDown': this.keys.s = this.keys.down = true; break;
                        case 'KeyD': case 'ArrowRight': this.keys.d = this.keys.right = true; break;
                        case 'Space': case 'ShiftLeft': case 'ShiftRight': 
                            this.keys.dash = true; 
                            e.preventDefault(); 
                            break;
                        case 'Escape':
                            if (this.gameState.isRunning) this.pauseGame();
                            break;
                        case 'F11':
                            this.toggleFullscreen();
                            e.preventDefault();
                            break;
                    }
                });

                document.addEventListener('keyup', (e) => {
                    switch(e.code) {
                        case 'KeyW': case 'ArrowUp': this.keys.w = this.keys.up = false; break;
                        case 'KeyA': case 'ArrowLeft': this.keys.a = this.keys.left = false; break;
                        case 'KeyS': case 'ArrowDown': this.keys.s = this.keys.down = false; break;
                        case 'KeyD': case 'ArrowRight': this.keys.d = this.keys.right = false; break;
                        case 'Space': case 'ShiftLeft': case 'ShiftRight': this.keys.dash = false; break;
                    }
                });
            }

            setupGamepadSupport() {
                window.addEventListener("gamepadconnected", (e) => {
                    this.controller = e.gamepad;
                    this.showToast(`🎮 Controller connected: ${e.gamepad.id}`);
                });

                window.addEventListener("gamepaddisconnected", (e) => {
                    this.controller = null;
                    this.showToast("🎮 Controller disconnected");
                });
            }

            updateControllerInput() {
                if (!this.controller) return;

                const gamepads = navigator.getGamepads();
                this.controller = gamepads[this.controller.index];

                if (this.controller) {
                    // Left stick movement
                    const leftStickX = this.controller.axes[0];
                    const leftStickY = this.controller.axes[1];
                    
                    // Dead zone
                    const deadZone = 0.2;
                    
                    this.keys.left = leftStickX < -deadZone;
                    this.keys.right = leftStickX > deadZone;
                    this.keys.up = leftStickY < -deadZone;
                    this.keys.down = leftStickY > deadZone;
                    
                    // Dash buttons (A, X, Right Bumper, Right Trigger)
                    this.keys.dash = this.controller.buttons[0].pressed || 
                                    this.controller.buttons[2].pressed ||
                                    this.controller.buttons[5].pressed ||
                                    this.controller.buttons[7].value > 0.5;
                }
            }

            startGame() {
                this.gameState = {
                    isRunning: true,
                    isPaused: false,
                    score: 0,
                    time: 0,
                    combo: 1,
                    weaponsDodged: 0,
                    energy: 100,
                    maxEnergy: 100,
                    energyRegenRate: 0.5,
                    dashCost: 20,
                    difficulty: 1
                };

                this.player = {
                    x: this.canvas.width / 2,
                    y: this.canvas.height / 2,
                    size: 20,
                    speed: 5,
                    dashSpeed: 12,
                    isDashing: false,
                    trail: []
                };

                this.weapons = [];
                this.particles = [];

                document.getElementById('gameOverlay').style.display = 'none';
                document.getElementById('gameStats').style.display = 'flex';
                document.getElementById('startGameBtn').style.display = 'none';
                document.getElementById('pauseGameBtn').style.display = 'block';

                this.gameLoop();
            }

            pauseGame() {
                this.gameState.isPaused = !this.gameState.isPaused;
                const btn = document.getElementById('pauseGameBtn');
                btn.textContent = this.gameState.isPaused ? '▶️ RESUME' : '⏸️ PAUSE';
            }

            toggleFullscreen() {
                const gameWrapper = document.querySelector('.game-wrapper');
                const canvas = document.getElementById('gameCanvas');

                try {
                    if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {
                        // Enter fullscreen for the game wrapper
                        if (gameWrapper.requestFullscreen) {
                            gameWrapper.requestFullscreen().catch(err => {
                                console.error('Error entering fullscreen:', err);
                                this.showToast('Fullscreen failed. Try using F11 instead.', 'error');
                            });
                        } else if (gameWrapper.webkitRequestFullscreen) { // Safari
                            gameWrapper.webkitRequestFullscreen();
                        } else if (gameWrapper.msRequestFullscreen) { // IE11
                            gameWrapper.msRequestFullscreen();
                        } else {
                            this.showToast('Fullscreen not supported in this browser', 'error');
                            return;
                        }
                    } else {
                        // Exit fullscreen
                        if (document.exitFullscreen) {
                            document.exitFullscreen();
                        } else if (document.webkitExitFullscreen) { // Safari
                            document.webkitExitFullscreen();
                        } else if (document.msExitFullscreen) { // IE11
                            document.msExitFullscreen();
                        }
                    }
                } catch (error) {
                    console.error('Fullscreen error:', error);
                    this.showToast('Fullscreen error occurred', 'error');
                }
            }

            handleFullscreenChange() {
                const btn = document.getElementById('fullscreenBtn');
                const canvas = document.getElementById('gameCanvas');
                const gameWrapper = document.querySelector('.game-wrapper');

                if (document.fullscreenElement === gameWrapper ||
                    document.webkitFullscreenElement === gameWrapper ||
                    document.msFullscreenElement === gameWrapper) {
                    btn.textContent = '⛶ EXIT FULLSCREEN';

                    // Store original dimensions if not already stored
                    if (!this.originalCanvasSize) {
                        this.originalCanvasSize = {
                            width: canvas.width,
                            height: canvas.height
                        };
                    }

                    // Wait for fullscreen to be fully applied
                    setTimeout(() => {
                        // Optimize canvas size for performance in fullscreen
                        const screenWidth = window.innerWidth;
                        const screenHeight = window.innerHeight;
                        
                        // Use smaller resolution for better performance
                        const maxWidth = Math.min(1200, screenWidth * 0.8);
                        const maxHeight = Math.min(900, screenHeight * 0.8);
                        
                        // Maintain 4:3 aspect ratio (800:600)
                        const aspectRatio = 800 / 600;
                        let newWidth, newHeight;
                        
                        if (maxWidth / maxHeight > aspectRatio) {
                            newHeight = maxHeight;
                            newWidth = newHeight * aspectRatio;
                        } else {
                            newWidth = maxWidth;
                            newHeight = newWidth / aspectRatio;
                        }

                        canvas.width = Math.floor(newWidth);
                        canvas.height = Math.floor(newHeight);

                        // Calculate scaling factors
                        this.scaleX = canvas.width / 800;
                        this.scaleY = canvas.height / 600;
                        this.isFullscreen = true;

                        // Reposition player to center in new dimensions
                        if (this.player) {
                            this.player.x = canvas.width / 2;
                            this.player.y = canvas.height / 2;
                        }

                        // Clear any existing weapons and restart spawning
                        this.weapons = [];
                        this.particles = [];
                        
                        // Enable performance mode for fullscreen
                        this.performanceMode = true;
                        
                        this.showToast('🎮 Game is now fullscreen! Press ESC to exit', 'success');
                    }, 150);

                } else {
                    btn.textContent = '⛶ FULLSCREEN';

                    // Restore original dimensions if they were stored
                    if (this.originalCanvasSize) {
                        canvas.width = this.originalCanvasSize.width;
                        canvas.height = this.originalCanvasSize.height;
                        this.originalCanvasSize = null;
                    }

                    // Reset scaling
                    this.scaleX = 1;
                    this.scaleY = 1;
                    this.isFullscreen = false;

                    // Reposition player to original center
                    if (this.player) {
                        this.player.x = 400;
                        this.player.y = 300;
                    }

                    // Clear weapons and particles for clean restart
                    this.weapons = [];
                    this.particles = [];
                    
                    // Disable performance mode
                    this.performanceMode = false;
                    
                    this.showToast('🎮 Exited fullscreen mode', 'success');
                }
            }

            gameOver() {
                this.gameState.isRunning = false;
                
                // Save high score
                const newScore = {
                    score: this.gameState.score,
                    time: this.gameState.time,
                    weaponsDodged: this.gameState.weaponsDodged,
                    date: new Date().toLocaleDateString()
                };

                this.highScores.push(newScore);
                this.highScores.sort((a, b) => b.score - a.score);
                this.highScores = this.highScores.slice(0, 10); // Keep top 10
                this.saveData('gameHighScores', this.highScores);

                // Show game over screen
                document.getElementById('finalScore').textContent = this.gameState.score;
                document.getElementById('finalTime').textContent = this.gameState.time;
                document.getElementById('weaponsDodged').textContent = this.gameState.weaponsDodged;
                document.getElementById('gameOverScreen').style.display = 'block';
                document.getElementById('gameMenu').style.display = 'none';
                document.getElementById('gameOverlay').style.display = 'flex';
                document.getElementById('gameStats').style.display = 'none';

                this.updateHighScores();
                this.showToast(`💀 Game Over! Score: ${this.gameState.score}`, 'error');
            }

            restartGame() {
                this.startGame();
            }

            backToMenu() {
                document.getElementById('gameOverScreen').style.display = 'none';
                document.getElementById('gameMenu').style.display = 'block';
                document.getElementById('gameOverlay').style.display = 'flex';
                document.getElementById('gameStats').style.display = 'none';
                document.getElementById('startGameBtn').style.display = 'block';
                document.getElementById('pauseGameBtn').style.display = 'none';
            }

            gameLoop() {
                if (!this.gameState.isRunning) return;

                if (!this.gameState.isPaused) {
                    this.updateGame();
                    this.renderGame();
                }

                requestAnimationFrame(() => this.gameLoop());
            }

            updateGame() {
                this.updateControllerInput();
                this.updatePlayer();
                this.updateWeapons();
                this.updateParticles();
                this.updateGameStats();
                this.spawnWeapons();
                this.checkCollisions();
                
                // Regenerate energy
                if (this.gameState.energy < this.gameState.maxEnergy) {
                    this.gameState.energy = Math.min(this.gameState.maxEnergy, 
                        this.gameState.energy + this.gameState.energyRegenRate);
                }
            }

            updatePlayer() {
                let dx = 0, dy = 0;

                // Movement input
                if (this.keys.left || this.keys.a) dx -= 1;
                if (this.keys.right || this.keys.d) dx += 1;
                if (this.keys.up || this.keys.w) dy -= 1;
                if (this.keys.down || this.keys.s) dy += 1;

                // Normalize diagonal movement
                if (dx !== 0 && dy !== 0) {
                    dx *= 0.707;
                    dy *= 0.707;
                }

                // Dash mechanics
                let speed = this.player.speed;
                if (this.keys.dash && this.gameState.energy >= this.gameState.dashCost) {
                    if (!this.player.isDashing) {
                        this.gameState.energy -= this.gameState.dashCost;
                        this.player.isDashing = true;
                        
                        // Dash particle effect
                        this.createDashParticles();
                    }
                    speed = this.player.dashSpeed;
                } else {
                    this.player.isDashing = false;
                }

                // Update position
                this.player.x += dx * speed;
                this.player.y += dy * speed;

                // Keep player in bounds - use dynamic canvas dimensions
                this.player.x = Math.max(this.player.size,
                    Math.min(this.canvas.width - this.player.size, this.player.x));
                this.player.y = Math.max(this.player.size,
                    Math.min(this.canvas.height - this.player.size, this.player.y));

                // Update trail - reduce in performance mode
                if (this.player.isDashing || (dx !== 0 || dy !== 0)) {
                    this.player.trail.push({
                        x: this.player.x,
                        y: this.player.y,
                        life: 1.0
                    });

                    const maxTrailLength = this.performanceMode ? 8 : 15;
                    if (this.player.trail.length > maxTrailLength) {
                        this.player.trail.shift();
                    }
                }

                // Update trail life
                this.player.trail.forEach(point => {
                    point.life -= 0.1;
                });
                this.player.trail = this.player.trail.filter(point => point.life > 0);
            }

            spawnWeapons() {
                // Reduce spawn rate in performance mode to maintain smooth gameplay
                const baseSpawnRate = this.performanceMode ? 0.015 : 0.02;
                const spawnRate = baseSpawnRate + (this.gameState.difficulty * 0.005);
                if (Math.random() < spawnRate) {
                    this.createWeapon();
                }
            }

            createWeapon() {
                const weaponTypes = [
                    { emoji: '🗡️', size: 25, speed: 3 + this.gameState.difficulty * 0.3 },
                    { emoji: '🏹', size: 20, speed: 4 + this.gameState.difficulty * 0.4 },
                    { emoji: '🔫', size: 15, speed: 6 + this.gameState.difficulty * 0.5 },
                    { emoji: '💣', size: 30, speed: 2 + this.gameState.difficulty * 0.2 },
                    { emoji: '🪓', size: 28, speed: 2.5 + this.gameState.difficulty * 0.3 },
                    { emoji: '⚔️', size: 26, speed: 3.5 + this.gameState.difficulty * 0.35 }
                ];

                const type = weaponTypes[Math.floor(Math.random() * weaponTypes.length)];
                const side = Math.floor(Math.random() * 4);
                let x, y, dx, dy;

                switch(side) {
                    case 0: // Top
                        x = Math.random() * this.canvas.width;
                        y = -type.size;
                        dx = (this.player.x - x) * 0.001;
                        dy = type.speed;
                        break;
                    case 1: // Right
                        x = this.canvas.width + type.size;
                        y = Math.random() * this.canvas.height;
                        dx = -type.speed;
                        dy = (this.player.y - y) * 0.001;
                        break;
                    case 2: // Bottom
                        x = Math.random() * this.canvas.width;
                        y = this.canvas.height + type.size;
                        dx = (this.player.x - x) * 0.001;
                        dy = -type.speed;
                        break;
                    case 3: // Left
                        x = -type.size;
                        y = Math.random() * this.canvas.height;
                        dx = type.speed;
                        dy = (this.player.y - y) * 0.001;
                        break;
                }

                this.weapons.push({
                    x, y, dx, dy,
                    size: type.size,
                    emoji: type.emoji,
                    rotation: Math.random() * Math.PI * 2,
                    rotationSpeed: (Math.random() - 0.5) * 0.2
                });
            }

            updateWeapons() {
                this.weapons.forEach(weapon => {
                    weapon.x += weapon.dx;
                    weapon.y += weapon.dy;
                    weapon.rotation += weapon.rotationSpeed;
                });

                // Remove off-screen weapons - use dynamic bounds
                this.weapons = this.weapons.filter(weapon =>
                    weapon.x > -100 && weapon.x < this.canvas.width + 100 &&
                    weapon.y > -100 && weapon.y < this.canvas.height + 100);
            }

            checkCollisions() {
                for (let i = this.weapons.length - 1; i >= 0; i--) {
                    const weapon = this.weapons[i];
                    const dist = Math.hypot(weapon.x - this.player.x, weapon.y - this.player.y);
                    
                    if (dist < (weapon.size + this.player.size) / 2) {
                        // Player hit!
                        this.createExplosionParticles(this.player.x, this.player.y);
                        this.gameOver();
                        return;
                    }

                    // Check if weapon passed player (for scoring)
                    if ((weapon.dx > 0 && weapon.x > this.player.x + 50) ||
                        (weapon.dx < 0 && weapon.x < this.player.x - 50) ||
                        (weapon.dy > 0 && weapon.y > this.player.y + 50) ||
                        (weapon.dy < 0 && weapon.y < this.player.y - 50)) {
                        
                        if (!weapon.scored) {
                            weapon.scored = true;
                            this.gameState.weaponsDodged++;
                            this.gameState.score += 10 * this.gameState.combo;
                            this.gameState.combo = Math.min(this.gameState.combo + 0.1, 5);
                            
                            // Bonus points for close calls
                            if (dist < 50) {
                                this.gameState.score += 25;
                                this.createCloseCallParticles(weapon.x, weapon.y);
                            }
                        }
                    }
                }
            }

            updateGameStats() {
                this.gameState.time += 1/60;
                this.gameState.difficulty = 1 + (this.gameState.time / 30);
                
                // Combo decay
                if (this.gameState.combo > 1) {
                    this.gameState.combo = Math.max(1, this.gameState.combo - 0.005);
                }

                // Update UI
                document.getElementById('currentScore').textContent = Math.floor(this.gameState.score);
                document.getElementById('gameTime').textContent = Math.floor(this.gameState.time) + 's';
                document.getElementById('comboCounter').textContent = 'x' + this.gameState.combo.toFixed(1);
                
                const energyFill = document.getElementById('energyFill');
                energyFill.style.width = (this.gameState.energy / this.gameState.maxEnergy * 100) + '%';
            }

            createDashParticles() {
                const particleCount = this.performanceMode ? 4 : 8;
                for (let i = 0; i < particleCount; i++) {
                    this.particles.push({
                        x: this.player.x + (Math.random() - 0.5) * 20,
                        y: this.player.y + (Math.random() - 0.5) * 20,
                        dx: (Math.random() - 0.5) * 4,
                        dy: (Math.random() - 0.5) * 4,
                        life: 1.0,
                        decay: this.performanceMode ? 0.08 : 0.05,
                        color: '#ffaa00',
                        size: Math.random() * 5 + 2
                    });
                }
            }

            createExplosionParticles(x, y) {
                const particleCount = this.performanceMode ? 10 : 20;
                for (let i = 0; i < particleCount; i++) {
                    this.particles.push({
                        x: x + (Math.random() - 0.5) * 30,
                        y: y + (Math.random() - 0.5) * 30,
                        dx: (Math.random() - 0.5) * 8,
                        dy: (Math.random() - 0.5) * 8,
                        life: 1.0,
                        decay: this.performanceMode ? 0.04 : 0.02,
                        color: '#ff4444',
                        size: Math.random() * 8 + 3
                    });
                }
            }

            createCloseCallParticles(x, y) {
                const particleCount = this.performanceMode ? 3 : 6;
                for (let i = 0; i < particleCount; i++) {
                    this.particles.push({
                        x: x + (Math.random() - 0.5) * 20,
                        y: y + (Math.random() - 0.5) * 20,
                        dx: (Math.random() - 0.5) * 3,
                        dy: (Math.random() - 0.5) * 3,
                        life: 1.0,
                        decay: this.performanceMode ? 0.06 : 0.03,
                        color: '#44ff44',
                        size: Math.random() * 4 + 2
                    });
                }
            }

            updateParticles() {
                this.particles.forEach(particle => {
                    particle.x += particle.dx;
                    particle.y += particle.dy;
                    particle.life -= particle.decay;
                    particle.dx *= 0.98;
                    particle.dy *= 0.98;
                });

                this.particles = this.particles.filter(particle => particle.life > 0);
            }

            renderGame() {
                const ctx = this.ctx;
                const canvas = this.canvas;

                // Clear the entire canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Draw background grid
                this.drawBackground();

                // Draw player trail
                this.drawPlayerTrail();

                // Draw player
                this.drawPlayer();

                // Draw weapons
                this.drawWeapons();

                // Draw particles
                this.drawParticles();

                // Draw UI elements
                this.drawGameUI();
            }

            drawBackground() {
                const ctx = this.ctx;
                const canvas = this.canvas;
                
                // Skip detailed background in performance mode
                if (this.performanceMode) {
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.02)';
                    ctx.lineWidth = 1;
                    
                    // Draw fewer grid lines for better performance
                    const gridSpacing = Math.max(100, Math.floor(100 * Math.min(this.scaleX, this.scaleY)));
                    
                    // Only draw every other line
                    for (let x = 0; x <= canvas.width; x += gridSpacing * 2) {
                        ctx.beginPath();
                        ctx.moveTo(x, 0);
                        ctx.lineTo(x, canvas.height);
                        ctx.stroke();
                    }
                    
                    for (let y = 0; y <= canvas.height; y += gridSpacing * 2) {
                        ctx.beginPath();
                        ctx.moveTo(0, y);
                        ctx.lineTo(canvas.width, y);
                        ctx.stroke();
                    }
                } else {
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
                    ctx.lineWidth = 1;

                    // Calculate grid spacing based on scaling
                    const gridSpacing = Math.max(25, Math.floor(50 * Math.min(this.scaleX, this.scaleY)));

                    // Grid lines - vertical
                    for (let x = 0; x <= canvas.width; x += gridSpacing) {
                        ctx.beginPath();
                        ctx.moveTo(x, 0);
                        ctx.lineTo(x, canvas.height);
                        ctx.stroke();
                    }

                    // Grid lines - horizontal
                    for (let y = 0; y <= canvas.height; y += gridSpacing) {
                        ctx.beginPath();
                        ctx.moveTo(0, y);
                        ctx.lineTo(canvas.width, y);
                        ctx.stroke();
                    }
                }
            }

            drawPlayerTrail() {
                const ctx = this.ctx;
                
                // Reduce trail complexity in performance mode
                const trailPoints = this.performanceMode ? 
                    this.player.trail.filter((_, index) => index % 2 === 0) : 
                    this.player.trail;
                
                trailPoints.forEach((point, index) => {
                    const alpha = point.life * (index / trailPoints.length);
                    const size = this.player.size * point.life * 0.5;
                    
                    ctx.globalAlpha = alpha;
                    ctx.fillStyle = this.player.isDashing ? '#ffaa00' : '#ffffff';
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, size, 0, Math.PI * 2);
                    ctx.fill();
                });
                ctx.globalAlpha = 1;
            }

            drawPlayer() {
                const ctx = this.ctx;
                const glow = this.player.isDashing ? 15 : 5;
                
                // Reduce glow effects in performance mode
                if (!this.performanceMode) {
                    ctx.shadowBlur = glow;
                    ctx.shadowColor = this.player.isDashing ? '#ffaa00' : '#ffffff';
                } else {
                    ctx.shadowBlur = 0;
                }
                
                // Player body
                ctx.fillStyle = this.player.isDashing ? '#ffaa00' : '#ffffff';
                ctx.beginPath();
                ctx.arc(this.player.x, this.player.y, this.player.size, 0, Math.PI * 2);
                ctx.fill();
                
                // Player face
                ctx.shadowBlur = 0;
                ctx.fillStyle = '#000000';
                ctx.beginPath();
                ctx.arc(this.player.x - 6, this.player.y - 4, 2, 0, Math.PI * 2);
                ctx.fill();
                ctx.beginPath();
                ctx.arc(this.player.x + 6, this.player.y - 4, 2, 0, Math.PI * 2);
                ctx.fill();
                
                // Dash indicator
                if (this.player.isDashing) {
                    ctx.strokeStyle = '#ff4400';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    ctx.arc(this.player.x, this.player.y, this.player.size + 8, 0, Math.PI * 2);
                    ctx.stroke();
                }
            }

            drawWeapons() {
                const ctx = this.ctx;
                this.weapons.forEach(weapon => {
                    ctx.save();
                    ctx.translate(weapon.x, weapon.y);
                    ctx.rotate(weapon.rotation);
                    ctx.font = weapon.size + 'px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(weapon.emoji, 0, 0);
                    ctx.restore();
                });
            }

            drawParticles() {
                const ctx = this.ctx;
                this.particles.forEach(particle => {
                    ctx.globalAlpha = particle.life;
                    ctx.fillStyle = particle.color;
                    ctx.beginPath();
                    ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                    ctx.fill();
                });
                ctx.globalAlpha = 1;
            }

            drawGameUI() {
                const ctx = this.ctx;
                
                // FPS display
                if (this.gameState.showFPS) {
                    ctx.fillStyle = '#ffffff';
                    ctx.font = '16px monospace';
                    ctx.fillText('FPS: 60', 10, 30);
                }

                // Difficulty indicator
                ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
                ctx.font = '14px Arial';
                ctx.fillText(`Difficulty: ${this.gameState.difficulty.toFixed(1)}x`, 10, 580);
            }

            updateHighScores() {
                const scoresList = document.getElementById('scoresList');
                if (this.highScores.length === 0) {
                    scoresList.innerHTML = '<div class="score-item">No scores yet - be the first!</div>';
                } else {
                    scoresList.innerHTML = this.highScores.map((score, index) => `
                        <div class="score-item">
                            <span>${index + 1}. ${score.date}</span>
                            <span>${score.score} pts (${score.time}s)</span>
                        </div>
                    `).join('');
                }
            }

            clearHighScores() {
                if (confirm('Clear all high scores?')) {
                    this.highScores = [];
                    this.saveData('gameHighScores', this.highScores);
                    this.updateHighScores();
                    this.showToast('High scores cleared');
                }
            }

            // Data Management
            saveData(key, data) {
                const jsonData = JSON.stringify(data);
                document.cookie = `${key}=${encodeURIComponent(jsonData)}; path=/; max-age=${60*60*24*365}`;
            }

            loadData(key, defaultValue) {
                const cookies = document.cookie.split(';');
                for (let cookie of cookies) {
                    const [name, value] = cookie.trim().split('=');
                    if (name === key) {
                        try {
                            return JSON.parse(decodeURIComponent(value));
                        } catch (e) {
                            console.error(`Error loading ${key}:`, e);
                        }
                    }
                }
                return defaultValue;
            }

            // Gallery Methods
            initializeGallery() {
                if (this.galleryImages.length === 0) {
                    this.loadGalleryImages();
                }
                this.setupGalleryEventListeners();
                this.renderGallery();
            }

            setupGalleryEventListeners() {
                // Search input
                const searchInput = document.getElementById('gallerySearch');
                if (searchInput) {
                    searchInput.addEventListener('input', (e) => {
                        this.gallerySearchTerm = e.target.value.toLowerCase();
                        this.currentGalleryPage = 1;
                        this.filterAndRenderGallery();
                    });
                }

                // File filter
                const fileFilter = document.getElementById('galleryFileFilter');
                if (fileFilter) {
                    fileFilter.addEventListener('change', (e) => {
                        this.currentGalleryFilter = e.target.value;
                        this.currentGalleryPage = 1;
                        this.filterAndRenderGallery();
                    });
                }

                // Folder input
                const folderInput = document.getElementById('galleryFolderInput');
                if (folderInput) {
                    folderInput.addEventListener('change', (e) => {
                        this.handleFolderSelection(e.target.files);
                    });
                }

                // View controls
                const viewBtns = document.querySelectorAll('.gallery-view-btn');
                viewBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        viewBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.currentGalleryView = btn.dataset.view;
                        this.renderGallery();
                    });
                });

                // Size controls
                const sizeBtns = document.querySelectorAll('.gallery-size-btn');
                sizeBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        sizeBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.currentGallerySize = btn.dataset.size;
                        this.renderGallery();
                    });
                });

                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    if (this.currentPage === 'gallery') {
                        if (e.key === 'Escape' && document.getElementById('imageModal').style.display !== 'none') {
                            this.closeImageModal();
                        } else if (e.key === 'ArrowLeft' && document.getElementById('imageModal').style.display !== 'none') {
                            this.showPreviousImage();
                        } else if (e.key === 'ArrowRight' && document.getElementById('imageModal').style.display !== 'none') {
                            this.showNextImage();
                        }
                    }
                });
            }

            async loadGalleryImages() {
                const loadingElement = document.getElementById('galleryLoading');
                const galleryContainer = document.getElementById('galleryContainer');
                const galleryCount = document.getElementById('galleryCount');
                
                loadingElement.style.display = 'block';
                galleryContainer.style.display = 'none';

                try {
                    // First, try to load from a directory listing API if available
                    let imagesLoaded = await this.tryLoadFromAPI();
                    
                    if (!imagesLoaded) {
                        // Show instructions to load folder
                        this.showFolderSelectionPrompt();
                        return;
                    }
                    
                    this.filteredImages = [...this.galleryImages];
                    galleryCount.textContent = `${this.galleryImages.length} images found`;
                    
                    loadingElement.style.display = 'none';
                    galleryContainer.style.display = 'block';
                    
                    this.filterAndRenderGallery();
                } catch (error) {
                    console.error('Error loading gallery images:', error);
                    this.showFolderSelectionPrompt();
                }
            }

            async tryLoadFromAPI() {
                try {
                    // Try to fetch from a local server API endpoint
                    const response = await fetch('/api/images/list');
                    if (response.ok) {
                        const imageData = await response.json();
                        this.galleryImages = (imageData.images || []).map(img => ({
                            ...img,
                            modified: new Date(img.modified) // Convert string to Date object
                        }));
                        return true;
                    }
                } catch (error) {
                    console.log('API endpoint not available, falling back to folder selection');
                }
                
                try {
                    // Try alternative endpoint
                    const response = await fetch('./list_images.php');
                    if (response.ok) {
                        const imageData = await response.json();
                        this.galleryImages = (imageData.images || []).map(img => ({
                            ...img,
                            modified: new Date(img.modified) // Convert string to Date object
                        }));
                        return true;
                    }
                } catch (error) {
                    console.log('PHP endpoint not available');
                }
                
                return false;
            }

            showFolderSelectionPrompt() {
                const loadingElement = document.getElementById('galleryLoading');
                const galleryContainer = document.getElementById('galleryContainer');
                
                loadingElement.style.display = 'none';
                galleryContainer.style.display = 'block';
                
                galleryContainer.innerHTML = `
                    <div class="gallery-folder-prompt">
                        <div class="prompt-icon">📁</div>
                        <h3>Load Your Images Folder</h3>
                        <p>Click the "📁 Load Images Folder" button above and select your Images directory:</p>
                        <div class="folder-path"><code>C:\\Users\\jamie\\Desktop\\MyHTML\\Images</code></div>
                        <div class="prompt-features">
                            <h4>🚀 Alternative: Set up a Local Server</h4>
                            <p>For automatic loading, you can:</p>
                            <ul>
                                <li>Use a local web server (Python, Node.js, or PHP)</li>
                                <li>Enable directory browsing for the Images folder</li>
                                <li>Create a simple API endpoint to list image files</li>
                            </ul>
                            <details>
                                <summary>Quick Python Server Setup</summary>
                                <div class="code-block">
                                    <code>
                                        # In your MyHTML directory, run:<br/>
                                        python -m http.server 8000<br/>
                                        # Then visit: http://localhost:8000
                                    </code>
                                </div>
                            </details>
                        </div>
                    </div>
                `;
            }

            handleFolderSelection(files) {
                if (!files || files.length === 0) return;
                
                const loadingElement = document.getElementById('galleryLoading');
                const galleryContainer = document.getElementById('galleryContainer');
                const galleryCount = document.getElementById('galleryCount');
                
                loadingElement.style.display = 'block';
                galleryContainer.style.display = 'none';
                
                const imageFiles = Array.from(files).filter(file => {
                    const extension = file.name.toLowerCase().split('.').pop();
                    return ['jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp', 'svg'].includes(extension);
                });
                
                this.galleryImages = imageFiles.map(file => ({
                    name: file.name,
                    path: URL.createObjectURL(file),
                    type: file.name.toLowerCase().split('.').pop(),
                    size: file.size,
                    modified: new Date(file.lastModified),
                    file: file
                }));
                
                // Sort by name
                this.galleryImages.sort((a, b) => a.name.localeCompare(b.name));
                
                this.filteredImages = [...this.galleryImages];
                galleryCount.textContent = `${this.galleryImages.length} images loaded from folder`;
                
                loadingElement.style.display = 'none';
                galleryContainer.style.display = 'block';
                
                this.filterAndRenderGallery();
                
                // Show success message
                this.showToast(`Successfully loaded ${this.galleryImages.length} images from your folder!`, 'success');
            }

            generateSampleImageList() {
                // This generates a sample list of images based on common naming patterns
                // In a real implementation, you'd fetch this from a server endpoint
                const imageExtensions = ['.jpg', '.png', '.gif'];
                const sampleImages = [];
                
                // Add some sample images based on the patterns we saw
                const datePatterns = [
                    '20250101_221059', '20250102_081652', '20250103_103051', 
                    '20250105_100152', '20250106_135007', '20250107_135418',
                    '20250108_114753', '20250109_004512', '20250110_131453'
                ];
                
                const miscPatterns = [
                    '#3', '#4', '1024x1024', '128x128', '16x16', 
                    'screenshot_001', 'screenshot_002', 'game_capture_001',
                    'design_mockup_v1', 'design_mockup_v2', 'project_demo_1'
                ];

                datePatterns.forEach(pattern => {
                    imageExtensions.forEach(ext => {
                        sampleImages.push({
                            name: pattern + ext,
                            path: `Images/${pattern}${ext}`,
                            type: ext.slice(1),
                            size: this.getRandomFileSize(),
                            modified: new Date(2025, 0, Math.floor(Math.random() * 30) + 1)
                        });
                    });
                });

                miscPatterns.forEach(pattern => {
                    const ext = imageExtensions[Math.floor(Math.random() * imageExtensions.length)];
                    sampleImages.push({
                        name: pattern + ext,
                        path: `Images/${pattern}${ext}`,
                        type: ext.slice(1),
                        size: this.getRandomFileSize(),
                        modified: new Date(2025, 0, Math.floor(Math.random() * 30) + 1)
                    });
                });

                return sampleImages.sort((a, b) => b.modified - a.modified);
            }

            getRandomFileSize() {
                return Math.floor(Math.random() * 5000000) + 100000; // 100KB to 5MB
            }

            formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }

            formatDate(dateValue) {
                if (!dateValue) return 'Unknown';
                
                // Handle Date objects
                if (dateValue instanceof Date) {
                    return dateValue.toLocaleDateString();
                }
                
                // Handle string dates
                if (typeof dateValue === 'string') {
                    const date = new Date(dateValue);
                    return isNaN(date.getTime()) ? dateValue : date.toLocaleDateString();
                }
                
                return String(dateValue);
            }

            filterAndRenderGallery() {
                let filtered = [...this.galleryImages];

                // Apply search filter
                if (this.gallerySearchTerm) {
                    filtered = filtered.filter(img => 
                        img.name.toLowerCase().includes(this.gallerySearchTerm)
                    );
                }

                // Apply file type filter
                if (this.currentGalleryFilter !== 'all') {
                    filtered = filtered.filter(img => img.type === this.currentGalleryFilter);
                }

                this.filteredImages = filtered;
                
                // Update count
                const galleryCount = document.getElementById('galleryCount');
                const totalText = `${filtered.length} of ${this.galleryImages.length} images`;
                const filterText = this.gallerySearchTerm || this.currentGalleryFilter !== 'all' ? ' (filtered)' : '';
                galleryCount.textContent = totalText + filterText;

                this.renderGallery();
            }

            renderGallery() {
                const container = document.getElementById('galleryContainer');
                if (!container) return;

                // Apply view classes
                container.className = `gallery-container ${this.currentGalleryView}-view ${this.currentGallerySize}`;

                // Calculate pagination
                const startIndex = (this.currentGalleryPage - 1) * this.galleryImagesPerPage;
                const endIndex = startIndex + this.galleryImagesPerPage;
                const pageImages = this.filteredImages.slice(startIndex, endIndex);

                // Render images
                if (pageImages.length === 0) {
                    container.innerHTML = `
                        <div class="gallery-empty">
                            <div class="placeholder-icon">🖼️</div>
                            <p>No images found</p>
                            <p>Try adjusting your search or filter criteria</p>
                        </div>
                    `;
                } else {
                    container.innerHTML = pageImages.map((img, index) => {
                        const globalIndex = startIndex + index;
                        return `
                            <div class="gallery-item ${this.currentGalleryView}" onclick="app.openImageModal(${globalIndex})" data-index="${globalIndex}">
                                <img src="${img.path}" alt="${img.name}" loading="lazy" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzMzMyIvPjx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZSBub3QgZm91bmQ8L3RleHQ+PC9zdmc+'" />
                                <div class="gallery-item-info">
                                    <div class="gallery-item-name">${img.name}</div>
                                    <div class="gallery-item-details">
                                        ${this.formatFileSize(img.size)} • ${img.type.toUpperCase()} • ${this.formatDate(img.modified)}
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('');
                }

                this.updateGalleryPagination();
            }

            updateGalleryPagination() {
                const totalPages = Math.ceil(this.filteredImages.length / this.galleryImagesPerPage);
                const pagination = document.getElementById('galleryPagination');
                const prevBtn = document.getElementById('galleryPrevPage');
                const nextBtn = document.getElementById('galleryNextPage');
                const pageInfo = document.getElementById('galleryPageInfo');

                if (totalPages <= 1) {
                    pagination.style.display = 'none';
                } else {
                    pagination.style.display = 'flex';
                    prevBtn.disabled = this.currentGalleryPage === 1;
                    nextBtn.disabled = this.currentGalleryPage === totalPages;
                    pageInfo.textContent = `Page ${this.currentGalleryPage} of ${totalPages}`;
                }
            }

            galleryPreviousPage() {
                if (this.currentGalleryPage > 1) {
                    this.currentGalleryPage--;
                    this.renderGallery();
                    document.getElementById('galleryContainer').scrollIntoView({ behavior: 'smooth' });
                }
            }

            galleryNextPage() {
                const totalPages = Math.ceil(this.filteredImages.length / this.galleryImagesPerPage);
                if (this.currentGalleryPage < totalPages) {
                    this.currentGalleryPage++;
                    this.renderGallery();
                    document.getElementById('galleryContainer').scrollIntoView({ behavior: 'smooth' });
                }
            }

            openImageModal(index) {
                this.currentModalImageIndex = index;
                const img = this.filteredImages[index];
                
                const modal = document.getElementById('imageModal');
                const modalImage = document.getElementById('modalImage');
                const modalFilename = document.getElementById('modalFilename');
                const modalDetails = document.getElementById('modalDetails');

                modalImage.src = img.path;
                modalFilename.textContent = img.name;
                modalDetails.textContent = `${this.formatFileSize(img.size)} • ${img.type.toUpperCase()} • Modified: ${this.formatDate(img.modified)}`;

                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';

                // Update navigation buttons
                this.updateModalNavigation();
            }

            updateModalNavigation() {
                const prevBtn = document.getElementById('modalPrevBtn');
                const nextBtn = document.getElementById('modalNextBtn');
                
                prevBtn.style.display = this.currentModalImageIndex > 0 ? 'block' : 'none';
                nextBtn.style.display = this.currentModalImageIndex < this.filteredImages.length - 1 ? 'block' : 'none';
            }

            showPreviousImage() {
                if (this.currentModalImageIndex > 0) {
                    this.openImageModal(this.currentModalImageIndex - 1);
                }
            }

            showNextImage() {
                if (this.currentModalImageIndex < this.filteredImages.length - 1) {
                    this.openImageModal(this.currentModalImageIndex + 1);
                }
            }

            closeImageModal() {
                const modal = document.getElementById('imageModal');
                modal.style.display = 'none';
                document.body.style.overflow = '';
                this.currentModalImageIndex = -1;
            }
        }

        // Screenshot functionality
        async function captureScreenshot() {
            try {
                // Request screen capture
                const stream = await navigator.mediaDevices.getDisplayMedia({
                    video: { mediaSource: 'screen' },
                    audio: false
                });

                // Create video element to capture frame
                const video = document.createElement('video');
                video.srcObject = stream;
                video.play();

                // Wait for video to load
                return new Promise((resolve, reject) => {
                    video.onloadedmetadata = () => {
                        // Create canvas and capture frame
                        const canvas = document.createElement('canvas');
                        canvas.width = video.videoWidth;
                        canvas.height = video.videoHeight;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(video, 0, 0);

                        // Stop the stream
                        stream.getTracks().forEach(track => track.stop());

                        // Convert to base64
                        const imageData = canvas.toDataURL('image/png').split(',')[1];
                        resolve(imageData);
                    };

                    video.onerror = () => {
                        stream.getTracks().forEach(track => track.stop());
                        reject(new Error('Failed to capture screenshot'));
                    };
                });

            } catch (error) {
                console.error('Screenshot error:', error);
                alert('Screenshot capture failed. Please make sure you grant permission to share your screen.');
                return null;
            }
        }

        // Global keyboard shortcut handler
        document.addEventListener('keydown', async (e) => {
            // Ctrl+I for screenshot to Gemini
            if (e.ctrlKey && e.key === 'i') {
                e.preventDefault();
                
                // Make sure Gemini page is active, if not switch to it
                if (app) {
                    app.switchPage('gemini-chat');
                    
                    // Update nav item active state
                    const navItems = document.querySelectorAll('.nav-item');
                    navItems.forEach(nav => nav.classList.remove('active'));
                    const geminiNavItem = document.querySelector('.nav-item[data-page="gemini-chat"]');
                    if (geminiNavItem) {
                        geminiNavItem.classList.add('active');
                    }
                }

                const imageData = await captureScreenshot();
                if (imageData && app) {
                    // Send screenshot to Gemini
                    app.sendGeminiMessage(imageData);
                }
            }
        });

        // X-CLONE Global Functions
        function postXTweet() {
            if (app) app.postXTweet();
        }

        function openXPostModal() {
            if (app) app.openXPostModal();
        }

        function openXChat(userId) {
            if (app) app.openXChat(userId);
        }

        function sendXMessage() {
            if (app) app.sendXMessage();
        }

        // Initialize the app
        let app;
        document.addEventListener('DOMContentLoaded', () => {
            app = new UltimateProductivitySuite();
        });
    </script>
</body>
</html>